/*! For license information please see main.2da4c899.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case S:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ie=null;function Se(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Te(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Ee(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ie)&&(Ne(),Ee())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Pe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,It,St,Tt=!1,Et=[],Ct=null,Nt=null,At=null,Rt=new Map,Dt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){Tt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(Vt),Dt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Et.length){Bt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Ht(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return In}var Tn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(Tn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Rn),Pn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Te(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){Ur(e,0)}function Yn(e){if(H(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Wn(t,Hn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Ir={};function Sr(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Tr=Sr("animationend"),Er=Sr("animationiteration"),Cr=Sr("animationstart"),Nr=Sr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),s(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Or=Rr[Pr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(Tr,"onAnimationEnd"),Dr(Er,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Wt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=En;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Tr:case Er:case Cr:s=yn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=De(p,h))&&l.push(Wr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Hr(d))p++;for(d=0,v=h;v;v=Hr(v))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=$n;else if(Kn(u))if(Xn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,zn=!0)),0<(y=Gr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Zt=Jt=Xt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=De(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=De(n,a))&&o.unshift(Wr(n,s,u)):i||null!=(s=De(n,a))&&o.push(Wr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Ii(e){return{current:e}}function Si(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ti(e,t){xi++,_i[xi]=e.current,e.current=t}var Ei={},Ci=Ii(Ei),Ni=Ii(!1),Ai=Ei;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ei;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Si(Ni),Si(Ci)}function Oi(e,t,n){if(Ci.current!==Ei)throw Error(a(168));Ti(Ci,t),Ti(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ei,Ai=Ci.current,Ti(Ci,e),Ti(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ci),Ti(Ci,e)):Si(Ni),Ti(Ni,n)}var Ui=null,Vi=!1,ji=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,zi),i}finally{kt=t,ji=!1}}return null}var qi=b.ReactCurrentBatchConfig;function Ki(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Wi=Ii(null),Gi=null,Hi=null,Qi=null;function Yi(){Qi=Hi=Gi=null}function $i(e){var t=Wi.current;Si(Wi),e._currentValue=t}function Xi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ji(e,t){Gi=e,Qi=Hi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Zi(e){var t=e._currentValue;if(Qi!==e)if(e={context:e,memoizedValue:t,next:null},null===Hi){if(null===Gi)throw Error(a(308));Hi=e,Gi.dependencies={lanes:0,firstContext:e}}else Hi=Hi.next=e;return t}var ea=null,ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function aa(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tc(e)?(null===(e=n.interleaved)?(t.next=t,null===ea?ea=[n]:ea.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function ua(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sa(e,t,n,r){var i=e.updateQueue;ta=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:ta=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ps|=o,e.lanes=o,e.memoizedState=f}}function ca(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var la=(new r.Component).refs;function fa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ha={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Xs(),i=Js(e),a=ia(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Zs(e,i,r))&&oa(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Xs(),i=Js(e),a=ia(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Zs(e,i,r))&&oa(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xs(),r=Js(e),i=ia(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),aa(e,i),null!==(t=Zs(e,r,n))&&oa(t,e,r)}};function da(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function pa(e,t,n){var r=!1,i=Ei,a=t.contextType;return"object"===typeof a&&null!==a?a=Zi(a):(i=Di(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ei),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ha,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function va(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ha.enqueueReplaceState(t,t.state,null)}function ma(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=la,na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Zi(a):(a=Di(t)?Ai:Ci.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(fa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ha.enqueueReplaceState(i,i.state,null),sa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var ya=[],ga=0,ka=null,ba=0,wa=[],_a=0,xa=null,Ia=1,Sa="";function Ta(e,t){ya[ga++]=ba,ya[ga++]=ka,ka=e,ba=t}function Ea(e,t,n){wa[_a++]=Ia,wa[_a++]=Sa,wa[_a++]=xa,xa=e;var r=Ia;e=Sa;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ia=1<<32-ot(t)+i|n<<i|r,Sa=a+e}else Ia=1<<a|n<<i|r,Sa=e}function Ca(e){null!==e.return&&(Ta(e,1),Ea(e,1,0))}function Na(e){for(;e===ka;)ka=ya[--ga],ya[ga]=null,ba=ya[--ga],ya[ga]=null;for(;e===xa;)xa=wa[--_a],wa[_a]=null,Sa=wa[--_a],wa[_a]=null,Ia=wa[--_a],wa[_a]=null}var Aa=null,Ra=null,Da=!1,Pa=null;function Oa(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function La(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Aa=e,Ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Aa=e,Ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==xa?{id:Ia,overflow:Sa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Aa=e,Ra=null,!0);default:return!1}}function Ma(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Fa(e){if(Da){var t=Ra;if(t){var n=t;if(!La(e,t)){if(Ma(e))throw Error(a(418));t=ci(n.nextSibling);var r=Aa;t&&La(e,t)?Oa(r,n):(e.flags=-4097&e.flags|2,Da=!1,Aa=e)}}else{if(Ma(e))throw Error(a(418));e.flags=-4097&e.flags|2,Da=!1,Aa=e}}}function Ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Aa=e}function Va(e){if(e!==Aa)return!1;if(!Da)return Ua(e),Da=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=Ra)){if(Ma(e)){for(e=Ra;e;)e=ci(e.nextSibling);throw Error(a(418))}for(;t;)Oa(e,t),t=ci(t.nextSibling)}if(Ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ra=null}}else Ra=Aa?ci(e.stateNode.nextSibling):null;return!0}function ja(){Ra=Aa=null,Da=!1}function Ba(e){null===Pa?Pa=[e]:Pa.push(e)}function za(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===la&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function qa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ka(e){return(0,e._init)(e._payload)}function Wa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Ka(a)===t.type)?((r=i(t,n.props)).ref=za(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=za(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=za(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Oc(t,e.mode,n,null)).return=e,t;qa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);qa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);qa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),Da&&Ta(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return Da&&Ta(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),Da&&Ta(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),Da&&Ta(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return Da&&Ta(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),Da&&Ta(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Ka(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=za(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Oc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Pc(o.type,o.key,o.props,null,r.mode,s)).ref=za(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(o,r.mode,s)).return=r,r=a}return u(r);case D:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);qa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Mc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ga=Wa(!0),Ha=Wa(!1),Qa={},Ya=Ii(Qa),$a=Ii(Qa),Xa=Ii(Qa);function Ja(e){if(e===Qa)throw Error(a(174));return e}function Za(e,t){switch(Ti(Xa,t),Ti($a,e),Ti(Ya,Qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Ya),Ti(Ya,t)}function eo(){Si(Ya),Si($a),Si(Xa)}function to(e){Ja(Xa.current);var t=Ja(Ya.current),n=se(t,e.type);t!==n&&(Ti($a,e),Ti(Ya,n))}function no(e){$a.current===e&&(Si(Ya),Si($a))}var ro=Ii(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var uo=b.ReactCurrentDispatcher,so=b.ReactCurrentBatchConfig,co=0,lo=null,fo=null,ho=null,po=!1,vo=!1,mo=0,yo=0;function go(){throw Error(a(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function bo(e,t,n,r,i,o){if(co=o,lo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uo.current=null===e||null===e.memoizedState?ru:iu,e=n(r,i),vo){o=0;do{if(vo=!1,mo=0,25<=o)throw Error(a(301));o+=1,ho=fo=null,t.updateQueue=null,uo.current=au,e=n(r,i)}while(vo)}if(uo.current=nu,t=null!==fo&&null!==fo.next,co=0,ho=fo=lo=null,po=!1,t)throw Error(a(300));return e}function wo(){var e=0!==mo;return mo=0,e}function _o(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ho?lo.memoizedState=ho=e:ho=ho.next=e,ho}function xo(){if(null===fo){var e=lo.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===ho?lo.memoizedState:ho.next;if(null!==t)ho=t,fo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===ho?lo.memoizedState=ho=e:ho=ho.next=e}return ho}function Io(e,t){return"function"===typeof t?t(e):t}function So(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=fo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((co&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,lo.lanes|=f,Ps|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,lo.lanes|=o,Ps|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function To(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Eo(){}function Co(e,t){var n=lo,r=xo(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Vo(Ro.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ho&&1&ho.memoizedState.tag){if(n.flags|=2048,Oo(9,Ao.bind(null,n,r,i,t),void 0,null),null===Ts)throw Error(a(349));0!==(30&co)||No(n,t,i)}return i}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ao(e,t,n,r){t.value=n,t.getSnapshot=r,Do(t)&&Zs(e,1,-1)}function Ro(e,t,n){return n((function(){Do(t)&&Zs(e,1,-1)}))}function Do(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Po(e){var t=_o();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=Xo.bind(null,lo,e),[t.memoizedState,e]}function Oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Lo(){return xo().memoizedState}function Mo(e,t,n,r){var i=_o();lo.flags|=e,i.memoizedState=Oo(1|t,n,void 0,void 0===r?null:r)}function Fo(e,t,n,r){var i=xo();r=void 0===r?null:r;var a=void 0;if(null!==fo){var o=fo.memoizedState;if(a=o.destroy,null!==r&&ko(r,o.deps))return void(i.memoizedState=Oo(t,n,a,r))}lo.flags|=e,i.memoizedState=Oo(1|t,n,a,r)}function Uo(e,t){return Mo(8390656,8,e,t)}function Vo(e,t){return Fo(2048,8,e,t)}function jo(e,t){return Fo(4,2,e,t)}function Bo(e,t){return Fo(4,4,e,t)}function zo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4,4,zo.bind(null,t,e),n)}function Ko(){}function Wo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Go(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),lo.lanes|=n,Ps|=n,e.baseState=!0),t)}function Qo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=so.transition;so.transition={};try{e(!1),t()}finally{kt=n,so.transition=r}}function Yo(){return xo().memoizedState}function $o(e,t,n){var r=Js(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Jo(e)?Zo(t,n):(eu(e,t,n),null!==(e=Zs(e,r,n=Xs()))&&tu(e,t,r))}function Xo(e,t,n){var r=Js(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jo(e))Zo(t,i);else{eu(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o))return}catch(s){}null!==(e=Zs(e,r,n=Xs()))&&tu(e,t,r)}}function Jo(e){var t=e.alternate;return e===lo||null!==t&&t===lo}function Zo(e,t){vo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function eu(e,t,n){tc(e)?(null===(e=t.interleaved)?(n.next=n,null===ea?ea=[t]:ea.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function tu(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var nu={readContext:Zi,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},ru={readContext:Zi,useCallback:function(e,t){return _o().memoizedState=[e,void 0===t?null:t],e},useContext:Zi,useEffect:Uo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4194308,4,zo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mo(4,2,e,t)},useMemo:function(e,t){var n=_o();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_o();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$o.bind(null,lo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},_o().memoizedState=e},useState:Po,useDebugValue:Ko,useDeferredValue:function(e){return _o().memoizedState=e},useTransition:function(){var e=Po(!1),t=e[0];return e=Qo.bind(null,e[1]),_o().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lo,i=_o();if(Da){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ts)throw Error(a(349));0!==(30&co)||No(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Uo(Ro.bind(null,r,o,e),[e]),r.flags|=2048,Oo(9,Ao.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=_o(),t=Ts.identifierPrefix;if(Da){var n=Sa;t=":"+t+"R"+(n=(Ia&~(1<<32-ot(Ia)-1)).toString(32)+n),0<(n=mo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=yo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iu={readContext:Zi,useCallback:Wo,useContext:Zi,useEffect:Vo,useImperativeHandle:qo,useInsertionEffect:jo,useLayoutEffect:Bo,useMemo:Go,useReducer:So,useRef:Lo,useState:function(){return So(Io)},useDebugValue:Ko,useDeferredValue:function(e){return Ho(xo(),fo.memoizedState,e)},useTransition:function(){return[So(Io)[0],xo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:Co,useId:Yo,unstable_isNewReconciler:!1},au={readContext:Zi,useCallback:Wo,useContext:Zi,useEffect:Vo,useImperativeHandle:qo,useInsertionEffect:jo,useLayoutEffect:Bo,useMemo:Go,useReducer:To,useRef:Lo,useState:function(){return To(Io)},useDebugValue:Ko,useDeferredValue:function(e){var t=xo();return null===fo?t.memoizedState=e:Ho(t,fo.memoizedState,e)},useTransition:function(){return[To(Io)[0],xo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:Co,useId:Yo,unstable_isNewReconciler:!1};function ou(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function uu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var su,cu,lu,fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bs||(Bs=!0,zs=r),uu(0,t)},n}function du(e,t,n){(n=ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uu(0,t),"function"!==typeof r&&(null===qs?qs=new Set([this]):qs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function pu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function vu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function mu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ia(-1,1)).tag=2,aa(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function yu(e,t){if(!Da)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ku(e,t,n){var r=t.pendingProps;switch(Na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gu(t),null;case 1:case 17:return Di(t.type)&&Pi(),gu(t),null;case 3:return r=t.stateNode,eo(),Si(Ni),Si(Ci),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Va(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Pa&&(ac(Pa),Pa=null))),gu(t),null;case 5:no(t);var i=Ja(Xa.current);if(n=t.type,null!==e&&null!=t.stateNode)cu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return gu(t),null}if(e=Ja(Ya.current),Va(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,su(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return gu(t),null;case 6:if(e&&null!=t.stateNode)lu(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ja(Xa.current),Ja(Ya.current),Va(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=Aa))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return gu(t),null;case 13:if(Si(ro),r=t.memoizedState,Da&&null!==Ra&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Ra;r;)r=ci(r.nextSibling);return ja(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Va(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[hi]=t}else ja(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return gu(t),null}return null!==Pa&&(ac(Pa),Pa=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Va(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Rs&&(Rs=3):pc())),null!==t.updateQueue&&(t.flags|=4),gu(t),null);case 4:return eo(),null===e&&zr(t.stateNode.containerInfo),gu(t),null;case 10:return $i(t.type._context),gu(t),null;case 19:if(Si(ro),null===(o=t.memoizedState))return gu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)yu(o,!1);else{if(0!==Rs||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=io(e))){for(t.flags|=128,yu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Vs&&(t.flags|=128,r=!0,yu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),yu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Da)return gu(t),null}else 2*Xe()-o.renderingStartTime>Vs&&1073741824!==n&&(t.flags|=128,r=!0,yu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=ro.current,Ti(ro,r?1&n|2:1&n),t):(gu(t),null);case 22:case 23:return lc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ns)&&(gu(t),6&t.subtreeFlags&&(t.flags|=8192)):gu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}su=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},cu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ja(Ya.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var bu=b.ReactCurrentOwner,wu=!1;function _u(e,t,n,r){t.child=null===e?Ha(t,null,n,r):Ga(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ji(t,i),r=bo(e,t,n,r,a,i),n=wo(),null===e||wu?(Da&&n&&Ca(t),t.flags|=1,_u(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Iu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Su(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Su(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Cu(e,t,n,r,i)}function Tu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(As,Ns),Ns|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(As,Ns),Ns|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(As,Ns),Ns|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(As,Ns),Ns|=r;return _u(e,t,i,n),t.child}function Eu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cu(e,t,n,r,i){var a=Di(n)?Ai:Ci.current;return a=Ri(t,a),Ji(t,i),n=bo(e,t,n,r,a,i),r=wo(),null===e||wu?(Da&&r&&Ca(t),t.flags|=1,_u(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Nu(e,t,n,r,i){if(Di(n)){var a=!0;Mi(t)}else a=!1;if(Ji(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),pa(t,n,r),ma(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Zi(c):c=Ri(t,c=Di(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&va(t,o,r,c),ta=!1;var h=t.memoizedState;o.state=h,sa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||ta?("function"===typeof l&&(fa(t,n,l,r),s=t.memoizedState),(u=ta||da(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Ki(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Zi(s):s=Ri(t,s=Di(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&va(t,o,r,s),ta=!1,h=t.memoizedState,o.state=h,sa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||ta?("function"===typeof d&&(fa(t,n,d,r),p=t.memoizedState),(c=ta||da(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Eu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,bu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ga(t,e.child,null,a),t.child=Ga(t,null,u,a)):_u(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ru(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Za(e,t.containerInfo)}function Du(e,t,n,r,i){return ja(),Ba(i),t.flags|=256,_u(e,t,n,r),t.child}var Pu={dehydrated:null,treeContext:null,retryLane:0};function Ou(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lu(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Mu(e,t,n){var r,i=t.pendingProps,o=ro.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(ro,1&o),null===e)return Fa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=Lc(o,i,0,null),e=Oc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Ou(n),t.memoizedState=Pu,e):Fu(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,ju(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=Lc({mode:"visible",children:i.children},o,0,null),(u=Oc(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&Ga(t,e.child,null,n),t.child.memoizedState=Ou(n),t.memoizedState=Pu,u);if(0===(1&t.mode))t=ju(e,t,n,null);else if("$!"===r.data)t=ju(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),wu||i){if(null!==(i=Ts)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Zs(e,i,-1))}pc(),t=ju(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Ra=ci(r.nextSibling),Aa=t,Da=!0,Pa=null,null!==n&&(wa[_a++]=Ia,wa[_a++]=Sa,wa[_a++]=xa,Ia=n.id,Sa=n.overflow,xa=t),(t=Fu(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=Vu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Ou(n):Lu(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Pu,i):(n=Uu(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=Vu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Ou(n):Lu(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Pu,i):(n=Uu(e,t,i.children,n),t.memoizedState=null,n)}function Fu(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uu(e,t,n,r){var i=e.child;return e=i.sibling,n=Dc(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Vu(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=Dc(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Dc(o,r):(r=Oc(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ju(e,t,n,r){return null!==r&&Ba(r),Ga(t,e.child,null,n),(e=Fu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Xi(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(_u(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bu(e,n,t);else if(19===e.tag)Bu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===io(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ps|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wu(e,t){switch(Na(t),t.tag){case 1:return Di(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Si(Ni),Si(Ci),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Si(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ja()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(ro),null;case 4:return eo(),null;case 10:return $i(t.type._context),null;case 22:case 23:return lc(),null;default:return null}}var Gu=!1,Hu=!1,Qu="function"===typeof WeakSet?WeakSet:Set,Yu=null;function $u(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function Xu(e,t,n){try{n()}catch(r){xc(e,t,r)}}var Ju=!1;function Zu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Xu(t,n,a)}i=i.next}while(i!==r)}}function es(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ts(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ns(e){var t=e.alternate;null!==t&&(e.alternate=null,ns(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rs(e){return 5===e.tag||3===e.tag||4===e.tag}function is(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function as(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(as(e,t,n),e=e.sibling;null!==e;)as(e,t,n),e=e.sibling}function os(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(os(e,t,n),e=e.sibling;null!==e;)os(e,t,n),e=e.sibling}var us=null,ss=!1;function cs(e,t,n){for(n=n.child;null!==n;)ls(e,t,n),n=n.sibling}function ls(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Hu||$u(n,t);case 6:var r=us,i=ss;us=null,cs(e,t,n),ss=i,null!==(us=r)&&(ss?(e=us,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):us.removeChild(n.stateNode));break;case 18:null!==us&&(ss?(e=us,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(us,n.stateNode));break;case 4:r=us,i=ss,us=n.stateNode.containerInfo,ss=!0,cs(e,t,n),us=r,ss=i;break;case 0:case 11:case 14:case 15:if(!Hu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&Xu(n,t,o),i=i.next}while(i!==r)}cs(e,t,n);break;case 1:if(!Hu&&($u(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){xc(n,t,u)}cs(e,t,n);break;case 21:cs(e,t,n);break;case 22:1&n.mode?(Hu=(r=Hu)||null!==n.memoizedState,cs(e,t,n),Hu=r):cs(e,t,n);break;default:cs(e,t,n)}}function fs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qu),t.forEach((function(t){var r=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function hs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:us=s.stateNode,ss=!1;break e;case 3:case 4:us=s.stateNode.containerInfo,ss=!0;break e}s=s.return}if(null===us)throw Error(a(160));ls(o,u,i),us=null,ss=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){xc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ds(t,e),t=t.sibling}function ds(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hs(t,e),ps(e),4&r){try{Zu(3,e,e.return),es(3,e)}catch(v){xc(e,e.return,v)}try{Zu(5,e,e.return)}catch(v){xc(e,e.return,v)}}break;case 1:hs(t,e),ps(e),512&r&&null!==n&&$u(n,n.return);break;case 5:if(hs(t,e),ps(e),512&r&&null!==n&&$u(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(v){xc(e,e.return,v)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(v){xc(e,e.return,v)}}break;case 6:if(hs(t,e),ps(e),4&r){if(null===e.stateNode)throw Error(a(162));l=e.stateNode,f=e.memoizedProps;try{l.nodeValue=f}catch(v){xc(e,e.return,v)}}break;case 3:if(hs(t,e),ps(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(v){xc(e,e.return,v)}break;case 4:default:hs(t,e),ps(e);break;case 13:hs(t,e),ps(e),8192&(l=e.child).flags&&null!==l.memoizedState&&(null===l.alternate||null===l.alternate.memoizedState)&&(Us=Xe()),4&r&&fs(e);break;case 22:if(l=null!==n&&null!==n.memoizedState,1&e.mode?(Hu=(f=Hu)||l,hs(t,e),Hu=f):hs(t,e),ps(e),8192&r){f=null!==e.memoizedState;e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,f?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=d.stateNode,u=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(v){xc(e,e.return,v)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=f?"":d.memoizedProps}catch(v){xc(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}if(f&&!l&&0!==(1&e.mode))for(Yu=e,e=e.child;null!==e;){for(l=Yu=e;null!==Yu;){switch(h=(f=Yu).child,f.tag){case 0:case 11:case 14:case 15:Zu(4,f,f.return);break;case 1:if($u(f,f.return),"function"===typeof(o=f.stateNode).componentWillUnmount){d=f,p=f.return;try{i=d,o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(v){xc(d,p,v)}}break;case 5:$u(f,f.return);break;case 22:if(null!==f.memoizedState){gs(l);continue}}null!==h?(h.return=f,Yu=h):gs(l)}e=e.sibling}}break;case 19:hs(t,e),ps(e),4&r&&fs(e);case 21:}}function ps(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rs(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),os(e,is(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;as(e,is(e),o);break;default:throw Error(a(161))}}catch(u){xc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vs(e,t,n){Yu=e,ms(e,t,n)}function ms(e,t,n){for(var r=0!==(1&e.mode);null!==Yu;){var i=Yu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Gu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Hu;u=Gu;var c=Hu;if(Gu=o,(Hu=s)&&!c)for(Yu=i;null!==Yu;)s=(o=Yu).child,22===o.tag&&null!==o.memoizedState?ks(i):null!==s?(s.return=o,Yu=s):ks(i);for(;null!==a;)Yu=a,ms(a,t,n),a=a.sibling;Yu=i,Gu=u,Hu=c}ys(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Yu=a):ys(e)}}function ys(e){for(;null!==Yu;){var t=Yu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Hu||es(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Hu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ki(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ca(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ca(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Hu||512&t.flags&&ts(t)}catch(d){xc(t,t.return,d)}}if(t===e){Yu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Yu=n;break}Yu=t.return}}function gs(e){for(;null!==Yu;){var t=Yu;if(t===e){Yu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Yu=n;break}Yu=t.return}}function ks(e){for(;null!==Yu;){var t=Yu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{es(4,t)}catch(s){xc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){xc(t,i,s)}}var a=t.return;try{ts(t)}catch(s){xc(t,a,s)}break;case 5:var o=t.return;try{ts(t)}catch(s){xc(t,o,s)}}}catch(s){xc(t,t.return,s)}if(t===e){Yu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Yu=u;break}Yu=t.return}}var bs,ws=Math.ceil,_s=b.ReactCurrentDispatcher,xs=b.ReactCurrentOwner,Is=b.ReactCurrentBatchConfig,Ss=0,Ts=null,Es=null,Cs=0,Ns=0,As=Ii(0),Rs=0,Ds=null,Ps=0,Os=0,Ls=0,Ms=null,Fs=null,Us=0,Vs=1/0,js=null,Bs=!1,zs=null,qs=null,Ks=!1,Ws=null,Gs=0,Hs=0,Qs=null,Ys=-1,$s=0;function Xs(){return 0!==(6&Ss)?Xe():-1!==Ys?Ys:Ys=Xe()}function Js(e){return 0===(1&e.mode)?1:0!==(2&Ss)&&0!==Cs?Cs&-Cs:null!==qi.transition?(0===$s&&($s=vt()),$s):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function Zs(e,t,n){if(50<Hs)throw Hs=0,Qs=null,Error(a(185));var r=ec(e,t);return null===r?null:(yt(r,t,n),0!==(2&Ss)&&r===Ts||(r===Ts&&(0===(2&Ss)&&(Os|=t),4===Rs&&oc(r,Cs)),nc(r,n),1===t&&0===Ss&&0===(1&e.mode)&&(Vs=Xe()+500,Vi&&zi())),r)}function ec(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tc(e){return(null!==Ts||null!==ea)&&0!==(1&e.mode)&&0===(2&Ss)}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ts?Cs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(uc.bind(null,e)):Bi(uc.bind(null,e)),oi((function(){0===Ss&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Ys=-1,$s=0,0!==(6&Ss))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ts?Cs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Ss;Ss|=2;var o=dc();for(Ts===e&&Cs===t||(js=null,Vs=Xe()+500,fc(e,t));;)try{yc();break}catch(s){hc(e,s)}Yi(),_s.current=o,Ss=i,null!==Es?t=0:(Ts=null,Cs=0,t=Rs)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ic(e,i))),1===t)throw n=Ds,fc(e,0),oc(e,r),nc(e,Xe()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ic(e,o))),1===t))throw n=Ds,fc(e,0),oc(e,r),nc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,Fs,js);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Us+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Xs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,Fs,js),t);break}bc(e,Fs,js);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ws(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,Fs,js),r);break}bc(e,Fs,js);break;default:throw Error(a(329))}}}return nc(e,Xe()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Ms;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Fs,Fs=n,null!==t&&ac(t)),e}function ac(e){null===Fs?Fs=e:Fs.push.apply(Fs,e)}function oc(e,t){for(t&=~Ls,t&=~Os,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Ss))throw Error(a(327));wc();var t=ht(e,0);if(0===(1&t))return nc(e,Xe()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Ds,fc(e,0),oc(e,t),nc(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Fs,js),nc(e,Xe()),null}function sc(e,t){var n=Ss;Ss|=1;try{return e(t)}finally{0===(Ss=n)&&(Vs=Xe()+500,Vi&&zi())}}function cc(e){null!==Ws&&0===Ws.tag&&0===(6&Ss)&&wc();var t=Ss;Ss|=1;var n=Is.transition,r=kt;try{if(Is.transition=null,kt=1,e)return e()}finally{kt=r,Is.transition=n,0===(6&(Ss=t))&&zi()}}function lc(){Ns=As.current,Si(As)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Es)for(n=Es.return;null!==n;){var r=n;switch(Na(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:eo(),Si(Ni),Si(Ci),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Si(ro);break;case 10:$i(r.type._context);break;case 22:case 23:lc()}n=n.return}if(Ts=e,Es=e=Dc(e.current,null),Cs=Ns=t,Rs=0,Ds=null,Ls=Os=Ps=0,Fs=Ms=null,null!==ea){for(t=0;t<ea.length;t++)if(null!==(r=(n=ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}ea=null}return e}function hc(e,t){for(;;){var n=Es;try{if(Yi(),uo.current=nu,po){for(var r=lo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}po=!1}if(co=0,ho=fo=lo=null,vo=!1,mo=0,xs.current=null,null===n||null===n.return){Rs=1,Ds=t,Es=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Cs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=vu(u);if(null!==p){p.flags&=-257,mu(p,u,s,0,t),1&p.mode&&pu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){pu(o,l,t),pc();break e}c=Error(a(426))}else if(Da&&1&s.mode){var y=vu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),mu(y,u,s,0,t),Ba(c);break e}}o=c,4!==Rs&&(Rs=2),null===Ms?Ms=[o]:Ms.push(o),c=ou(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ua(s,hu(0,c,t));break e;case 1:o=c;var g=s.type,k=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===qs||!qs.has(k)))){s.flags|=65536,t&=-t,s.lanes|=t,ua(s,du(s,o,t));break e}}s=s.return}while(null!==s)}kc(n)}catch(b){t=b,Es===n&&null!==n&&(Es=n=n.return);continue}break}}function dc(){var e=_s.current;return _s.current=nu,null===e?nu:e}function pc(){0!==Rs&&3!==Rs&&2!==Rs||(Rs=4),null===Ts||0===(268435455&Ps)&&0===(268435455&Os)||oc(Ts,Cs)}function vc(e,t){var n=Ss;Ss|=2;var r=dc();for(Ts===e&&Cs===t||(js=null,fc(e,t));;)try{mc();break}catch(i){hc(e,i)}if(Yi(),Ss=n,_s.current=r,null!==Es)throw Error(a(261));return Ts=null,Cs=0,Rs}function mc(){for(;null!==Es;)gc(Es)}function yc(){for(;null!==Es&&!Ye();)gc(Es)}function gc(e){var t=bs(e.alternate,e,Ns);e.memoizedProps=e.pendingProps,null===t?kc(e):Es=t,xs.current=null}function kc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=ku(n,t,Ns)))return void(Es=n)}else{if(null!==(n=Wu(n,t)))return n.flags&=32767,void(Es=n);if(null===e)return Rs=6,void(Es=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Es=t);Es=t=e}while(null!==t);0===Rs&&(Rs=5)}function bc(e,t,n){var r=kt,i=Is.transition;try{Is.transition=null,kt=1,function(e,t,n,r){do{wc()}while(null!==Ws);if(0!==(6&Ss))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ts&&(Es=Ts=null,Cs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ks||(Ks=!0,Cc(tt,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Is.transition,Is.transition=null;var u=kt;kt=1;var s=Ss;Ss|=4,xs.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Yu=t;null!==Yu;)if(e=(t=Yu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Yu=e;else for(;null!==Yu;){t=Yu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:Ki(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;if(1===b.nodeType)b.textContent="";else if(9===b.nodeType){var w=b.body;null!=w&&(w.textContent="")}break;default:throw Error(a(163))}}catch(_){xc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Yu=e;break}Yu=t.return}v=Ju,Ju=!1}(e,n),ds(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,vs(n,e,i),$e(),Ss=s,kt=u,Is.transition=o}else e.current=n;if(Ks&&(Ks=!1,Ws=e,Gs=i),0===(o=e.pendingLanes)&&(qs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(Bs)throw Bs=!1,e=zs,zs=null,e;0!==(1&Gs)&&0!==e.tag&&wc(),0!==(1&(o=e.pendingLanes))?e===Qs?Hs++:(Hs=0,Qs=e):Hs=0,zi()}(e,t,n,r)}finally{Is.transition=i,kt=r}return null}function wc(){if(null!==Ws){var e=bt(Gs),t=Is.transition,n=kt;try{if(Is.transition=null,kt=16>e?16:e,null===Ws)var r=!1;else{if(e=Ws,Ws=null,Gs=0,0!==(6&Ss))throw Error(a(331));var i=Ss;for(Ss|=4,Yu=e.current;null!==Yu;){var o=Yu,u=o.child;if(0!==(16&Yu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Yu=l;null!==Yu;){var f=Yu;switch(f.tag){case 0:case 11:case 15:Zu(8,f,o)}var h=f.child;if(null!==h)h.return=f,Yu=h;else for(;null!==Yu;){var d=(f=Yu).sibling,p=f.return;if(ns(f),f===l){Yu=null;break}if(null!==d){d.return=p,Yu=d;break}Yu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Yu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Yu=u;else e:for(;null!==Yu;){if(0!==(2048&(o=Yu).flags))switch(o.tag){case 0:case 11:case 15:Zu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Yu=g;break e}Yu=o.return}}var k=e.current;for(Yu=k;null!==Yu;){var b=(u=Yu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Yu=b;else e:for(u=k;null!==Yu;){if(0!==(2048&(s=Yu).flags))try{switch(s.tag){case 0:case 11:case 15:es(9,s)}}catch(_){xc(s,s.return,_)}if(s===u){Yu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Yu=w;break e}Yu=s.return}}if(Ss=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Is.transition=t}}return!1}function _c(e,t,n){aa(e,t=hu(0,t=ou(n,t),1)),t=Xs(),null!==(e=ec(e,1))&&(yt(e,1,t),nc(e,t))}function xc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===qs||!qs.has(r))){aa(t,e=du(t,e=ou(n,e),1)),e=Xs(),null!==(t=ec(t,1))&&(yt(t,1,e),nc(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Xs(),e.pingedLanes|=e.suspendedLanes&n,Ts===e&&(Cs&n)===n&&(4===Rs||3===Rs&&(130023424&Cs)===Cs&&500>Xe()-Us?fc(e,0):Ls|=n),nc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=Xs();null!==(e=ec(e,t))&&(yt(e,t,n),nc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Cc(e,t){return He(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Nc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Oc(n.children,i,o,t);case I:u=8,i|=8;break;case S:return(e=Ac(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Ac(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Ac(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Lc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case E:u=9;break e;case C:u=11;break e;case R:u=14;break e;case D:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ac(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Oc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={},e}function Mc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,u,s){return e=new Uc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ac(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},na(a),e}function jc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bc(e){if(!e)return Ei;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,u,s){return(e=Vc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=ia(r=Xs(),i=Js(n))).callback=void 0!==t&&null!==t?t:null,aa(n,a),e.current.lanes=i,yt(e,i,r),nc(e,r),e}function qc(e,t,n,r){var i=t.current,a=Xs(),o=Js(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ia(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),aa(i,t),null!==(e=Zs(i,o,a))&&oa(e,i,o),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}bs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Ru(t),ja();break;case 5:to(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:Za(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(Wi,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mu(e,t,n):(Ti(ro,1&ro.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ti(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Tu(e,t,n)}return Ku(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,Da&&0!==(1048576&t.flags)&&Ea(t,ba,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Ri(t,Ci.current);Ji(t,n),i=bo(null,t,r,e,i,n);var o=wo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,na(t),i.updater=ha,t.stateNode=i,i._reactInternals=t,ma(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,Da&&o&&Ca(t),_u(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=Ki(r,e),i){case 0:t=Cu(null,t,r,e,n);break e;case 1:t=Nu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=Iu(null,t,r,Ki(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 1:return r=t.type,i=t.pendingProps,Nu(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 3:e:{if(Ru(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ra(e,t),sa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Du(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Du(e,t,r,n,i=Error(a(424)));break e}for(Ra=ci(t.stateNode.containerInfo.firstChild),Aa=t,Da=!0,Pa=null,n=Ha(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ja(),r===i){t=Ku(e,t,n);break e}_u(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&Fa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Eu(e,t),_u(e,t,u,n),t.child;case 6:return null===e&&Fa(t),null;case 13:return Mu(e,t,n);case 4:return Za(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ga(t,null,r,n):_u(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 7:return _u(e,t,t.pendingProps,n),t.child;case 8:case 12:return _u(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(Wi,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ia(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Xi(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Xi(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}_u(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ji(t,n),r=r(i=Zi(i)),t.flags|=1,_u(e,t,r,n),t.child;case 14:return i=Ki(r=t.type,t.pendingProps),Iu(e,t,r,i=Ki(r.type,i),n);case 15:return Su(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ki(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Ji(t,n),pa(t,r,i),ma(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Tu(e,t,n)}throw Error(a(156,t.tag))};var Hc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}qc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),cc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=Vc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),cc((function(){qc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));qc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc((function(){qc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),nc(t,Xe()),0===(6&Ss)&&(Vs=Xe()+500,zi()))}break;case 13:var r=Xs();cc((function(){return Zs(e,1,r)})),Gc(e,1)}},_t=function(e){13===e.tag&&(Zs(e,134217728,Xs()),Gc(e,134217728))},xt=function(e){if(13===e.tag){var t=Xs(),n=Js(e);Zs(e,n,t),Gc(e,n)}},It=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));H(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=sc,Ne=cc;var el={usingClientEntryPoint:!1,Events:[ki,bi,wi,Te,Ee,sc]},tl={findFiberByHostInstance:gi,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{it=rl.inject(nl),at=rl}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=el,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return jc(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Hc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Hc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(cc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=sc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zc(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(E,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.1.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(R){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=S(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function m(){}function y(){}function g(){}var k={};s(k,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(N([])));w&&w!==n&&r.call(w,a)&&(k=w);var _=g.prototype=m.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return y.prototype=g,s(_,"constructor",g),s(g,"constructor",y),y.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},x(I.prototype),s(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(_),s(_,u,"Generator"),s(_,a,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,P(_);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,g(T),T=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,S=null,T=-1,E=5,C=-1;function N(){return!(t.unstable_now()-C<E)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?x():(I=!1,S=null)}}else I=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=A,x=function(){D.postMessage(null)}}else x=function(){y(A,0)};function P(e){S=e,I||(I=!0,x())}function O(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(T),T=-1):m=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,P(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ie},SDK_VERSION:function(){return _t},_DEFAULT_ENTRY_NAME:function(){return ct},_addComponent:function(){return dt},_addOrOverwriteComponent:function(){return pt},_apps:function(){return ft},_clearComponents:function(){return gt},_components:function(){return ht},_getProvider:function(){return mt},_registerComponent:function(){return vt},_removeServiceInstance:function(){return yt},deleteApp:function(){return Tt},getApp:function(){return It},getApps:function(){return St},initializeApp:function(){return xt},onLog:function(){return Nt},registerVersion:function(){return Ct},setLogLevel:function(){return At}});var t,r=n(791),i=n(164);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||u(e,t)||s()}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var f=function(e){return e};var h="beforeunload",d="popstate";function p(e){e.preventDefault(),e.returnValue=""}function v(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function m(){return Math.random().toString(36).substr(2,8)}function y(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function g(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var k=(0,r.createContext)(null);var b=(0,r.createContext)(null);var w=(0,r.createContext)({outlet:null,matches:[]});function _(e,t){if(!e)throw new Error(t)}function x(e,t,n){void 0===n&&(n="/");var r=R(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;var i=I(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=C(i[o],r);return a}function I(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||_(!1),a.relativePath=a.relativePath.slice(r.length));var o=D([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&_(!1),I(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:E(o,e.index),routesMeta:u})})),t}var S=/^:\w+$/,T=function(e){return"*"===e};function E(e,t){var n=e.split("/"),r=n.length;return n.some(T)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!T(e)})).reduce((function(e,t){return e+(S.test(t)?3:""===t?1:10)}),r)}function C(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=N({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:D([i,l.pathname]),pathnameBase:P(D([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=D([i,l.pathnameBase]))}return a}function N(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function A(e,t,n){var r,i="string"===typeof e?g(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?g(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:O(a),hash:L(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var D=function(e){return e.join("/").replace(/\/\/+/g,"/")},P=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},O=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},L=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function M(){return null!=(0,r.useContext)(b)}function F(){return M()||_(!1),(0,r.useContext)(b).location}function U(){M()||_(!1);var e=(0,r.useContext)(k),t=e.basename,n=e.navigator,i=(0,r.useContext)(w).matches,a=F().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,r.useRef)(!1);(0,r.useEffect)((function(){u.current=!0}));var s=(0,r.useCallback)((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=A(e,JSON.parse(o),a);"/"!==t&&(i.pathname=D([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(e)}),[t,n,o,a]);return s}function V(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,i,a){return(0,r.createElement)(w.Provider,{children:void 0!==i.route.element?i.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function j(e){_(!1)}function B(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;M()&&_(!1);var d=P(i),p=(0,r.useMemo)((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=g(u));var v=u,m=v.pathname,y=void 0===m?"/":m,w=v.search,x=void 0===w?"":w,I=v.hash,S=void 0===I?"":I,T=v.state,E=void 0===T?null:T,C=v.key,N=void 0===C?"default":C,A=(0,r.useMemo)((function(){var e=R(y,d);return null==e?null:{pathname:e,search:x,hash:S,state:E,key:N}}),[d,y,x,S,E,N]);return null==A?null:(0,r.createElement)(k.Provider,{value:p},(0,r.createElement)(b.Provider,{children:o,value:{location:A,navigationType:c}}))}function z(e){var t=e.children,n=e.location;return function(e,t){M()||_(!1);var n,i=(0,r.useContext)(w).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,F());if(t){var c,l="string"===typeof t?g(t):t;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||_(!1),n=l}else n=s;var f=n.pathname||"/",h=x(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return V(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:D([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:D([u,e.pathnameBase])})})),i)}(q(t),n)}function q(e){var t=[];return r.Children.forEach(e,(function(e){if((0,r.isValidElement)(e))if(e.type!==r.Fragment){e.type!==j&&_(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=q(e.props.children)),t.push(n)}else t.push.apply(t,q(e.props.children))})),t}function K(e){var n=e.basename,i=e.children,a=e.window,o=(0,r.useRef)();null==o.current&&(o.current=function(e){void 0===e&&(e={});var n=e.window,r=void 0===n?document.defaultView:n,i=r.history;function a(){var e=r.location,t=e.pathname,n=e.search,a=e.hash,o=i.state||{};return[o.idx,f({pathname:t,search:n,hash:a,state:o.usr||null,key:o.key||"default"})]}var o=null;r.addEventListener(d,(function(){if(o)w.call(o),o=null;else{var e=t.Pop,n=a(),r=n[0],i=n[1];if(w.length){if(null!=r){var u=c-r;u&&(o={action:e,location:i,retry:function(){E(-1*u)}},E(u))}}else T(e)}}));var u=t.Pop,s=a(),c=s[0],k=s[1],b=v(),w=v();function _(e){return"string"===typeof e?e:y(e)}function x(e,t){return void 0===t&&(t=null),f(l({pathname:k.pathname,hash:"",search:""},"string"===typeof e?g(e):e,{state:t,key:m()}))}function I(e,t){return[{usr:e.state,key:e.key,idx:t},_(e)]}function S(e,t,n){return!w.length||(w.call({action:e,location:t,retry:n}),!1)}function T(e){u=e;var t=a();c=t[0],k=t[1],b.call({action:u,location:k})}function E(e){i.go(e)}null==c&&(c=0,i.replaceState(l({},i.state,{idx:c}),""));var C={get action(){return u},get location(){return k},createHref:_,push:function e(n,a){var o=t.Push,u=x(n,a);if(S(o,u,(function(){e(n,a)}))){var s=I(u,c+1),l=s[0],f=s[1];try{i.pushState(l,"",f)}catch(h){r.location.assign(f)}T(o)}},replace:function e(n,r){var a=t.Replace,o=x(n,r);if(S(a,o,(function(){e(n,r)}))){var u=I(o,c),s=u[0],l=u[1];i.replaceState(s,"",l),T(a)}},go:E,back:function(){E(-1)},forward:function(){E(1)},listen:function(e){return b.push(e)},block:function(e){var t=w.push(e);return 1===w.length&&r.addEventListener(h,p),function(){t(),w.length||r.removeEventListener(h,p)}}};return C}({window:a}));var u=o.current,s=c((0,r.useState)({action:u.action,location:u.location}),2),k=s[0],b=s[1];return(0,r.useLayoutEffect)((function(){return u.listen(b)}),[u]),(0,r.createElement)(B,{basename:n,children:i,location:k.location,navigationType:k.action,navigator:u})}function W(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function G(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){W(a,r,i,o,u,"next",e)}function u(e){W(a,r,i,o,u,"throw",e)}o(void 0)}))}}var H=n(757),Q=n.n(H);function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Z(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e,t){return te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},te(e,t)}function ne(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}function ie(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function oe(e,t){if(t&&("object"===ae(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ee(e)}function ue(e){var t=ie();return function(){var n,r=re(e);if(t){var i=re(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return oe(this,n)}}function se(e,t,n){return se=ie()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&te(i,n.prototype),i},se.apply(null,arguments)}function ce(e){var t="function"===typeof Map?new Map:void 0;return ce=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return se(e,arguments,re(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),te(n,e)},ce(e)}var le=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(le(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},he=function(e){return function(e){var t=le(e);return fe.encodeByteArray(t,!0)}(e).replace(/\./g,"")},de=function(e){try{return fe.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function pe(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=pe(e[n],t[n]));return e}var ve=function(){function e(){var t=this;$(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return J(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function me(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(a)),""].join(".")}function ye(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ge(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ye())}function ke(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function be(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function we(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function _e(){var e=ye();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function xe(){return"object"===typeof indexedDB}var Ie=function(e){ne(n,e);var t=ue(n);function n(e,r,i){var a;return $(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(ee(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(ee(a),Se.prototype.create),a}return J(n)}(ce(Error)),Se=function(){function e(t,n,r){$(this,e),this.service=t,this.serviceName=n,this.errors=r}return J(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Te(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Ie(n,a,t);return o}}]),e}();function Te(e,t){return e.replace(Ee,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Ee=/\{\$([^}]+)}/g;function Ce(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ne(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Ae(u)&&Ae(s)){if(!Ne(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Ae(e){return null!==e&&"object"===typeof e}function Re(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function De(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Pe(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Oe(e,t){var n=new Le(e,t);return n.subscribe.bind(n)}var Le=function(){function e(t,n){var r=this;$(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return J(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Z(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Me),void 0===r.error&&(r.error=Me),void 0===r.complete&&(r.complete=Me);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Me(){}function Fe(e){return e&&e._delegate?e._delegate:e}function Ue(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var Ve=function(){function e(t){$(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return J(e,[{key:"transaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return new je(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new Be(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),je=function(){function e(t){var n=this;$(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return J(e,[{key:"objectStore",value:function(e){return new Be(this._transaction.objectStore(e))}}]),e}(),Be=function(){function e(t){$(this,e),this._store=t}return J(e,[{key:"index",value:function(e){return new ze(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new ze(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return Ue(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return Ue(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return Ue(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return Ue(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),ze=function(){function e(t){$(this,e),this._index=t}return J(e,[{key:"get",value:function(e){return Ue(this._index.get(e),"Error reading from IndexedDB")}}]),e}();function qe(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ke(e){return function(e){if(Array.isArray(e))return o(e)}(e)||qe(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var We=function(){function e(t,n,r){$(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return J(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ge="[DEFAULT]",He=function(){function e(t,n){$(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return J(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ve;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ge})}catch(s){}var t,n=Z(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=G(H.mark((function e(){var t;return H.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Ke(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Ke(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Z(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1],f=this.normalizeInstanceIdentifier(s);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Z(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(N_){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ge?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(N_){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge;return this.component?this.component.multipleInstances?e:Ge:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Qe,Ye,$e=function(){function e(t){$(this,e),this.name=t,this.providers=new Map}return J(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new He(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Xe=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ye||(Ye={}));var Je,Ze,et={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},tt=Ye.INFO,nt=(Y(Qe={},Ye.DEBUG,"log"),Y(Qe,Ye.VERBOSE,"log"),Y(Qe,Ye.INFO,"info"),Y(Qe,Ye.WARN,"warn"),Y(Qe,Ye.ERROR,"error"),Qe),rt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=nt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},it=function(){function e(t){$(this,e),this.name=t,this._logLevel=tt,this._logHandler=rt,this._userLogHandler=null,Xe.push(this)}return J(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ye))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?et[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ye.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ye.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ye.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ye.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ye.INFO].concat(t)),this._logHandler.apply(this,[this,Ye.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ye.WARN].concat(t)),this._logHandler.apply(this,[this,Ye.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ye.ERROR].concat(t)),this._logHandler.apply(this,[this,Ye.ERROR].concat(t))}}]),e}();var at=function(){function e(t){$(this,e),this.container=t}return J(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var ot="@firebase/app",ut="0.7.22",st=new it("@firebase/app"),ct="[DEFAULT]",lt=(Y(Je={},ot,"fire-core"),Y(Je,"@firebase/app-compat","fire-core-compat"),Y(Je,"@firebase/analytics","fire-analytics"),Y(Je,"@firebase/analytics-compat","fire-analytics-compat"),Y(Je,"@firebase/app-check","fire-app-check"),Y(Je,"@firebase/app-check-compat","fire-app-check-compat"),Y(Je,"@firebase/auth","fire-auth"),Y(Je,"@firebase/auth-compat","fire-auth-compat"),Y(Je,"@firebase/database","fire-rtdb"),Y(Je,"@firebase/database-compat","fire-rtdb-compat"),Y(Je,"@firebase/functions","fire-fn"),Y(Je,"@firebase/functions-compat","fire-fn-compat"),Y(Je,"@firebase/installations","fire-iid"),Y(Je,"@firebase/installations-compat","fire-iid-compat"),Y(Je,"@firebase/messaging","fire-fcm"),Y(Je,"@firebase/messaging-compat","fire-fcm-compat"),Y(Je,"@firebase/performance","fire-perf"),Y(Je,"@firebase/performance-compat","fire-perf-compat"),Y(Je,"@firebase/remote-config","fire-rc"),Y(Je,"@firebase/remote-config-compat","fire-rc-compat"),Y(Je,"@firebase/storage","fire-gcs"),Y(Je,"@firebase/storage-compat","fire-gcs-compat"),Y(Je,"@firebase/firestore","fire-fst"),Y(Je,"@firebase/firestore-compat","fire-fst-compat"),Y(Je,"fire-js","fire-js"),Y(Je,"firebase","fire-js-all"),Je),ft=new Map,ht=new Map;function dt(e,t){try{e.container.addComponent(t)}catch(n){st.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function pt(e,t){e.container.addOrOverwriteComponent(t)}function vt(e){var t=e.name;if(ht.has(t))return st.debug("There were multiple attempts to register component ".concat(t,".")),!1;ht.set(t,e);var n,r=Z(ft.values());try{for(r.s();!(n=r.n()).done;){dt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function mt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function yt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ct;mt(e,t).clearInstance(n)}function gt(){ht.clear()}var kt=(Y(Ze={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Y(Ze,"bad-app-name","Illegal App name: '{$appName}"),Y(Ze,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Y(Ze,"app-deleted","Firebase App named '{$appName}' already deleted"),Y(Ze,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Y(Ze,"invalid-log-argument","First argument to `onLog` must be null or a function."),Y(Ze,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),Y(Ze,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),Y(Ze,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),Y(Ze,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Ze),bt=new Se("app","Firebase",kt),wt=function(){function e(t,n,r){var i=this;$(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new We("app",(function(){return i}),"PUBLIC"))}return J(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw bt.create("app-deleted",{appName:this._name})}}]),e}(),_t="9.7.0";function xt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:ct,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw bt.create("bad-app-name",{appName:String(i)});var a=ft.get(i);if(a){if(Ne(e,a.options)&&Ne(r,a.config))return a;throw bt.create("duplicate-app",{appName:i})}var o,u=new $e(i),s=Z(ht.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new wt(e,r,u);return ft.set(i,l),l}function It(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=ft.get(e);if(!t)throw bt.create("no-app",{appName:e});return t}function St(){return Array.from(ft.values())}function Tt(e){return Et.apply(this,arguments)}function Et(){return(Et=G(H.mark((function e(t){var n;return H.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!ft.has(n)){e.next=6;break}return ft.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ct(e,t,n){var r,i=null!==(r=lt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void st.warn(u.join(" "))}vt(new We("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Nt(e,t){if(null!==e&&"function"!==typeof e)throw bt.create("invalid-log-argument");!function(e,t){var n,r=Z(Xe);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=et[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ye[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function At(e){var t;t=e,Xe.forEach((function(e){e.setLogLevel(t)}))}var Rt="firebase-heartbeat-store",Dt=null;function Pt(){var e,t,n;return Dt||(Dt=(e="firebase-heartbeat-database",t=1,n=function(e,t){0===t&&e.createObjectStore(Rt)},new Promise((function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new Ve(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new Ve(a.result),e.oldVersion,e.newVersion,new je(a.transaction))}}catch(o){i("Error opening indexedDB: ".concat(o.message))}}))).catch((function(e){throw bt.create("storage-open",{originalErrorMessage:e.message})}))),Dt}function Ot(e){return Lt.apply(this,arguments)}function Lt(){return Lt=G(H.mark((function e(t){var n;return H.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pt();case 3:return n=e.sent,e.abrupt("return",n.transaction(Rt).objectStore(Rt).get(Ut(t)));case 7:throw e.prev=7,e.t0=e.catch(0),bt.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Lt.apply(this,arguments)}function Mt(e,t){return Ft.apply(this,arguments)}function Ft(){return Ft=G(H.mark((function e(t,n){var r,i,a;return H.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pt();case 3:return r=e.sent,i=r.transaction(Rt,"readwrite"),a=i.objectStore(Rt),e.next=8,a.put(n,Ut(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),bt.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Ft.apply(this,arguments)}function Ut(e){return"".concat(e.name,"!").concat(e.options.appId)}var Vt=function(){function e(t){var n=this;$(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Kt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return J(e,[{key:"triggerHeartbeat",value:function(){var e=G(H.mark((function e(){var t,n,r;return H.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=jt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=G(H.mark((function e(){var t,n,r,i,a;return H.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=jt(),n=Bt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=he(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function jt(){return(new Date).toISOString().substring(0,10)}function Bt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Z(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Wt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Wt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var zt,qt,Kt=function(){function e(t){$(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return J(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=G(H.mark((function e(){return H.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xe()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=G(H.mark((function e(){var t;return H.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Ot(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=G(H.mark((function e(t){var n,r;return H.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Mt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=G(H.mark((function e(t){var n,r;return H.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Mt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Ke(r.heartbeats),Ke(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Wt(e){return he(JSON.stringify({version:2,heartbeats:e})).length}zt="",vt(new We("platform-logger",(function(e){return new at(e)}),"PRIVATE")),vt(new We("heartbeat",(function(e){return new Vt(e)}),"PRIVATE")),Ct(ot,ut,zt),Ct(ot,ut,"esm2017"),Ct("fire-js","");var Gt=function(){function e(t,n){var r=this;$(this,e),this._delegate=t,this.firebase=n,dt(t,new We("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return J(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Tt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ct;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){dt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){pt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Ht=(Y(qt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Y(qt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),qt),Qt=new Se("app-compat","Firebase",Ht);var Yt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=xt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ce(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Ct,setLogLevel:At,onLog:Nt,apps:null,SDK_VERSION:_t,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(vt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Qt.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&pe(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Ce(n,e=e||ct))throw Qt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Gt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){pe(n,e)},createSubscribe:Oe,ErrorFactory:Se,deepExtend:pe}),n}(),$t=new it("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){$t.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Xt=self.firebase.SDK_VERSION;Xt&&Xt.indexOf("LITE")>=0&&$t.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Jt=Yt;!function(e){Ct("@firebase/app-compat","0.1.23",e)}();function Zt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=re(e)););return e}function en(){return en="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Zt(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},en.apply(this,arguments)}Jt.registerVersion("firebase","9.7.0","app-compat");function tn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var nn;Object.create;var rn="facebook.com",an="github.com",on="google.com",un="password",sn="twitter.com",cn="EMAIL_SIGNIN",ln="PASSWORD_RESET",fn="RECOVER_EMAIL",hn="REVERT_SECOND_FACTOR_ADDITION",dn="VERIFY_AND_CHANGE_EMAIL",pn="VERIFY_EMAIL";function vn(){return Y({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var mn=function(){var e;return Y(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Y(e,"argument-error",""),Y(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Y(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Y(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Y(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Y(e,"cordova-not-ready","Cordova framework is not ready."),Y(e,"cors-unsupported","This browser is not supported."),Y(e,"credential-already-in-use","This credential is already associated with a different user account."),Y(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Y(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Y(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Y(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Y(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Y(e,"email-already-in-use","The email address is already in use by another account."),Y(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Y(e,"expired-action-code","The action code has expired."),Y(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Y(e,"internal-error","An internal AuthError has occurred."),Y(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Y(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Y(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Y(e,"invalid-auth-event","An internal AuthError has occurred."),Y(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Y(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Y(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Y(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Y(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Y(e,"invalid-email","The email address is badly formatted."),Y(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Y(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Y(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Y(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Y(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Y(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Y(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Y(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Y(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Y(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Y(e,"wrong-password","The password is invalid or the user does not have a password."),Y(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Y(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Y(e,"invalid-provider-id","The specified provider ID is invalid."),Y(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Y(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Y(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Y(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Y(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Y(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Y(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Y(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Y(e,"missing-continue-uri","A continue URL must be provided in the request."),Y(e,"missing-iframe-start","An internal AuthError has occurred."),Y(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Y(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Y(e,"missing-multi-factor-info","No second factor identifier is provided."),Y(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Y(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Y(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Y(e,"app-deleted","This instance of FirebaseApp has been deleted."),Y(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Y(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Y(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Y(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Y(e,"no-auth-event","An internal AuthError has occurred."),Y(e,"no-such-provider","User was not linked to an account with the given provider."),Y(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Y(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Y(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Y(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Y(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Y(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Y(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Y(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Y(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Y(e,"rejected-credential","The request contains malformed or mismatching credentials."),Y(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Y(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Y(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Y(e,"timeout","The operation has timed out."),Y(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Y(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Y(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Y(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Y(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Y(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Y(e,"unverified-email","The operation requires a verified email."),Y(e,"user-cancelled","The user did not grant your application the permissions it requested."),Y(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Y(e,"user-disabled","The user account has been disabled by an administrator."),Y(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Y(e,"user-signed-out",""),Y(e,"weak-password","The password must be 6 characters long or more."),Y(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Y(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},yn=vn,gn=new Se("auth","Firebase",vn()),kn=new it("@firebase/auth");function bn(e){if(kn.logLevel<=Ye.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];kn.error.apply(kn,["Auth (".concat(_t,"): ").concat(e)].concat(n))}}function wn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Sn.apply(void 0,[e].concat(n))}function _n(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Sn.apply(void 0,[e].concat(n))}function xn(e,t,n){var r=Object.assign(Object.assign({},yn()),Y({},t,n));return new Se("auth","Firebase",r).create(t,{appName:e.name})}function In(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&wn(e,"argument-error"),xn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Sn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Ke(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Ke(o)))}return gn.create.apply(gn,[e].concat(n))}function Tn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Sn.apply(void 0,[t].concat(r))}}function En(e){var t="INTERNAL ASSERTION FAILED: "+e;throw bn(t),new Error(t)}function Cn(e,t){e||En(t)}var Nn=new Map;function An(e){Cn(e instanceof Function,"Expected a class definition");var t=Nn.get(e);return t?(Cn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Nn.set(e,t),t)}function Rn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Dn(){return"http:"===Pn()||"https:"===Pn()}function Pn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var On=function(){function e(t,n){$(this,e),this.shortDelay=t,this.longDelay=n,Cn(n>t,"Short delay should be less than long delay!"),this.isMobile=ge()||we()}return J(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Dn()||be()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Ln(e,t){Cn(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Mn=function(){function e(){$(this,e)}return J(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void En("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void En("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void En("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Fn=(Y(nn={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Y(nn,"MISSING_CUSTOM_TOKEN","internal-error"),Y(nn,"INVALID_IDENTIFIER","invalid-email"),Y(nn,"MISSING_CONTINUE_URI","internal-error"),Y(nn,"INVALID_PASSWORD","wrong-password"),Y(nn,"MISSING_PASSWORD","internal-error"),Y(nn,"EMAIL_EXISTS","email-already-in-use"),Y(nn,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Y(nn,"INVALID_IDP_RESPONSE","invalid-credential"),Y(nn,"INVALID_PENDING_TOKEN","invalid-credential"),Y(nn,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Y(nn,"MISSING_REQ_TYPE","internal-error"),Y(nn,"EMAIL_NOT_FOUND","user-not-found"),Y(nn,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Y(nn,"EXPIRED_OOB_CODE","expired-action-code"),Y(nn,"INVALID_OOB_CODE","invalid-action-code"),Y(nn,"MISSING_OOB_CODE","internal-error"),Y(nn,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Y(nn,"INVALID_ID_TOKEN","invalid-user-token"),Y(nn,"TOKEN_EXPIRED","user-token-expired"),Y(nn,"USER_NOT_FOUND","user-token-expired"),Y(nn,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Y(nn,"INVALID_CODE","invalid-verification-code"),Y(nn,"INVALID_SESSION_INFO","invalid-verification-id"),Y(nn,"INVALID_TEMPORARY_PROOF","invalid-credential"),Y(nn,"MISSING_SESSION_INFO","missing-verification-id"),Y(nn,"SESSION_EXPIRED","code-expired"),Y(nn,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Y(nn,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Y(nn,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Y(nn,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Y(nn,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Y(nn,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Y(nn,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Y(nn,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Y(nn,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Y(nn,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Y(nn,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),nn),Un=new On(3e4,6e4);function Vn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function jn(e,t,n,r){return Bn.apply(this,arguments)}function Bn(){return Bn=G(Q().mark((function e(t,n,r,i){var a,o=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",zn(t,a,G(Q().mark((function e(){var a,o,u,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Re(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Mn.fetch()(Gn(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Bn.apply(this,arguments)}function zn(e,t,n){return qn.apply(this,arguments)}function qn(){return(qn=G(Q().mark((function e(t,n,r){var i,a,o,u,s,l,f,h,d,p;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Fn),n),e.prev=2,a=new Hn(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Qn(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,l=s.split(" : "),f=c(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Qn(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=25;break}throw Qn(t,"email-already-in-use",u);case 25:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=30;break}throw xn(t,p,d);case 30:wn(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof Ie)){e.next=37;break}throw e.t0;case 37:wn(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])})))).apply(this,arguments)}function Kn(e,t,n,r){return Wn.apply(this,arguments)}function Wn(){return Wn=G(Q().mark((function e(t,n,r,i){var a,o,u=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,jn(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&wn(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Wn.apply(this,arguments)}function Gn(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Ln(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Hn=function(){function e(t){var n=this;$(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(_n(n.auth,"network-request-failed"))}),Un.get())}))}return J(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Qn(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=_n(e,t,r);return i.customData._tokenResponse=n,i}function Yn(e,t){return $n.apply(this,arguments)}function $n(){return($n=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jn(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xn(e,t){return Jn.apply(this,arguments)}function Jn(){return(Jn=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zn(e,t){return er.apply(this,arguments)}function er(){return(er=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jn(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function nr(){return nr=G(Q().mark((function e(t){var n,r,i,a,o,u,s=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Fe(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Tn((a=ir(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:tr(rr(a.auth_time)),issuedAtTime:tr(rr(a.iat)),expirationTime:tr(rr(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),nr.apply(this,arguments)}function rr(e){return 1e3*Number(e)}function ir(e){var t=c(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return bn("JWT malformed, contained fewer than 3 sections"),null;try{var a=de(r);return a?JSON.parse(a):(bn("Failed to decode base64 JWT payload"),null)}catch(o){return bn("Caught error parsing JWT payload as JSON",o),null}}function ar(e,t){return or.apply(this,arguments)}function or(){return or=G(Q().mark((function e(t,n){var r=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Ie&&ur(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),or.apply(this,arguments)}function ur(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var sr=function(){function e(t){$(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return J(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(G(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),cr=function(){function e(t,n){$(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return J(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=tr(this.lastLoginAt),this.creationTime=tr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function lr(e){return fr.apply(this,arguments)}function fr(){return fr=G(Q().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,ar(t,Zn(r,{idToken:i}));case 6:Tn(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?pr(o.providerUserInfo):[],s=dr(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new cr(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),fr.apply(this,arguments)}function hr(){return(hr=G(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fe(t),e.next=3,lr(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dr(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Ke(n),Ke(t))}function pr(e){return e.map((function(e){var t=e.providerId,n=tn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function vr(e,t){return mr.apply(this,arguments)}function mr(){return(mr=G(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zn(t,{},G(Q().mark((function e(){var r,i,a,o,u,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Re({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Gn(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Mn.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yr=function(){function e(){$(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return J(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Tn(e.idToken,"internal-error"),Tn("undefined"!==typeof e.idToken,"internal-error"),Tn("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=ir(e);return Tn(t,"internal-error"),Tn("undefined"!==typeof t.exp,"internal-error"),Tn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=G(Q().mark((function e(t){var n,r=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Tn(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=G(Q().mark((function e(t,n){var r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vr(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return En("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Tn("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Tn("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Tn("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function gr(e,t){Tn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var kr=function(){function e(t){$(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=tn(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Ke(a.providerData):[],this.metadata=new cr(a.createdAt||void 0,a.lastLoginAt||void 0)}return J(e,[{key:"getIdToken",value:function(){var e=G(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ar(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Tn(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return nr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return hr.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Tn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Tn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=G(Q().mark((function e(t){var n,r,i=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,lr(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=G(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,ar(this,Yn(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;Tn(k&&x,t,"internal-error");var I=yr.fromJSON(this.name,x);Tn("string"===typeof k,t,"internal-error"),gr(f,t.name),gr(h,t.name),Tn("boolean"===typeof b,t,"internal-error"),Tn("boolean"===typeof w,t,"internal-error"),gr(d,t.name),gr(p,t.name),gr(v,t.name),gr(m,t.name),gr(y,t.name),gr(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(S.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:function(){var t=G(Q().mark((function t(n,r){var i,a,o,u=arguments;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new yr).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,lr(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),br=function(){function e(){$(this,e),this.type="NONE",this.storage={}}return J(e,[{key:"_isAvailable",value:function(){var e=G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=G(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();br.type="NONE";var wr=br;function _r(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var xr=function(){function e(t,n,r){$(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=_r(this.userKey,a.apiKey,o),this.fullPersistenceKey=_r("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return J(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=G(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?kr._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=G(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=G(Q().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(An(wr),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||An(wr),u=_r(i,n.config.apiKey,n.name),s=null,c=Z(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=kr._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Ir(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Cr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Sr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ar(t))return"Blackberry";if(Rr(t))return"Webos";if(Tr(t))return"Safari";if((t.includes("chrome/")||Er(t))&&!t.includes("edge/"))return"Chrome";if(Nr(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Sr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return/firefox\//i.test(e)}function Tr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Er(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return/crios\//i.test(e)}function Cr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return/iemobile/i.test(e)}function Nr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return/android/i.test(e)}function Ar(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return/blackberry/i.test(e)}function Rr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return/webos/i.test(e)}function Dr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return/iphone|ipad|ipod/i.test(e)}function Pr(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return Dr(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Or(){return _e()&&10===document.documentMode}function Lr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return Dr(e)||Nr(e)||Rr(e)||Ar(e)||/windows phone/i.test(e)||Cr(e)}function Mr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ir(ye());break;case"Worker":t="".concat(Ir(ye()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(_t,"/").concat(r)}var Fr=function(){function e(t,n,r){$(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vr(this),this.idTokenSubscription=new Vr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return J(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=An(t)),this._initializationPromise=this.queue(G(Q().mark((function r(){var i,a;return Q().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,xr.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=G(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=G(Q().mark((function e(t){var n,r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return Tn(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=G(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lr(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=G(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Fe(t):null)&&Tn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=G(Q().mark((function e(t){var n=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&Tn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(G(Q().mark((function n(){return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(An(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Se("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=G(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=G(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Tn(n=t&&An(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,xr.create(this,[An(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=G(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=G(Q().mark((function e(t){var n=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Tn(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Tn(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=G(Q().mark((function e(){var t,n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Y({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ur(e){return Fe(e)}var Vr=function(){function e(t){var n=this;$(this,e),this.auth=t,this.observer=null,this.addObserver=Oe((function(e){return n.observer=e}))}return J(e,[{key:"next",get:function(){return Tn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function jr(e,t,n){var r=Ur(e);Tn(r._canInitEmulator,r,"emulator-config-failed"),Tn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Br(t),o=function(e){var t=Br(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:zr(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:zr(o[1])}}(t),u=o.host,s=o.port,l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Br(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function zr(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var qr=function(){function e(t,n){$(this,e),this.providerId=t,this.signInMethod=n}return J(e,[{key:"toJSON",value:function(){return En("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return En("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return En("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return En("not implemented")}}]),e}();function Kr(e,t){return Wr.apply(this,arguments)}function Wr(){return(Wr=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jn(t,"POST","/v1/accounts:resetPassword",Vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gr(e,t){return Hr.apply(this,arguments)}function Hr(){return(Hr=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qr(e,t){return Yr.apply(this,arguments)}function Yr(){return(Yr=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jn(t,"POST","/v1/accounts:update",Vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $r(e,t){return Xr.apply(this,arguments)}function Xr(){return(Xr=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kn(t,"POST","/v1/accounts:signInWithPassword",Vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jr(e,t){return Zr.apply(this,arguments)}function Zr(){return(Zr=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jn(t,"POST","/v1/accounts:sendOobCode",Vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ei(e,t){return ti.apply(this,arguments)}function ti(){return(ti=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ni(e,t){return ri.apply(this,arguments)}function ri(){return(ri=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ii(e,t){return ai.apply(this,arguments)}function ai(){return(ai=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oi(e,t){return ui.apply(this,arguments)}function ui(){return(ui=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jr(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function si(e,t){return ci.apply(this,arguments)}function ci(){return(ci=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kn(t,"POST","/v1/accounts:signInWithEmailLink",Vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function li(e,t){return fi.apply(this,arguments)}function fi(){return(fi=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kn(t,"POST","/v1/accounts:signInWithEmailLink",Vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hi=function(e){ne(n,e);var t=ue(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return $(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return J(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",$r(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",si(t,{email:this._email,oobCode:this._password}));case 5:wn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Gr(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",li(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:wn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(qr);function di(e,t){return pi.apply(this,arguments)}function pi(){return(pi=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kn(t,"POST","/v1/accounts:signInWithIdp",Vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vi=function(e){ne(n,e);var t=ue(n);function n(){var e;return $(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return J(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return di(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,di(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,di(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Re(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):wn("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=tn(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(qr);function mi(e,t){return yi.apply(this,arguments)}function yi(){return(yi=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jn(t,"POST","/v1/accounts:sendVerificationCode",Vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gi(){return(gi=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kn(t,"POST","/v1/accounts:signInWithPhoneNumber",Vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ki(){return(ki=G(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kn(t,"POST","/v1/accounts:signInWithPhoneNumber",Vn(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Qn(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bi=Y({},"USER_NOT_FOUND","user-not-found");function wi(){return(wi=G(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Kn(t,"POST","/v1/accounts:signInWithPhoneNumber",Vn(t,r),bi));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _i=function(e){ne(n,e);var t=ue(n);function n(e){var r;return $(this,n),(r=t.call(this,"phone","phone")).params=e,r}return J(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return gi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return ki.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return wi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(qr);var xi=function(){function e(t){var n,r,i,a,o,u;$(this,e);var s=De(Pe(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Tn(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return J(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=De(Pe(e)).link,n=t?De(Pe(t)).deep_link_id:null,r=De(Pe(e)).deep_link_id;return(r?De(Pe(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(N_){return null}}}]),e}();var Ii=function(){function e(){$(this,e),this.providerId=e.PROVIDER_ID}return J(e,null,[{key:"credential",value:function(e,t){return hi._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=xi.parseLink(t);return Tn(n,"argument-error"),hi._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ii.PROVIDER_ID="password",Ii.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ii.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Si=function(){function e(t){$(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return J(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Ti=function(e){ne(n,e);var t=ue(n);function n(){var e;return $(this,n),(e=t.apply(this,arguments)).scopes=[],e}return J(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Ke(this.scopes)}}]),n}(Si),Ei=function(e){ne(n,e);var t=ue(n);function n(){return $(this,n),t.apply(this,arguments)}return J(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Tn(e.idToken||e.accessToken,"argument-error"),vi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Tn("providerId"in t&&"signInMethod"in t,"argument-error"),vi._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Ti),Ci=function(e){ne(n,e);var t=ue(n);function n(){return $(this,n),t.call(this,"facebook.com")}return J(n,null,[{key:"credential",value:function(e){return vi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(N_){return null}}}]),n}(Ti);Ci.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ci.PROVIDER_ID="facebook.com";var Ni=function(e){ne(n,e);var t=ue(n);function n(){var e;return $(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return J(n,null,[{key:"credential",value:function(e,t){return vi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(N_){return null}}}]),n}(Ti);Ni.GOOGLE_SIGN_IN_METHOD="google.com",Ni.PROVIDER_ID="google.com";var Ai=function(e){ne(n,e);var t=ue(n);function n(){return $(this,n),t.call(this,"github.com")}return J(n,null,[{key:"credential",value:function(e){return vi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(N_){return null}}}]),n}(Ti);Ai.GITHUB_SIGN_IN_METHOD="github.com",Ai.PROVIDER_ID="github.com";var Ri=function(e){ne(n,e);var t=ue(n);function n(e,r){var i;return $(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return J(n,[{key:"_getIdTokenResponse",value:function(e){return di(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,di(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,di(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(qr),Di=function(e){ne(n,e);var t=ue(n);function n(e){return $(this,n),Tn(e.startsWith("saml."),"argument-error"),t.call(this,e)}return J(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Ri.fromJSON(e);return Tn(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Ri._create(r,n)}catch(i){return null}}}]),n}(Si),Pi=function(e){ne(n,e);var t=ue(n);function n(){return $(this,n),t.call(this,"twitter.com")}return J(n,null,[{key:"credential",value:function(e,t){return vi._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(N_){return null}}}]),n}(Ti);function Oi(e,t){return Li.apply(this,arguments)}function Li(){return(Li=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kn(t,"POST","/v1/accounts:signUp",Vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Pi.TWITTER_SIGN_IN_METHOD="twitter.com",Pi.PROVIDER_ID="twitter.com";var Mi=function(){function e(t){$(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return J(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=G(Q().mark((function t(n,r,i){var a,o,u,s,c=arguments;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,kr._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Fi(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=G(Q().mark((function t(n,r,i){var a;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Fi(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Fi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Ui(){return Ui=G(Q().mark((function e(t){var n,r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ur(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Mi({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Oi(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Mi._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Ui.apply(this,arguments)}var Vi=function(e){ne(n,e);var t=ue(n);function n(e,r,i,a){var o,u;return $(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(ee(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return J(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Ie);function ji(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Vi._fromErrorAndOperation(e,n,t,r);throw n}))}function Bi(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function zi(e,t){return qi.apply(this,arguments)}function qi(){return qi=G(Q().mark((function e(t,n){var r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fe(t),e.next=3,Gi(!0,r,n);case 3:return e.t0=Xn,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Bi(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),qi.apply(this,arguments)}function Ki(e,t){return Wi.apply(this,arguments)}function Wi(){return Wi=G(Q().mark((function e(t,n){var r,i,a=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=ar,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Mi._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Wi.apply(this,arguments)}function Gi(e,t,n){return Hi.apply(this,arguments)}function Hi(){return(Hi=G(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lr(n);case 2:i=Bi(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Tn(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qi(e,t){return Yi.apply(this,arguments)}function Yi(){return Yi=G(Q().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,ar(t,ji(i,a,n,t),r);case 6:return Tn((o=e.sent).idToken,i,"internal-error"),Tn(u=ir(o.idToken),i,"internal-error"),s=u.sub,Tn(t.uid===s,i,"user-mismatch"),e.abrupt("return",Mi._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&wn(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Yi.apply(this,arguments)}function $i(e,t){return Xi.apply(this,arguments)}function Xi(){return Xi=G(Q().mark((function e(t,n){var r,i,a,o,u=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,ji(t,i,n);case 4:return a=e.sent,e.next=7,Mi._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Xi.apply(this,arguments)}function Ji(e,t){return Zi.apply(this,arguments)}function Zi(){return(Zi=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$i(Ur(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ea(e,t){return ta.apply(this,arguments)}function ta(){return(ta=G(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fe(t),e.next=3,Gi(!1,r,n.providerId);case 3:return e.abrupt("return",Ki(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function na(e,t){return ra.apply(this,arguments)}function ra(){return(ra=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qi(Fe(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ia(e,t){return aa.apply(this,arguments)}function aa(){return(aa=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kn(t,"POST","/v1/accounts:signInWithCustomToken",Vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oa(){return(oa=G(Q().mark((function e(t,n){var r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ur(t),e.next=3,ia(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Mi._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ua=function(){function e(t,n){$(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return J(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?sa._fromServerResponse(e,t):wn(e,"internal-error")}}]),e}(),sa=function(e){ne(n,e);var t=ue(n);function n(e){var r;return $(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return J(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ua);function ca(e,t,n){var r;Tn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Tn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Tn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Tn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function la(){return(la=G(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fe(t),a={requestType:"PASSWORD_RESET",email:n},r&&ca(i,a,r),e.next=5,ni(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fa(){return(fa=G(Q().mark((function e(t,n,r){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kr(Fe(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ha(){return(ha=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qr(Fe(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function da(e,t){return pa.apply(this,arguments)}function pa(){return(pa=G(Q().mark((function e(t,n){var r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fe(t),e.next=3,Kr(r,{oobCode:n});case 3:i=e.sent,Tn(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Tn(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Tn(i.mfaInfo,r,"internal-error");case 13:Tn(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=ua._fromServerResponse(Ur(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function va(){return(va=G(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,da(Fe(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ma(e,t,n){return ya.apply(this,arguments)}function ya(){return(ya=G(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ur(t),e.next=3,Oi(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Mi._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ga(){return(ga=G(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fe(t),a={requestType:"EMAIL_SIGNIN",email:n},Tn(r.handleCodeInApp,i,"argument-error"),r&&ca(i,a,r),e.next=6,ii(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ka(){return(ka=G(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fe(t),Tn((a=Ii.credentialWithLink(n,r||Rn()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Ji(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ba(e,t){return wa.apply(this,arguments)}function wa(){return(wa=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jn(t,"POST","/v1/accounts:createAuthUri",Vn(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _a(){return(_a=G(Q().mark((function e(t,n){var r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Dn()?Rn():"http://localhost",i={identifier:n,continueUri:r},e.next=4,ba(Fe(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xa(){return(xa=G(Q().mark((function e(t,n){var r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fe(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&ca(r.auth,a,n),e.next=8,ei(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ia(){return(Ia=G(Q().mark((function e(t,n,r){var i,a,o,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fe(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&ca(i.auth,o,r),e.next=8,oi(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sa(e,t){return Ta.apply(this,arguments)}function Ta(){return(Ta=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ea(e,t){return Ca.apply(this,arguments)}function Ca(){return(Ca=G(Q().mark((function e(t,n){var r,i,a,o,u,s,c;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Fe(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,ar(a,Sa(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Na(e,t,n){return Aa.apply(this,arguments)}function Aa(){return(Aa=G(Q().mark((function e(t,n,r){var i,a,o,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,ar(t,Gr(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ra=J((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Da=function(e){ne(n,e);var t=ue(n);function n(e,r,i,a){var o;return $(this,n),(o=t.call(this,e,r,i)).username=a,o}return J(n)}(Ra),Pa=function(e){ne(n,e);var t=ue(n);function n(e,r){return $(this,n),t.call(this,e,"facebook.com",r)}return J(n)}(Ra),Oa=function(e){ne(n,e);var t=ue(n);function n(e,r){return $(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return J(n)}(Da),La=function(e){ne(n,e);var t=ue(n);function n(e,r){return $(this,n),t.call(this,e,"google.com",r)}return J(n)}(Ra),Ma=function(e){ne(n,e);var t=ue(n);function n(e,r,i){return $(this,n),t.call(this,e,"twitter.com",r,i)}return J(n)}(Da);function Fa(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=ir(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Ra(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Pa(a,i);case"github.com":return new Oa(a,i);case"google.com":return new La(a,i);case"twitter.com":return new Ma(a,i,e.screenName||null);case"custom":case"anonymous":return new Ra(a,null);default:return new Ra(a,r,i)}}(n)}var Ua=function(){function e(t,n){$(this,e),this.type=t,this.credential=n}return J(e,[{key:"toJSON",value:function(){return{multiFactorSession:Y({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Va=function(){function e(t,n,r){$(this,e),this.session=t,this.hints=n,this.signInResolver=r}return J(e,[{key:"resolveSignIn",value:function(){var e=G(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Ur(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return ua._fromServerResponse(r,e)}));Tn(i.mfaPendingCredential,r,"internal-error");var o=Ua._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=G(Q().mark((function e(t){var a,u,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Mi._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Tn(n.user,r,"internal-error"),e.abrupt("return",Mi._forOperation(n.user,n.operationType,u));case 17:wn(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function ja(e,t){return jn(e,"POST","/v2/accounts/mfaEnrollment:start",Vn(e,t))}var Ba=function(){function e(t){var n=this;$(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return ua._fromServerResponse(t.auth,e)})))}))}return J(e,[{key:"getSession",value:function(){var e=G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ua,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=G(Q().mark((function e(t,n){var r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,ar(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=G(Q().mark((function e(t){var n,r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,ar(this.user,jn(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Vn(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),za=new WeakMap;var qa="__sak",Ka=function(){function e(t,n){$(this,e),this.storageRetriever=t,this.type=n}return J(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(qa,"1"),this.storage.removeItem(qa),Promise.resolve(!0)):Promise.resolve(!1)}catch(N_){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Wa=function(e){ne(n,e);var t=ue(n);function n(){var e;return $(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=ye();return Tr(e)||Dr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Lr(),e._shouldAllowMigration=!0,e}return J(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Or()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=G(Q().mark((function e(t,r){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,en(re(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=G(Q().mark((function e(t){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,en(re(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,en(re(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ka);Wa.type="LOCAL";var Ga=Wa,Ha=function(e){ne(n,e);var t=ue(n);function n(){return $(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return J(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Ka);Ha.type="SESSION";var Qa=Ha;function Ya(e){return Promise.all(e.map(function(){var e=G(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var $a=function(){function e(t){$(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return J(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=G(Q().mark((function e(t){var n,r,i,a,o,u,s,c;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ya(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Xa(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}$a.receivers=[];var Ja=function(){function e(t){$(this,e),this.target=t,this.handlers=new Set}return J(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=G(Q().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Xa("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Za(){return window}function eo(){return"undefined"!==typeof Za().WorkerGlobalScope&&"function"===typeof Za().importScripts}function to(){return no.apply(this,arguments)}function no(){return(no=G(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function ro(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var io="firebaseLocalStorageDb",ao="firebaseLocalStorage",oo="fbase_key",uo=function(){function e(t){$(this,e),this.request=t}return J(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function so(e,t){return e.transaction([ao],t?"readwrite":"readonly").objectStore(ao)}function co(){var e=indexedDB.deleteDatabase(io);return new uo(e).toPromise()}function lo(){var e=indexedDB.open(io,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(ao,{keyPath:oo})}catch(r){n(r)}})),e.addEventListener("success",G(Q().mark((function n(){var r;return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(ao)){n.next=12;break}return r.close(),n.next=5,co();case 5:return n.t0=t,n.next=8,lo();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function fo(e,t,n){return ho.apply(this,arguments)}function ho(){return ho=G(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=so(t,!0).put((Y(i={},oo,n),Y(i,"value",r),i)),e.abrupt("return",new uo(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),ho.apply(this,arguments)}function po(e,t){return vo.apply(this,arguments)}function vo(){return vo=G(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(t,!1).get(n),e.next=3,new uo(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),vo.apply(this,arguments)}function mo(e,t){var n=so(e,!0).delete(t);return new uo(n).toPromise()}var yo=function(){function e(){$(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return J(e,[{key:"_openDb",value:function(){var e=G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,lo();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=G(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",eo()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=G(Q().mark((function e(){var t=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=$a._getInstance(eo()?self:null),this.receiver._subscribe("keyChanged",function(){var e=G(Q().mark((function e(n,r){var i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=G(Q().mark((function e(){var t,n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,to();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Ja(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&ro()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=G(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,lo();case 5:return t=e.sent,e.next=8,fo(t,qa,"1");case 8:return e.next=10,mo(t,qa);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=G(Q().mark((function e(t,n){var r=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return fo(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=G(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return po(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=G(Q().mark((function e(t){var n=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return mo(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=G(Q().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=so(e,!1).getAll();return new uo(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Z(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(G(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();yo.type="LOCAL";var go=yo;function ko(e,t){return jn(e,"POST","/v2/accounts/mfaSignIn:start",Vn(e,t))}function bo(e){return wo.apply(this,arguments)}function wo(){return(wo=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jn(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _o(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=_n("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function xo(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Io=1e12,So=function(){function e(t){$(this,e),this.auth=t,this.counter=Io,this._widgets=new Map}return J(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new To(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Io;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Io;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=G(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Io,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),To=function(){function e(t,n,r){var i=this;$(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Tn(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return J(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Eo=xo("rcb"),Co=new On(3e4,6e4),No="https://www.google.com/recaptcha/api.js?",Ao=function(){function e(){$(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Za().grecaptcha}return J(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Tn(Ro(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Za().grecaptcha):new Promise((function(r,i){var a=Za().setTimeout((function(){i(_n(e,"network-request-failed"))}),Co.get());Za()[Eo]=function(){Za().clearTimeout(a),delete Za()[Eo];var o=Za().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(_n(e,"internal-error"))},_o("".concat(No,"?").concat(Re({onload:Eo,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(_n(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Za().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Ro(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Do=function(){function e(){$(this,e)}return J(e,[{key:"load",value:function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new So(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Po="recaptcha",Oo={theme:"light",type:"image"},Lo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Oo),r=arguments.length>2?arguments[2]:void 0;$(this,e),this.parameters=n,this.type=Po,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ur(r),this.isInvisible="invisible"===this.parameters.size,Tn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Tn(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Do:new Ao,this.validateStartingState()}return J(e,[{key:"verify",value:function(){var e=G(Q().mark((function e(){var t,n,r,i=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Tn(!this.parameters.sitekey,this.auth,"argument-error"),Tn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Tn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Za()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Tn(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=G(Q().mark((function e(){var t,n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=G(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tn(Dn()&&!eo(),this.auth,"internal-error"),e.next=3,Mo();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,bo(this.auth);case 8:Tn(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Tn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Mo(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Fo=function(){function e(t,n){$(this,e),this.verificationId=t,this.onConfirmation=n}return J(e,[{key:"confirm",value:function(e){var t=_i._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Uo(){return(Uo=G(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ur(t),e.next=3,zo(i,n,Fe(r));case 3:return a=e.sent,e.abrupt("return",new Fo(a,(function(e){return Ji(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vo(e,t,n){return jo.apply(this,arguments)}function jo(){return(jo=G(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fe(t),e.next=3,Gi(!1,i,"phone");case 3:return e.next=5,zo(i.auth,n,Fe(r));case 5:return a=e.sent,e.abrupt("return",new Fo(a,(function(e){return ea(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bo(){return(Bo=G(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fe(t),e.next=3,zo(i.auth,n,Fe(r));case 3:return a=e.sent,e.abrupt("return",new Fo(a,(function(e){return na(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zo(e,t,n){return qo.apply(this,arguments)}function qo(){return qo=G(Q().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Tn("string"===typeof a,t,"argument-error"),Tn(r.type===Po,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Tn("enroll"===u.type,t,"internal-error"),e.next=13,ja(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Tn("signin"===u.type,t,"internal-error"),Tn(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,ko(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,mi(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),qo.apply(this,arguments)}function Ko(){return(Ko=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ki(Fe(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wo=function(){function e(t){$(this,e),this.providerId=e.PROVIDER_ID,this.auth=Ur(t)}return J(e,[{key:"verifyPhoneNumber",value:function(e,t){return zo(this.auth,e,Fe(t))}}],[{key:"credential",value:function(e,t){return _i._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?_i._fromTokenResponse(n,r):null}}]),e}();function Go(e,t){return t?An(t):(Tn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Wo.PROVIDER_ID="phone",Wo.PHONE_SIGN_IN_METHOD="phone";var Ho=function(e){ne(n,e);var t=ue(n);function n(e){var r;return $(this,n),(r=t.call(this,"custom","custom")).params=e,r}return J(n,[{key:"_getIdTokenResponse",value:function(e){return di(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return di(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return di(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(qr);function Qo(e){return $i(e.auth,new Ho(e),e.bypassAuthState)}function Yo(e){var t=e.auth,n=e.user;return Tn(n,t,"internal-error"),Qi(n,new Ho(e),e.bypassAuthState)}function $o(e){return Xo.apply(this,arguments)}function Xo(){return(Xo=G(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Tn(r=t.user,n,"internal-error"),e.abrupt("return",Ki(r,new Ho(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Jo=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];$(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return J(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=G(Q().mark((function t(n,r){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=G(Q().mark((function e(t){var n,r,i,a,o,u,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Qo;case"linkViaPopup":case"linkViaRedirect":return $o;case"reauthViaPopup":case"reauthViaRedirect":return Yo;default:wn(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Zo=new On(2e3,1e4);function eu(e,t,n){return tu.apply(this,arguments)}function tu(){return(tu=G(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ur(t),In(t,n,Si),a=Go(i,r),o=new au(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nu(){return(nu=G(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return In((i=Fe(t)).auth,n,Si),a=Go(i.auth,r),o=new au(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ru(e,t,n){return iu.apply(this,arguments)}function iu(){return(iu=G(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return In((i=Fe(t)).auth,n,Si),a=Go(i.auth,r),o=new au(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var au=function(e){ne(n,e);var t=ue(n);function n(e,r,i,a,o){var u;return $(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=ee(u),u}return J(n,[{key:"executeNotNull",value:function(){var e=G(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Tn(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=G(Q().mark((function e(){var t,n=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cn(1===this.filter.length,"Popup operations only handle one event"),t=Xa(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(_n(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(_n(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(_n(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Zo.get())}()}}]),n}(Jo);au.currentPopupAction=null;var ou=new Map,uu=function(e){ne(n,e);var t=ue(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return $(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return J(n,[{key:"execute",value:function(){var e=G(Q().mark((function e(){var t,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ou.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,su(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,en(re(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:ou.set(this.auth._key(),t);case 21:return this.bypassAuthState||ou.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=G(Q().mark((function e(t){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",en(re(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",en(re(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Jo);function su(e,t){return cu.apply(this,arguments)}function cu(){return(cu=G(Q().mark((function e(t,n){var r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=du(n),i=hu(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lu(e,t){return fu.apply(this,arguments)}function fu(){return(fu=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hu(t)._set(du(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hu(e){return An(e._redirectPersistence)}function du(e){return _r("pendingRedirect",e.config.apiKey,e.name)}function pu(e,t,n){return function(e,t,n){return vu.apply(this,arguments)}(e,t,n)}function vu(){return(vu=G(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ur(t),In(t,n,Si),a=Go(i,r),e.next=5,lu(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mu(e,t,n){return function(e,t,n){return yu.apply(this,arguments)}(e,t,n)}function yu(){return(yu=G(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return In((i=Fe(t)).auth,n,Si),a=Go(i.auth,r),e.next=5,lu(a,i.auth);case 5:return e.next=7,Iu(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gu(e,t,n){return function(e,t,n){return ku.apply(this,arguments)}(e,t,n)}function ku(){return(ku=G(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return In((i=Fe(t)).auth,n,Si),a=Go(i.auth,r),e.next=5,Gi(!1,i,n.providerId);case 5:return e.next=7,lu(a,i.auth);case 7:return e.next=9,Iu(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bu(e,t){return wu.apply(this,arguments)}function wu(){return(wu=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ur(t)._initializationPromise;case 2:return e.abrupt("return",_u(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _u(e,t){return xu.apply(this,arguments)}function xu(){return xu=G(Q().mark((function e(t,n){var r,i,a,o,u,s=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Ur(t),a=Go(i,n),o=new uu(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),xu.apply(this,arguments)}function Iu(e){return Su.apply(this,arguments)}function Su(){return(Su=G(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Xa("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Tu=function(){function e(t){$(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return J(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cu(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Cu(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(_n(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Eu(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Eu(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Eu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Cu(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Nu(e){return Au.apply(this,arguments)}function Au(){return Au=G(Q().mark((function e(t){var n,r=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",jn(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Au.apply(this,arguments)}var Ru=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Du=/^https?/;function Pu(){return(Pu=G(Q().mark((function e(t){var n,r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Nu(t);case 4:n=e.sent,r=n.authorizedDomains,i=Z(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Ou(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:wn(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function Ou(e){var t=Rn(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Du.test(r))return!1;if(Ru.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Lu=new On(3e4,6e4);function Mu(){var e=Za().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Ke(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Fu=null;function Uu(e){return Fu=Fu||function(e){return new Promise((function(t,n){var r,i,a;function o(){Mu(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Mu(),n(_n(e,"network-request-failed"))},timeout:Lu.get()})}if(null===(i=null===(r=Za().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Za().gapi)||void 0===a?void 0:a.load)){var u=xo("iframefcb");return Za()[u]=function(){gapi.load?o():n(_n(e,"network-request-failed"))},_o("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Fu=null,e}))}(e),Fu}var Vu=new On(5e3,15e3),ju={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zu(e){var t=e.config;Tn(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Ln(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:_t},i=Bu.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Re(r).slice(1))}function qu(e){return Ku.apply(this,arguments)}function Ku(){return Ku=G(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uu(t);case 2:return n=e.sent,Tn(r=Za().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:zu(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ju,dontclear:!0},(function(e){return new Promise(function(){var n=G(Q().mark((function n(r,i){var a,o,u;return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Za().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=_n(t,"network-request-failed"),o=Za().setTimeout((function(){i(a)}),Vu.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Ku.apply(this,arguments)}var Wu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Gu="_blank",Hu="http://localhost",Qu=function(){function e(t){$(this,e),this.window=t,this.associatedEvent=null}return J(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Yu(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Wu),{width:r.toString(),height:i.toString(),top:a,left:o}),l=ye().toLowerCase();n&&(u=Er(l)?Gu:n),Sr(l)&&(t=t||Hu,s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Pr(l)&&"_self"!==u)return $u(t||"",u),new Qu(null);var h=window.open(t||"",u,f);Tn(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Qu(h)}function $u(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Xu="__/auth/handler",Ju="emulator/auth/handler";function Zu(e,t,n,r,i,a){Tn(e.config.authDomain,e,"auth-domain-config-required"),Tn(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:_t,eventId:i};if(t instanceof Si){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var l=c(s[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof Ti){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Xu);return Ln(t,Ju)}(e),"?").concat(Re(p).slice(1))}var es="webStorageSupport",ts=function(){function e(){$(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qa,this._completeRedirectFn=_u}return J(e,[{key:"_openPopup",value:function(){var e=G(Q().mark((function e(t,n,r,i){var a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cn(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Zu(t,n,r,Rn(),i),e.abrupt("return",Yu(t,o,Xa()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=G(Q().mark((function e(t,n,r,i){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Zu(t,n,r,Rn(),i),Za().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Cn(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=G(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qu(t);case 2:return n=e.sent,r=new Tu(t),n.register("authEvent",(function(e){return Tn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(es,{type:es},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),wn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Pu.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Lr()||Tr()||Dr()}}]),e}(),ns=ts,rs=function(e){ne(n,e);var t=ue(n);function n(e){var r;return $(this,n),(r=t.call(this,"phone")).credential=e,r}return J(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return jn(e,"POST","/v2/accounts/mfaEnrollment:finalize",Vn(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return jn(e,"POST","/v2/accounts/mfaSignIn:finalize",Vn(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){$(this,e),this.factorId=t}return J(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return En("unexpected MultiFactorSessionType")}}}]),e}()),is=function(){function e(){$(this,e)}return J(e,null,[{key:"assertion",value:function(e){return rs._fromCredential(e)}}]),e}();is.FACTOR_ID="phone";var as,os="@firebase/auth",us="0.19.12",ss=function(){function e(t){$(this,e),this.auth=t,this.internalListeners=new Map}return J(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=G(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Tn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function cs(){return window}as="Browser",vt(new We("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Tn(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Tn(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:as,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mr(as)},i=new Fr(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(An);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),vt(new We("auth-internal",(function(e){return function(e){return new ss(e)}(Ur(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Ct(os,us,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(as)),Ct(os,us,"esm2017");function ls(e,t,n){return fs.apply(this,arguments)}function fs(){return fs=G(Q().mark((function e(t,n,r){var i,a,o,u,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=cs(),o=a.BuildInfo,Cn(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,ys(n.sessionId);case 4:return u=e.sent,s={},Dr()?s.ibi=o.packageName:Nr()?s.apn=o.packageName:wn(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Zu(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),fs.apply(this,arguments)}function hs(){return(hs=G(Q().mark((function e(t){var n,r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=cs(),r=n.BuildInfo,i={},Dr()?i.iosBundleId=r.packageName:Nr()?i.androidPackageName=r.packageName:wn(t,"operation-not-supported-in-this-environment"),e.next=5,Nu(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ds(e){var t=cs().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function ps(e,t,n){return vs.apply(this,arguments)}function vs(){return vs=G(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cs(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(_n(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Nr()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),vs.apply(this,arguments)}function ms(e){var t,n,r,i,a,o,u,s,c,l,f=cs();Tn("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Tn("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Tn("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Tn("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Tn("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function ys(e){return gs.apply(this,arguments)}function gs(){return(gs=G(Q().mark((function e(t){var n,r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ks(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ks(e){if(Cn(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var bs=function(e){ne(n,e);var t=ue(n);function n(){var e;return $(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return J(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),en(re(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Tu);function ws(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Ts(),postBody:null,tenantId:e.tenantId,error:_n(e,"no-auth-event")}}function _s(e,t){return Es()._set(Cs(e),t)}function xs(e){return Is.apply(this,arguments)}function Is(){return(Is=G(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Es()._get(Cs(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Es()._remove(Cs(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ss(e,t){var n,r,i=function(e){var t=Ns(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ns(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ns(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Ns(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?_n(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Ts(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Es(){return An(Ga)}function Cs(e){return _r("authEvent",e.config.apiKey,e.name)}function Ns(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||qe(t)||u(t)||s();r[0];return De(r.slice(1).join("?"))}var As=function(){function e(){$(this,e),this._redirectPersistence=Qa,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=_u}return J(e,[{key:"_initialize",value:function(){var e=G(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new bs(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){wn(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=G(Q().mark((function e(t,n,r,i){var a,o,u,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ms(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),ou.clear(),e.next=10,this._originValidation(t);case 10:return o=ws(t,r,i),e.next=13,_s(t,o);case 13:return e.next=15,ls(t,o,n);case 15:return u=e.sent,e.next=18,ds(u);case 18:return s=e.sent,e.abrupt("return",ps(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return hs.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=cs(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(G(Q().mark((function n(){return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,xs(e);case 2:t.onEvent(Ds());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=G(Q().mark((function n(r){var i,a;return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,xs(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Ss(i,r.url)),t.onEvent(a||Ds());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");cs().handleOpenURL=function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Rs=As;function Ds(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_n("no-auth-event")}}function Ps(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Os(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return!("file:"!==Ps()&&"ionic:"!==Ps()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ls(){return _e()&&11===(null===document||void 0===document?void 0:document.documentMode)}function Ms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return/Edge\/\d+/.test(e)}function Fs(){try{var e=self.localStorage,t=Xa();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye();return Ls()||Ms(e)}()||xe()}catch(n){return Us()&&xe()}return!1}function Us(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Vs(){return("http:"===Ps()||"https:"===Ps()||be()||Os())&&!(we()||ke())&&Fs()&&!Us()}function js(){return Os()&&"undefined"!==typeof document}function Bs(){return zs.apply(this,arguments)}function zs(){return(zs=G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(js()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qs={LOCAL:"local",NONE:"none",SESSION:"session"},Ks=Tn,Ws="persistence";function Gs(e,t){Ks(Object.values(qs).includes(t),e,"invalid-persistence-type"),we()?Ks(t!==qs.SESSION,e,"unsupported-persistence-type"):ke()?Ks(t===qs.NONE,e,"unsupported-persistence-type"):Us()?Ks(t===qs.NONE||t===qs.LOCAL&&xe(),e,"unsupported-persistence-type"):Ks(t===qs.NONE||Fs(),e,"unsupported-persistence-type")}function Hs(e){return Qs.apply(this,arguments)}function Qs(){return(Qs=G(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Ys(),r=_r(Ws,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ys(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var $s=Tn,Xs=function(){function e(){$(this,e),this.browserResolver=An(ns),this.cordovaResolver=An(Rs),this.underlyingResolver=null,this._redirectPersistence=Qa,this._completeRedirectFn=_u}return J(e,[{key:"_initialize",value:function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=G(Q().mark((function e(t,n,r,i){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=G(Q().mark((function e(t,n,r,i){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return js()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return $s(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=G(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Bs();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Js(e){return e.unwrap()}function Zs(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new ic(e,function(e,t){var n,r=Fe(e),i=t;return Tn(t.customData.operationType,r,"argument-error"),Tn(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Va._fromError(r,i)}(e,t));else if(r){var i=ec(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function ec(e){var t=(e instanceof Ie?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Ie)&&"temporaryProof"in t&&"phoneNumber"in t)return Wo.credentialFromResult(e);var n,r=t.providerId;if(!r||r===un)return null;switch(r){case on:n=Ni;break;case rn:n=Ci;break;case an:n=Ai;break;case sn:n=Pi;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Ri._create(r,u):vi._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Ei(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Ie?n.credentialFromError(e):n.credentialFromResult(e)}function tc(e,t){return t.catch((function(t){throw t instanceof Ie&&Zs(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,ec(t)),additionalUserInfo:Fa(e),user:ac.getOrCreate(r)}}))}function nc(e,t){return rc.apply(this,arguments)}function rc(){return(rc=G(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return tc(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ic=function(){function e(t,n){$(this,e),this.resolver=n,this.auth=t.wrapped()}return J(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return tc(Js(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),ac=function(){function e(t){$(this,e),this._delegate=t,this.multiFactor=function(e){var t=Fe(e);return za.has(t)||za.set(t,Ba._fromUser(t)),za.get(t)}(t)}return J(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tc(this.auth,ea(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nc(this.auth,Vo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tc(this.auth,ru(this._delegate,t,Xs)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hs(Ur(this.auth));case 2:return e.abrupt("return",gu(this._delegate,t,Xs));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tc(this.auth,na(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return nc(this.auth,function(e,t,n){return Bo.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return tc(this.auth,function(e,t,n){return nu.apply(this,arguments)}(this._delegate,e,Xs))}},{key:"reauthenticateWithRedirect",value:function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hs(Ur(this.auth));case 2:return e.abrupt("return",mu(this._delegate,t,Xs));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return xa.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zi(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Na(Fe(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Na(Fe(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Ko.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return Ea(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Ia.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();ac.USER_MAP=new WeakMap;var oc=Tn,uc=function(){function e(t,n){if($(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;oc(r,"invalid-api-key",{appName:t.name}),oc(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Xs:void 0;this._delegate=n.initialize({options:{persistence:cc(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(mn),this.linkUnderlyingAuth()}return J(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?ac.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){jr(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return ha.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return da(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return fa.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tc(this._delegate,ma(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return _a.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=xi.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=G(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oc(Vs(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,bu(this._delegate,Xs);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",tc(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Ur(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=sc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=sc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return ga.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return la.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=G(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Gs(this._delegate,t),e.t0=t,e.next=e.t0===qs.SESSION?4:e.t0===qs.LOCAL?6:e.t0===qs.NONE?11:13;break;case 4:return n=Qa,e.abrupt("break",14);case 6:return e.next=8,An(go)._isAvailable();case 8:return r=e.sent,n=r?go:Ga,e.abrupt("break",14);case 11:return n=wr,e.abrupt("break",14);case 13:return e.abrupt("return",wn("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return tc(this._delegate,function(e){return Ui.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return tc(this._delegate,Ji(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return tc(this._delegate,function(e,t){return oa.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return tc(this._delegate,function(e,t,n){return Ji(Fe(e),Ii.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return tc(this._delegate,function(e,t,n){return ka.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return nc(this._delegate,function(e,t,n){return Uo.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oc(Vs(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",tc(this._delegate,eu(this._delegate,t,Xs)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oc(Vs(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Hs(this._delegate);case 3:return e.abrupt("return",pu(this._delegate,t,Xs));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return va.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function sc(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&ac.getOrCreate(e))},error:t,complete:n}}function cc(e,t){var n=function(e,t){var n=Ys();if(!n)return[];var r=_r(Ws,e,t);switch(n.getItem(r)){case qs.NONE:return[wr];case qs.LOCAL:return[go,Qa];case qs.SESSION:return[Qa];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(go)||n.push(go),"undefined"!==typeof window)for(var r=0,i=[Ga,Qa];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(wr)||n.push(wr),n}uc.Persistence=qs;var lc=function(){function e(){$(this,e),this.providerId="phone",this._delegate=new Wo(Js(Jt.auth()))}return J(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Wo.credential(e,t)}}]),e}();lc.PHONE_SIGN_IN_METHOD=Wo.PHONE_SIGN_IN_METHOD,lc.PROVIDER_ID=Wo.PROVIDER_ID;var fc,hc=Tn,dc=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jt.app();$(this,e),hc(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Lo(t,n,i.auth()),this.type=this._delegate.type}return J(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(fc=Jt).INTERNAL.registerComponent(new We("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new uc(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:cn,PASSWORD_RESET:ln,RECOVER_EMAIL:fn,REVERT_SECOND_FACTOR_ADDITION:hn,VERIFY_AND_CHANGE_EMAIL:dn,VERIFY_EMAIL:pn}},EmailAuthProvider:Ii,FacebookAuthProvider:Ci,GithubAuthProvider:Ai,GoogleAuthProvider:Ni,OAuthProvider:Ei,SAMLAuthProvider:Di,PhoneAuthProvider:lc,PhoneMultiFactorGenerator:is,RecaptchaVerifier:dc,TwitterAuthProvider:Pi,Auth:uc,AuthCredential:qr,Error:Ie}).setInstantiationMode("LAZY").setMultipleInstances(!1)),fc.registerVersion("@firebase/auth-compat","0.2.12");var pc,vc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},mc={},yc=yc||{},gc=vc||self;function kc(){}function bc(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function wc(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var _c="closure_uid_"+(1e9*Math.random()>>>0),xc=0;function Ic(e,t,n){return e.call.apply(e.bind,arguments)}function Sc(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Tc(e,t,n){return(Tc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ic:Sc).apply(null,arguments)}function Ec(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Cc(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Nc(){this.s=this.s,this.o=this.o}var Ac={};Nc.prototype.s=!1,Nc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,_c)&&e[_c]||(e[_c]=++xc)}(this);delete Ac[e]}},Nc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Rc=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Dc=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Pc(e){return Array.prototype.concat.apply([],arguments)}function Oc(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Lc(e){return/^[\s\xa0]*$/.test(e)}var Mc,Fc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Uc(e,t){return-1!=e.indexOf(t)}function Vc(e,t){return e<t?-1:e>t?1:0}e:{var jc=gc.navigator;if(jc){var Bc=jc.userAgent;if(Bc){Mc=Bc;break e}}Mc=""}function zc(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function qc(e){var t={};for(var n in e)t[n]=e[n];return t}var Kc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wc(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Kc.length;a++)n=Kc[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Gc(e){return Gc[" "](e),e}Gc[" "]=kc;var Hc,Qc=Uc(Mc,"Opera"),Yc=Uc(Mc,"Trident")||Uc(Mc,"MSIE"),$c=Uc(Mc,"Edge"),Xc=$c||Yc,Jc=Uc(Mc,"Gecko")&&!(Uc(Mc.toLowerCase(),"webkit")&&!Uc(Mc,"Edge"))&&!(Uc(Mc,"Trident")||Uc(Mc,"MSIE"))&&!Uc(Mc,"Edge"),Zc=Uc(Mc.toLowerCase(),"webkit")&&!Uc(Mc,"Edge");function el(){var e=gc.document;return e?e.documentMode:void 0}e:{var tl="",nl=function(){var e=Mc;return Jc?/rv:([^\);]+)(\)|;)/.exec(e):$c?/Edge\/([\d\.]+)/.exec(e):Yc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Zc?/WebKit\/(\S+)/.exec(e):Qc?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(nl&&(tl=nl?nl[1]:""),Yc){var rl=el();if(null!=rl&&rl>parseFloat(tl)){Hc=String(rl);break e}}Hc=tl}var il,al={};function ol(){return function(e){var t=al;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Fc(String(Hc)).split("."),n=Fc("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Vc(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Vc(0==a[2].length,0==o[2].length)||Vc(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(gc.document&&Yc){var ul=el();il=ul||(parseInt(Hc,10)||void 0)}else il=void 0;var sl=il,cl=function(){if(!gc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{gc.addEventListener("test",kc,t),gc.removeEventListener("test",kc,t)}catch(n){}return e}();function ll(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function fl(e,t){if(ll.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Jc){e:{try{Gc(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:hl[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&fl.Z.h.call(this)}}ll.prototype.h=function(){this.defaultPrevented=!0},Cc(fl,ll);var hl={2:"touch",3:"pen",4:"mouse"};fl.prototype.h=function(){fl.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var dl="closure_listenable_"+(1e6*Math.random()|0),pl=0;function vl(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++pl,this.ca=this.fa=!1}function ml(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function yl(e){this.src=e,this.g={},this.h=0}function gl(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Rc(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ml(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function kl(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}yl.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=kl(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new vl(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var bl="closure_lm_"+(1e6*Math.random()|0),wl={};function _l(e,t,n,r,i){if(r&&r.once)return Il(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)_l(e,t[a],n,r,i);return null}return n=Rl(n),e&&e[dl]?e.N(t,n,wc(r)?!!r.capture:!!r,i):xl(e,t,n,!1,r,i)}function xl(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=wc(i)?!!i.capture:!!i,u=Nl(e);if(u||(e[bl]=u=new yl(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Cl;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)cl||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(El(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Il(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Il(e,t[a],n,r,i);return null}return n=Rl(n),e&&e[dl]?e.O(t,n,wc(r)?!!r.capture:!!r,i):xl(e,t,n,!0,r,i)}function Sl(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Sl(e,t[a],n,r,i);else r=wc(r)?!!r.capture:!!r,n=Rl(n),e&&e[dl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=kl(a=e.g[t],n,r,i))&&(ml(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Nl(e))&&(t=e.g[t.toString()],e=-1,t&&(e=kl(t,n,r,i)),(n=-1<e?t[e]:null)&&Tl(n))}function Tl(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[dl])gl(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(El(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Nl(t))?(gl(n,e),0==n.h&&(n.src=null,t[bl]=null)):ml(e)}}}function El(e){return e in wl?wl[e]:wl[e]="on"+e}function Cl(e,t){if(e.ca)e=!0;else{t=new fl(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Tl(e),e=n.call(r,t)}return e}function Nl(e){return(e=e[bl])instanceof yl?e:null}var Al="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rl(e){return"function"===typeof e?e:(e[Al]||(e[Al]=function(t){return e.handleEvent(t)}),e[Al])}function Dl(){Nc.call(this),this.i=new yl(this),this.P=this,this.I=null}function Pl(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new ll(t,e);else if(t instanceof ll)t.target=t.target||e;else{var i=t;Wc(t=new ll(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Ol(o,r,!0,t)&&i}if(i=Ol(o=t.g=e,r,!0,t)&&i,i=Ol(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Ol(o=t.g=n[a],r,!1,t)&&i}function Ol(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&gl(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Cc(Dl,Nc),Dl.prototype[dl]=!0,Dl.prototype.removeEventListener=function(e,t,n,r){Sl(this,e,t,n,r)},Dl.prototype.M=function(){if(Dl.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ml(n[r]);delete t.g[e],t.h--}}this.I=null},Dl.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Dl.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ll=gc.JSON.stringify;function Ml(){var e=Kl,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Fl,Ul=function(){function e(){$(this,e),this.h=this.g=null}return J(e,[{key:"add",value:function(e,t){var n=Vl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Vl=new(function(){function e(t,n){$(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return J(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new jl}),(function(e){return e.reset()})),jl=function(){function e(){$(this,e),this.next=this.g=this.h=null}return J(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Bl(e){gc.setTimeout((function(){throw e}),0)}function zl(e,t){Fl||function(){var e=gc.Promise.resolve(void 0);Fl=function(){e.then(Wl)}}(),ql||(Fl(),ql=!0),Kl.add(e,t)}var ql=!1,Kl=new Ul;function Wl(){for(var e;e=Ml();){try{e.h.call(e.g)}catch(n){Bl(n)}var t=Vl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ql=!1}function Gl(e,t){Dl.call(this),this.h=e||1,this.g=t||gc,this.j=Tc(this.kb,this),this.l=Date.now()}function Hl(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Ql(e,t,n){if("function"===typeof e)n&&(e=Tc(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Tc(e.handleEvent,e)}return 2147483647<Number(t)?-1:gc.setTimeout(e,t||0)}function Yl(e){e.g=Ql((function(){e.g=null,e.i&&(e.i=!1,Yl(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Cc(Gl,Dl),(pc=Gl.prototype).da=!1,pc.S=null,pc.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Pl(this,"tick"),this.da&&(Hl(this),this.start()))}},pc.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pc.M=function(){Gl.Z.M.call(this),Hl(this),delete this.g};var $l=function(e){ne(n,e);var t=ue(n);function n(e,r){var i;return $(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return J(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Yl(this)}},{key:"M",value:function(){en(re(n.prototype),"M",this).call(this),this.g&&(gc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Nc);function Xl(e){Nc.call(this),this.h=e,this.g={}}Cc(Xl,Nc);var Jl=[];function Zl(e,t,n,r){Array.isArray(n)||(n&&(Jl[0]=n.toString()),n=Jl);for(var i=0;i<n.length;i++){var a=_l(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function ef(e){zc(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Tl(e)}),e),e.g={}}function tf(){this.g=!0}function nf(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Ll(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Xl.prototype.M=function(){Xl.Z.M.call(this),ef(this)},Xl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tf.prototype.Aa=function(){this.g=!1},tf.prototype.info=function(){};var rf={},af=null;function of(){return af=af||new Dl}function uf(e){ll.call(this,rf.Ma,e)}function sf(e){var t=of();Pl(t,new uf(t,e))}function cf(e,t){ll.call(this,rf.STAT_EVENT,e),this.stat=t}function lf(e){var t=of();Pl(t,new cf(t,e))}function ff(e,t){ll.call(this,rf.Na,e),this.size=t}function hf(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return gc.setTimeout((function(){e()}),t)}rf.Ma="serverreachability",Cc(uf,ll),rf.STAT_EVENT="statevent",Cc(cf,ll),rf.Na="timingevent",Cc(ff,ll);var df={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},pf={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function vf(){}function mf(e){return e.h||(e.h=e.i())}function yf(){}vf.prototype.h=null;var gf,kf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function bf(){ll.call(this,"d")}function wf(){ll.call(this,"c")}function _f(){}function xf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Xl(this),this.P=Sf,e=Xc?125:void 0,this.W=new Gl(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new If}function If(){this.i=null,this.g="",this.h=!1}Cc(bf,ll),Cc(wf,ll),Cc(_f,vf),_f.prototype.g=function(){return new XMLHttpRequest},_f.prototype.i=function(){return{}},gf=new _f;var Sf=45e3,Tf={},Ef={};function Cf(e,t,n){e.K=1,e.v=Xf(Wf(t)),e.s=n,e.U=!0,Nf(e,null)}function Nf(e,t){e.F=Date.now(),Pf(e),e.A=Wf(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),lh(n.h,"t",r),e.C=0,n=e.l.H,e.h=new If,e.g=hd(e.l,n?t:null,!e.s),0<e.O&&(e.L=new $l(Tc(e.Ia,e,e.g),e.O)),Zl(e.V,e.g,"readystatechange",e.gb),t=e.H?qc(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),sf(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Af(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Rf(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Df(e,n))==Ef){4==t&&(e.o=4,lf(14),i=!1),nf(e.j,e.m,null,"[Incomplete Response]");break}if(r==Tf){e.o=4,lf(15),nf(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}nf(e.j,e.m,r,null),Uf(e,r)}Af(e)&&r!=Ef&&r!=Tf&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,lf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),id(t),t.L=!0,lf(11))):(nf(e.j,e.m,n,"[Invalid Chunked Response]"),Ff(e),Mf(e))}function Df(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ef:(n=Number(t.substring(n,r)),isNaN(n)?Tf:(r+=1)+n>t.length?Ef:(t=t.substr(r,n),e.C=r+n,t))}function Pf(e){e.Y=Date.now()+e.P,Of(e,e.P)}function Of(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=hf(Tc(e.eb,e),t)}function Lf(e){e.B&&(gc.clearTimeout(e.B),e.B=null)}function Mf(e){0==e.l.G||e.I||ud(e.l,e)}function Ff(e){Lf(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Hl(e.W),ef(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Uf(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||gh(n.i,e)))if(n.I=e.N,!e.J&&gh(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;od(n),Yh(n)}rd(n),lf(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=hf(Tc(n.ab,n),6e3));if(1>=yh(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else cd(n,11)}else if((e.J||n.g==e)&&od(n),!Lc(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(Uc(l,"spdy")||Uc(l,"quic")||Uc(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(kh(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,$f(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=fd(r,r.H?r.la:null,r.W),d.J){bh(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Lf(p),Pf(p)),r.g=d}else nd(r);0<n.l.length&&Jh(n)}else"stop"!=a[0]&&"close"!=a[0]||cd(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?cd(n,7):Qh(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}sf(4)}catch(a){}}function Vf(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(bc(e)||"string"===typeof e)Dc(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(bc(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(bc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function jf(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof jf)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Bf(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];zf(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)zf(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function zf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(pc=xf.prototype).setTimeout=function(e){this.P=e},pc.gb=function(e){e=e.target;var t=this.L;t&&3==qh(e)?t.l():this.Ia(e)},pc.Ia=function(e){try{if(e==this.g)e:{var t=qh(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Xc||this.g&&(this.h.h||this.g.ga()||Kh(this.g)))){this.I||4!=t||7==n||sf(8==n||0>=r?3:2),Lf(this);var i=this.g.ba();this.N=i;t:if(Af(this)){var a=Kh(this.g);e="";var o=a.length,u=4==qh(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ff(this),Mf(this);var s="";break t}this.h.i=new gc.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Lc(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,lf(12),Ff(this),Mf(this);break e}nf(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Uf(this,i)}this.U?(Rf(this,t,s),Xc&&this.i&&3==t&&(Zl(this.V,this.W,"tick",this.fb),this.W.start())):(nf(this.j,this.m,s,null),Uf(this,s)),4==t&&Ff(this),this.i&&!this.I&&(4==t?ud(this.l,this):(this.i=!1,Pf(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,lf(12)):(this.o=0,lf(13)),Ff(this),Mf(this)}}}catch(t){}},pc.fb=function(){if(this.g){var e=qh(this.g),t=this.g.ga();this.C<t.length&&(Lf(this),Rf(this,e,t),this.i&&4!=e&&Pf(this))}},pc.cancel=function(){this.I=!0,Ff(this)},pc.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(sf(3),lf(17)),Ff(this),this.o=2,Mf(this)):Of(this,this.Y-e)},(pc=jf.prototype).R=function(){Bf(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},pc.T=function(){return Bf(this),this.g.concat()},pc.get=function(e,t){return zf(this.h,e)?this.h[e]:t},pc.set=function(e,t){zf(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},pc.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var qf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Kf(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Kf){this.g=void 0!==t?t:e.g,Gf(this,e.j),this.s=e.s,Hf(this,e.i),Qf(this,e.m),this.l=e.l,t=e.h;var n=new oh;n.i=t.i,t.g&&(n.g=new jf(t.g),n.h=t.h),Yf(this,n),this.o=e.o}else e&&(n=String(e).match(qf))?(this.g=!!t,Gf(this,n[1]||"",!0),this.s=Jf(n[2]||""),Hf(this,n[3]||"",!0),Qf(this,n[4]),this.l=Jf(n[5]||"",!0),Yf(this,n[6]||"",!0),this.o=Jf(n[7]||"")):(this.g=!!t,this.h=new oh(null,this.g))}function Wf(e){return new Kf(e)}function Gf(e,t,n){e.j=n?Jf(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Hf(e,t,n){e.i=n?Jf(t,!0):t}function Qf(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Yf(e,t,n){t instanceof oh?(e.h=t,function(e,t){t&&!e.j&&(uh(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(sh(this,t),lh(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Zf(t,ih)),e.h=new oh(t,e.g))}function $f(e,t,n){e.h.set(t,n)}function Xf(e){return $f(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Jf(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Zf(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,eh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function eh(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Kf.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Zf(t,th,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Zf(t,th,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Zf(n,"/"==n.charAt(0)?rh:nh,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Zf(n,ah)),e.join("")};var th=/[#\/\?@]/g,nh=/[#\?:]/g,rh=/[#\?]/g,ih=/[#\?@]/g,ah=/#/g;function oh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function uh(e){e.g||(e.g=new jf,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function sh(e,t){uh(e),t=fh(e,t),zf(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,zf((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Bf(e)))}function ch(e,t){return uh(e),t=fh(e,t),zf(e.g.h,t)}function lh(e,t,n){sh(e,t),0<n.length&&(e.i=null,e.g.set(fh(e,t),Oc(n)),e.h+=n.length)}function fh(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(pc=oh.prototype).add=function(e,t){uh(this),this.i=null,e=fh(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},pc.forEach=function(e,t){uh(this),this.g.forEach((function(n,r){Dc(n,(function(n){e.call(t,n,r,this)}),this)}),this)},pc.T=function(){uh(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},pc.R=function(e){uh(this);var t=[];if("string"===typeof e)ch(this,e)&&(t=Pc(t,this.g.get(fh(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Pc(t,e[n])}return t},pc.set=function(e,t){return uh(this),this.i=null,ch(this,e=fh(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},pc.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},pc.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var hh=J((function e(t,n){$(this,e),this.h=t,this.g=n}));function dh(e){this.l=e||vh,gc.PerformanceNavigationTiming?e=0<(e=gc.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(gc.g&&gc.g.Ea&&gc.g.Ea()&&gc.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ph,vh=10;function mh(e){return!!e.h||!!e.g&&e.g.size>=e.j}function yh(e){return e.h?1:e.g?e.g.size:0}function gh(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function kh(e,t){e.g?e.g.add(t):e.h=t}function bh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function wh(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Z(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Oc(e.i)}function _h(){}function xh(){this.g=new _h}function Ih(e,t,n){var r=n||"";try{Vf(e,(function(e,n){var i=e;wc(e)&&(i=Ll(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Sh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Th(e){this.l=e.$b||null,this.j=e.ib||!1}function Eh(e,t){Dl.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Ch,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dh.prototype.cancel=function(){if(this.i=wh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Z(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},_h.prototype.stringify=function(e){return gc.JSON.stringify(e,void 0)},_h.prototype.parse=function(e){return gc.JSON.parse(e,void 0)},Cc(Th,vf),Th.prototype.g=function(){return new Eh(this.l,this.j)},Th.prototype.i=(ph={},function(){return ph}),Cc(Eh,Dl);var Ch=0;function Nh(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Ah(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Rh(e)}function Rh(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(pc=Eh.prototype).open=function(e,t){if(this.readyState!=Ch)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Rh(this)},pc.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||gc).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},pc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ah(this)),this.readyState=Ch},pc.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Rh(this)),this.g&&(this.readyState=3,Rh(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof gc.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Nh(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},pc.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ah(this):Rh(this),3==this.readyState&&Nh(this)}},pc.Ua=function(e){this.g&&(this.response=this.responseText=e,Ah(this))},pc.Ta=function(e){this.g&&(this.response=e,Ah(this))},pc.ha=function(){this.g&&Ah(this)},pc.setRequestHeader=function(e,t){this.v.append(e,t)},pc.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},pc.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Eh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Dh=gc.JSON.parse;function Ph(e){Dl.call(this),this.headers=new jf,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Oh,this.K=this.L=!1}Cc(Ph,Dl);var Oh="",Lh=/^https?$/i,Mh=["POST","PUT"];function Fh(e){return"content-type"==e.toLowerCase()}function Uh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Vh(e),Bh(e)}function Vh(e){e.D||(e.D=!0,Pl(e,"complete"),Pl(e,"error"))}function jh(e){if(e.h&&"undefined"!=typeof yc&&(!e.C[1]||4!=qh(e)||2!=e.ba()))if(e.v&&4==qh(e))Ql(e.Fa,0,e);else if(Pl(e,"readystatechange"),4==qh(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(qf)[1]||null;if(!a&&gc.self&&gc.self.location){var o=gc.self.location.protocol;a=o.substr(0,o.length-1)}i=!Lh.test(a?a.toLowerCase():"")}t=i}if(t)Pl(e,"complete"),Pl(e,"success");else{e.m=6;try{var u=2<qh(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Vh(e)}}finally{Bh(e)}}}function Bh(e,t){if(e.g){zh(e);var n=e.g,r=e.C[0]?kc:null;e.g=null,e.C=null,t||Pl(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function zh(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(gc.clearTimeout(e.A),e.A=null)}function qh(e){return e.g?e.g.readyState:0}function Kh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Oh:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Wh(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return zc(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):$f(e,t,n))}function Gh(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Hh(e){this.za=0,this.l=[],this.h=new tf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Gh("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Gh("baseRetryDelayMs",5e3,e),this.$a=Gh("retryDelaySeedMs",1e4,e),this.Ya=Gh("forwardChannelMaxRetries",2,e),this.ra=Gh("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new dh(e&&e.concurrentRequestLimit),this.Ca=new xh,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Qh(e){if($h(e),3==e.G){var t=e.V++,n=Wf(e.F);$f(n,"SID",e.J),$f(n,"RID",t),$f(n,"TYPE","terminate"),ed(e,n),(t=new xf(e,e.h,t,void 0)).K=2,t.v=Xf(Wf(n)),n=!1,gc.navigator&&gc.navigator.sendBeacon&&(n=gc.navigator.sendBeacon(t.v.toString(),"")),!n&&gc.Image&&((new Image).src=t.v,n=!0),n||(t.g=hd(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Pf(t)}ld(e)}function Yh(e){e.g&&(id(e),e.g.cancel(),e.g=null)}function $h(e){Yh(e),e.u&&(gc.clearTimeout(e.u),e.u=null),od(e),e.i.cancel(),e.m&&("number"===typeof e.m&&gc.clearTimeout(e.m),e.m=null)}function Xh(e,t){e.l.push(new hh(e.Za++,t)),3==e.G&&Jh(e)}function Jh(e){mh(e.i)||e.m||(e.m=!0,zl(e.Ha,e),e.C=0)}function Zh(e,t){var n;n=t?t.m:e.V++;var r=Wf(e.F);$f(r,"SID",e.J),$f(r,"RID",n),$f(r,"AID",e.U),ed(e,r),e.o&&e.s&&Wh(r,e.o,e.s),n=new xf(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=td(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),kh(e.i,n),Cf(n,r,t)}function ed(e,t){e.j&&Vf({},(function(e,n){$f(t,n,e)}))}function td(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Tc(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Ih(l,o,"req"+c+"_")}catch(jd){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function nd(e){e.g||e.u||(e.Y=1,zl(e.Ga,e),e.A=0)}function rd(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=hf(Tc(e.Ga,e),sd(e,e.A)),e.A++,!0)}function id(e){null!=e.B&&(gc.clearTimeout(e.B),e.B=null)}function ad(e){e.g=new xf(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Wf(e.oa);$f(t,"RID","rpc"),$f(t,"SID",e.J),$f(t,"CI",e.N?"0":"1"),$f(t,"AID",e.U),ed(e,t),$f(t,"TYPE","xmlhttp"),e.o&&e.s&&Wh(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Xf(Wf(t)),n.s=null,n.U=!0,Nf(n,e)}function od(e){null!=e.v&&(gc.clearTimeout(e.v),e.v=null)}function ud(e,t){var n=null;if(e.g==t){od(e),id(e),e.g=null;var r=2}else{if(!gh(e.i,t))return;n=t.D,bh(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Pl(r=of(),new ff(r,n,t,i)),Jh(e)}else nd(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(yh(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=hf(Tc(e.Ha,e,t),sd(e,e.C)),e.C++,!0))}(e,t)||2==r&&rd(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:cd(e,5);break;case 4:cd(e,10);break;case 3:cd(e,6);break;default:cd(e,2)}}function sd(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function cd(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Tc(e.jb,e);n||(n=new Kf("//www.google.com/images/cleardot.gif"),gc.location&&"http"==gc.location.protocol||Gf(n,"https"),Xf(n)),function(e,t){var n=new tf;if(gc.Image){var r=new Image;r.onload=Ec(Sh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ec(Sh,n,r,"TestLoadImage: error",!1,t),r.onabort=Ec(Sh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ec(Sh,n,r,"TestLoadImage: timeout",!1,t),gc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else lf(2);e.G=0,e.j&&e.j.va(t),ld(e),$h(e)}function ld(e){e.G=0,e.I=-1,e.j&&(0==wh(e.i).length&&0==e.l.length||(e.i.i.length=0,Oc(e.l),e.l.length=0),e.j.ua())}function fd(e,t,n){var r=function(e){return e instanceof Kf?Wf(e):new Kf(e,void 0)}(n);if(""!=r.i)t&&Hf(r,t+"."+r.i),Qf(r,r.m);else{var i=gc.location;r=function(e,t,n,r){var i=new Kf(null,void 0);return e&&Gf(i,e),t&&Hf(i,t),n&&Qf(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&zc(e.aa,(function(e,t){$f(r,t,e)})),t=e.D,n=e.sa,t&&n&&$f(r,t,n),$f(r,"VER",e.ma),ed(e,r),r}function hd(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Ph(new Th({ib:!0})):new Ph(e.qa)).L=e.H,t}function dd(){}function pd(){if(Yc&&!(10<=Number(sl)))throw Error("Environmental error: no available transport.")}function vd(e,t){Dl.call(this),this.g=new Hh(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Lc(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Lc(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new gd(this)}function md(e){bf.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yd(){wf.call(this),this.status=1}function gd(e){this.g=e}(pc=Ph.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():gf.g(),this.C=this.u?mf(this.u):mf(gf),this.g.onreadystatechange=Tc(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Uh(this,a)}e=n||"";var i=new jf(this.headers);r&&Vf(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Fh,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=gc.FormData&&e instanceof gc.FormData,!(0<=Rc(Mh,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{zh(this),0<this.B&&((this.K=function(e){return Yc&&ol()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Tc(this.pa,this)):this.A=Ql(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Uh(this,a)}},pc.pa=function(){"undefined"!=typeof yc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pl(this,"timeout"),this.abort(8))},pc.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Pl(this,"complete"),Pl(this,"abort"),Bh(this))},pc.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bh(this,!0)),Ph.Z.M.call(this)},pc.Fa=function(){this.s||(this.F||this.v||this.l?jh(this):this.cb())},pc.cb=function(){jh(this)},pc.ba=function(){try{return 2<qh(this)?this.g.status:-1}catch(ph){return-1}},pc.ga=function(){try{return this.g?this.g.responseText:""}catch(ph){return""}},pc.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Dh(t)}},pc.Da=function(){return this.m},pc.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(pc=Hh.prototype).ma=8,pc.G=1,pc.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},pc.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new xf(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Wc(n=qc(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=td(this,t,r),$f(i=Wf(this.F),"RID",e),$f(i,"CVER",22),this.D&&$f(i,"X-HTTP-Session-Id",this.D),ed(this,i),this.o&&n&&Wh(i,this.o,n),kh(this.i,t),this.Ra&&$f(i,"TYPE","init"),this.ja?($f(i,"$req",r),$f(i,"SID","null"),t.$=!0,Cf(t,i,null)):Cf(t,i,r),this.G=2}}else 3==this.G&&(e?Zh(this,e):0==this.l.length||mh(this.i)||Zh(this))},pc.Ga=function(){if(this.u=null,ad(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=hf(Tc(this.bb,this),e)}},pc.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,lf(10),Yh(this),ad(this))},pc.ab=function(){null!=this.v&&(this.v=null,Yh(this),rd(this),lf(19))},pc.jb=function(e){e?(this.h.info("Successfully pinged google.com"),lf(2)):(this.h.info("Failed to ping google.com"),lf(1))},(pc=dd.prototype).xa=function(){},pc.wa=function(){},pc.va=function(){},pc.ua=function(){},pc.Oa=function(){},pd.prototype.g=function(e,t){return new vd(e,t)},Cc(vd,Dl),vd.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),zl(Tc(e.hb,e,t))),lf(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=fd(e,null,e.W),Jh(e)},vd.prototype.close=function(){Qh(this.g)},vd.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Xh(this.g,t)}else this.v?((t={}).__data__=Ll(e),Xh(this.g,t)):Xh(this.g,e)},vd.prototype.M=function(){this.g.j=null,delete this.j,Qh(this.g),delete this.g,vd.Z.M.call(this)},Cc(md,bf),Cc(yd,wf),Cc(gd,dd),gd.prototype.xa=function(){Pl(this.g,"a")},gd.prototype.wa=function(e){Pl(this.g,new md(e))},gd.prototype.va=function(e){Pl(this.g,new yd(e))},gd.prototype.ua=function(){Pl(this.g,"b")},pd.prototype.createWebChannel=pd.prototype.g,vd.prototype.send=vd.prototype.u,vd.prototype.open=vd.prototype.m,vd.prototype.close=vd.prototype.close,df.NO_ERROR=0,df.TIMEOUT=8,df.HTTP_ERROR=6,pf.COMPLETE="complete",yf.EventType=kf,kf.OPEN="a",kf.CLOSE="b",kf.ERROR="c",kf.MESSAGE="d",Dl.prototype.listen=Dl.prototype.N,Ph.prototype.listenOnce=Ph.prototype.O,Ph.prototype.getLastError=Ph.prototype.La,Ph.prototype.getLastErrorCode=Ph.prototype.Da,Ph.prototype.getStatus=Ph.prototype.ba,Ph.prototype.getResponseJson=Ph.prototype.Qa,Ph.prototype.getResponseText=Ph.prototype.ga,Ph.prototype.send=Ph.prototype.ea;var kd=mc.createWebChannelTransport=function(){return new pd},bd=mc.getStatEventTarget=function(){return of()},wd=mc.ErrorCode=df,_d=mc.EventType=pf,xd=mc.Event=rf,Id=mc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Sd=mc.FetchXmlHttpFactory=Th,Td=mc.WebChannel=yf,Ed=mc.XhrIo=Ph,Cd="@firebase/firestore",Nd=function(){function e(t){$(this,e),this.uid=t}return J(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Nd.UNAUTHENTICATED=new Nd(null),Nd.GOOGLE_CREDENTIALS=new Nd("google-credentials-uid"),Nd.FIRST_PARTY=new Nd("first-party-uid"),Nd.MOCK_USER=new Nd("mock-user");var Ad="9.6.11",Rd=new it("@firebase/firestore");function Dd(){return Rd.logLevel}function Pd(e){if(Rd.logLevel<=Ye.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Md);Rd.debug.apply(Rd,["Firestore (".concat(Ad,"): ").concat(e)].concat(Ke(i)))}}function Od(e){if(Rd.logLevel<=Ye.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Md);Rd.error.apply(Rd,["Firestore (".concat(Ad,"): ").concat(e)].concat(Ke(i)))}}function Ld(e){if(Rd.logLevel<=Ye.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Md);Rd.warn.apply(Rd,["Firestore (".concat(Ad,"): ").concat(e)].concat(Ke(i)))}}function Md(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Fd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Ad,") INTERNAL ASSERTION FAILED: ")+e;throw Od(t),new Error(t)}function Ud(e,t){e||Fd()}function Vd(e,t){return e}var jd={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Bd=function(e){ne(n,e);var t=ue(n);function n(e,r){var i;return $(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return J(n)}(Ie),zd=J((function e(){var t=this;$(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),qd=J((function e(t,n){$(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Kd=function(){function e(){$(this,e)}return J(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Nd.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Wd=function(){function e(t){$(this,e),this.token=t,this.changeListener=null}return J(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Gd=function(){function e(t){$(this,e),this.t=t,this.currentUser=Nd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return J(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new zd;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new zd,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Pd("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Pd("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new zd)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Pd("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Ud("string"==typeof n.accessToken),new qd(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Ud(null===e||"string"==typeof e),new Nd(e)}}]),e}(),Hd=J((function e(t,n,r){$(this,e),this.type="FirstParty",this.user=Nd.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Qd=function(){function e(t,n,r){$(this,e),this.h=t,this.l=n,this.m=r}return J(e,[{key:"getToken",value:function(){return Promise.resolve(new Hd(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Nd.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Yd=J((function e(t){$(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),$d=function(){function e(t){$(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return J(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Pd("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Pd("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Pd("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Pd("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Ud("string"==typeof t.token),e.p=t.token,new Yd(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Xd=function(){function e(t,n){var r=this;$(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return J(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Jd(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Xd.A=-1;var Zd=function(){function e(){$(this,e)}return J(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Jd(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function ep(e,t){return e<t?-1:e>t?1:0}function tp(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function np(e){return e+"\0"}var rp=function(){function e(t,n){if($(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Bd(jd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Bd(jd.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Bd(jd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Bd(jd.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return J(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?ep(this.nanoseconds,e.nanoseconds):ep(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),ip=function(){function e(t){$(this,e),this.timestamp=t}return J(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new rp(0,0))}},{key:"max",value:function(){return new e(new rp(253402300799,999999999))}}]),e}();function ap(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function op(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function up(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var sp=function(){function e(t,n,r){$(this,e),void 0===n?n=0:n>t.length&&Fd(),void 0===r?r=t.length-n:r>t.length-n&&Fd(),this.segments=t,this.offset=n,this.len=r}return J(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),cp=function(e){ne(n,e);var t=ue(n);function n(){return $(this,n),t.apply(this,arguments)}return J(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Bd(jd.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Ke(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(sp),lp=/^[_a-zA-Z][_a-zA-Z0-9]*$/,fp=function(e){ne(n,e);var t=ue(n);function n(){return $(this,n),t.apply(this,arguments)}return J(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return lp.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Bd(jd.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Bd(jd.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Bd(jd.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Bd(jd.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(sp),hp=function(){function e(t){$(this,e),this.fields=t,t.sort(fp.comparator)}return J(e,[{key:"covers",value:function(e){var t,n=Z(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return tp(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var dp=function(e){function t(e){$(this,t),this.binaryString=e}return J(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return ep(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();dp.EMPTY_BYTE_STRING=new dp("");var pp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vp(e){if(Ud(!!e),"string"==typeof e){var t=0,n=pp.exec(e);if(Ud(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:mp(e.seconds),nanos:mp(e.nanos)}}function mp(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function yp(e){return"string"==typeof e?dp.fromBase64String(e):dp.fromUint8Array(e)}function gp(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function kp(e){var t=e.mapValue.fields.__previous_value__;return gp(t)?kp(t):t}function bp(e){var t=vp(e.mapValue.fields.__local_write_time__.timestampValue);return new rp(t.seconds,t.nanos)}var wp=J((function e(t,n,r,i,a,o,u,s){$(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),_p=function(){function e(t,n){$(this,e),this.projectId=t,this.database=n||"(default)"}return J(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function xp(e){return null==e}function Ip(e){return 0===e&&1/e==-1/0}function Sp(e){return"number"==typeof e&&Number.isInteger(e)&&!Ip(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Tp=function(){function e(t){$(this,e),this.path=t}return J(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===cp.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(cp.fromString(t))}},{key:"fromName",value:function(t){return new e(cp.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(cp.emptyPath())}},{key:"comparator",value:function(e,t){return cp.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new cp(t.slice()))}}]),e}(),Ep={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Cp={nullValue:"NULL_VALUE"};function Np(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?gp(e)?4:qp(e)?9:10:Fd()}function Ap(e,t){if(e===t)return!0;var n=Np(e);if(n!==Np(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return bp(e).isEqual(bp(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=vp(e.timestampValue),r=vp(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return yp(e.bytesValue).isEqual(yp(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return mp(e.geoPointValue.latitude)===mp(t.geoPointValue.latitude)&&mp(e.geoPointValue.longitude)===mp(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return mp(e.integerValue)===mp(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=mp(e.doubleValue),r=mp(t.doubleValue);return n===r?Ip(n)===Ip(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return tp(e.arrayValue.values||[],t.arrayValue.values||[],Ap);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ap(n)!==ap(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ap(n[i],r[i])))return!1;return!0}(e,t);default:return Fd()}}function Rp(e,t){return void 0!==(e.values||[]).find((function(e){return Ap(e,t)}))}function Dp(e,t){if(e===t)return 0;var n=Np(e),r=Np(t);if(n!==r)return ep(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ep(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=mp(e.integerValue||e.doubleValue),r=mp(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Pp(e.timestampValue,t.timestampValue);case 4:return Pp(bp(e),bp(t));case 5:return ep(e.stringValue,t.stringValue);case 6:return function(e,t){var n=yp(e),r=yp(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=ep(n[i],r[i]);if(0!==a)return a}return ep(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=ep(mp(e.latitude),mp(t.latitude));return 0!==n?n:ep(mp(e.longitude),mp(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Dp(n[i],r[i]);if(a)return a}return ep(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=ep(r[o],a[o]);if(0!==u)return u;var s=Dp(n[r[o]],i[a[o]]);if(0!==s)return s}return ep(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Fd()}}function Pp(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ep(e,t);var n=vp(e),r=vp(t),i=ep(n.seconds,r.seconds);return 0!==i?i:ep(n.nanos,r.nanos)}function Op(e){return Lp(e)}function Lp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=vp(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?yp(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Tp.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Z(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Lp(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Z(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Lp(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Fd();var t,n}function Mp(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Fp(e){return!!e&&"integerValue"in e}function Up(e){return!!e&&"arrayValue"in e}function Vp(e){return!!e&&"nullValue"in e}function jp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Bp(e){return!!e&&"mapValue"in e}function zp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return op(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=zp(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=zp(e.arrayValue.values[r]);return n}return Object.assign({},e)}function qp(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Kp(e){return"nullValue"in e?Cp:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Mp(_p.empty(),Tp.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Fd()}function Wp(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Mp(_p.empty(),Tp.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Ep:Fd()}function Gp(e,t){return void 0===e?t:void 0===t||Dp(e,t)>0?e:t}function Hp(e,t){return void 0===e?t:void 0===t||Dp(e,t)<0?e:t}var Qp=function(){function e(t){$(this,e),this.value=t}return J(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Bp(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zp(t)}},{key:"setAll",value:function(e){var t=this,n=fp.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=zp(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Bp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ap(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Bp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){op(t,(function(t,n){return e[t]=n}));var r,i=Z(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(zp(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Yp(e){var t=[];return op(e.fields,(function(e,n){var r=new fp([e]);if(Bp(n)){var i=Yp(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Z(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new hp(t)}var $p=function(){function e(t,n,r,i,a,o){$(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return J(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Qp.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Qp.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,ip.min(),ip.min(),Qp.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,ip.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,ip.min(),Qp.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,ip.min(),Qp.empty(),2)}}]),e}(),Xp=J((function e(t,n,r,i){$(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Jp(e){return e.fields.find((function(e){return 2===e.kind}))}function Zp(e){return e.fields.filter((function(e){return 2!==e.kind}))}Xp.UNKNOWN_ID=-1;var ev=J((function e(t,n){$(this,e),this.fieldPath=t,this.kind=n})),tv=function(){function e(t,n){$(this,e),this.sequenceNumber=t,this.offset=n}return J(e,null,[{key:"empty",value:function(){return new e(0,iv.min())}}]),e}();function nv(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ip.fromTimestamp(1e9===r?new rp(n+1,0):new rp(n,r));return new iv(i,Tp.empty(),t)}function rv(e){return new iv(e.readTime,e.key,-1)}var iv=function(){function e(t,n,r){$(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return J(e,null,[{key:"min",value:function(){return new e(ip.min(),Tp.empty(),-1)}},{key:"max",value:function(){return new e(ip.max(),Tp.empty(),-1)}}]),e}();function av(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Tp.comparator(e.documentKey,t.documentKey))?n:ep(e.largestBatchId,t.largestBatchId)}var ov=J((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;$(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function uv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new ov(e,t,n,r,i,a,o)}function sv(e){var t=Vd(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Op(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),xp(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Op(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Op(e)})).join(",")),t.P=n}return t.P}function cv(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Sv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Ap(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ev(e.startAt,t.startAt)&&Ev(e.endAt,t.endAt)}function lv(e){return Tp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function fv(e,t){return e.filters.filter((function(e){return e instanceof pv&&e.field.isEqual(t)}))}function hv(e,t,n){var r,i,a=!0,o=Z(fv(e,t));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=void 0,c=!0;switch(u.op){case"<":case"<=":s=Kp(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Cp}Gp(r,s)===s&&(r=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Gp(r,f)===f&&(r=f,a=n.inclusive);break}return{value:r,inclusive:a}}function dv(e,t,n){var r,i,a=!0,o=Z(fv(e,t));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=void 0,c=!0;switch(u.op){case">=":case">":s=Wp(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Ep}Hp(r,s)===s&&(r=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Hp(r,f)===f&&(r=f,a=n.inclusive);break}return{value:r,inclusive:a}}var pv=function(e){ne(n,e);var t=ue(n);function n(e,r,i){var a;return $(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return J(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Dp(t,this.value)):null!==t&&Np(this.value)===Np(t)&&this.v(Dp(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Fd()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new vv(e,t,r):"array-contains"===t?new kv(e,r):"in"===t?new bv(e,r):"not-in"===t?new wv(e,r):"array-contains-any"===t?new _v(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new mv(e,n):new yv(e,n)}}]),n}(function(){return J((function e(){$(this,e)}))}()),vv=function(e){ne(n,e);var t=ue(n);function n(e,r,i){var a;return $(this,n),(a=t.call(this,e,r,i)).key=Tp.fromName(i.referenceValue),a}return J(n,[{key:"matches",value:function(e){var t=Tp.comparator(e.key,this.key);return this.v(t)}}]),n}(pv),mv=function(e){ne(n,e);var t=ue(n);function n(e,r){var i;return $(this,n),(i=t.call(this,e,"in",r)).keys=gv("in",r),i}return J(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(pv),yv=function(e){ne(n,e);var t=ue(n);function n(e,r){var i;return $(this,n),(i=t.call(this,e,"not-in",r)).keys=gv("not-in",r),i}return J(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(pv);function gv(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Tp.fromName(e.referenceValue)}))}var kv=function(e){ne(n,e);var t=ue(n);function n(e,r){return $(this,n),t.call(this,e,"array-contains",r)}return J(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Up(t)&&Rp(t.arrayValue,this.value)}}]),n}(pv),bv=function(e){ne(n,e);var t=ue(n);function n(e,r){return $(this,n),t.call(this,e,"in",r)}return J(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Rp(this.value.arrayValue,t)}}]),n}(pv),wv=function(e){ne(n,e);var t=ue(n);function n(e,r){return $(this,n),t.call(this,e,"not-in",r)}return J(n,[{key:"matches",value:function(e){if(Rp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Rp(this.value.arrayValue,t)}}]),n}(pv),_v=function(e){ne(n,e);var t=ue(n);function n(e,r){return $(this,n),t.call(this,e,"array-contains-any",r)}return J(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Up(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Rp(t.value.arrayValue,e)}))}}]),n}(pv),xv=J((function e(t,n){$(this,e),this.position=t,this.inclusive=n})),Iv=J((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";$(this,e),this.field=t,this.dir=n}));function Sv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Tv(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Tp.comparator(Tp.fromName(o.referenceValue),n.key):Dp(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Ev(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ap(e.position[n],t.position[n]))return!1;return!0}var Cv=J((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;$(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function Nv(e,t,n,r,i,a,o,u){return new Cv(e,t,n,r,i,a,o,u)}function Av(e){return new Cv(e)}function Rv(e){return!xp(e.limit)&&"F"===e.limitType}function Dv(e){return!xp(e.limit)&&"L"===e.limitType}function Pv(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Ov(e){var t,n=Z(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Lv(e){return null!==e.collectionGroup}function Mv(e){var t=Vd(e);if(null===t.D){t.D=[];var n=Ov(t),r=Pv(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new Iv(n)),t.D.push(new Iv(fp.keyField(),"asc"));else{var i,a=!1,o=Z(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Iv(fp.keyField(),s))}}}return t.D}function Fv(e){var t=Vd(e);if(!t.C)if("F"===t.limitType)t.C=uv(t.path,t.collectionGroup,Mv(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Z(Mv(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Iv(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new xv(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new xv(t.startAt.position,!t.startAt.inclusive):null;t.C=uv(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function Uv(e,t,n){return new Cv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Vv(e,t){return cv(Fv(e),Fv(t))&&e.limitType===t.limitType}function jv(e){return"".concat(sv(Fv(e)),"|lt:").concat(e.limitType)}function Bv(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Op(t.value));var t})).join(", "),"]")),xp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Op(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Op(e)})).join(",")),"Target(".concat(t,")")}(Fv(e)),"; limitType=").concat(e.limitType,")")}function zv(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Tp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Z(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Z(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Tv(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Mv(e),t))&&!(e.endAt&&!function(e,t,n){var r=Tv(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Mv(e),t))}(e,t)}function qv(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Kv(e){return function(t,n){var r,i=!1,a=Z(Mv(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Wv(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Wv(e,t,n){var r=e.field.isKeyField()?Tp.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Dp(r,i):Fd()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Fd()}}function Gv(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ip(t)?"-0":t}}function Hv(e){return{integerValue:""+e}}function Qv(e,t){return Sp(t)?Hv(t):Gv(e,t)}var Yv=J((function e(){$(this,e),this._=void 0}));function $v(e,t,n){return e instanceof Zv?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof em?tm(e,t):e instanceof nm?rm(e,t):function(e,t){var n=Jv(e,t),r=am(n)+am(e.k);return Fp(n)&&Fp(e.k)?Hv(r):Gv(e.M,r)}(e,t)}function Xv(e,t,n){return e instanceof em?tm(e,t):e instanceof nm?rm(e,t):n}function Jv(e,t){return e instanceof im?Fp(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Zv=function(e){ne(n,e);var t=ue(n);function n(){return $(this,n),t.apply(this,arguments)}return J(n)}(Yv),em=function(e){ne(n,e);var t=ue(n);function n(e){var r;return $(this,n),(r=t.call(this)).elements=e,r}return J(n)}(Yv);function tm(e,t){var n,r=om(t),i=Z(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Ap(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var nm=function(e){ne(n,e);var t=ue(n);function n(e){var r;return $(this,n),(r=t.call(this)).elements=e,r}return J(n)}(Yv);function rm(e,t){var n,r=om(t),i=Z(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Ap(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var im=function(e){ne(n,e);var t=ue(n);function n(e,r){var i;return $(this,n),(i=t.call(this)).M=e,i.k=r,i}return J(n)}(Yv);function am(e){return mp(e.integerValue||e.doubleValue)}function om(e){return Up(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var um=J((function e(t,n){$(this,e),this.field=t,this.transform=n}));var sm=J((function e(t,n){$(this,e),this.version=t,this.transformResults=n})),cm=function(){function e(t,n){$(this,e),this.updateTime=t,this.exists=n}return J(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function lm(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var fm=J((function e(){$(this,e)}));function hm(e,t,n){e instanceof ym?function(e,t,n){var r=e.value.clone(),i=bm(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof gm?function(e,t,n){if(lm(e.precondition,t)){var r=bm(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(km(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function dm(e,t,n){e instanceof ym?function(e,t,n){if(lm(e.precondition,t)){var r=e.value.clone(),i=wm(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(mm(t),r).setHasLocalMutations()}}(e,t,n):e instanceof gm?function(e,t,n){if(lm(e.precondition,t)){var r=wm(e.fieldTransforms,n,t),i=t.data;i.setAll(km(e)),i.setAll(r),t.convertToFoundDocument(mm(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){lm(e.precondition,t)&&t.convertToNoDocument(ip.min())}(e,t)}function pm(e,t){var n,r=null,i=Z(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Jv(a.transform,o||null);null!=u&&(null==r&&(r=Qp.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function vm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&tp(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof em&&t instanceof em||e instanceof nm&&t instanceof nm?tp(e.elements,t.elements,Ap):e instanceof im&&t instanceof im?Ap(e.k,t.k):e instanceof Zv&&t instanceof Zv}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function mm(e){return e.isFoundDocument()?e.version:ip.min()}var ym=function(e){ne(n,e);var t=ue(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return $(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return J(n)}(fm),gm=function(e){ne(n,e);var t=ue(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return $(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return J(n)}(fm);function km(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function bm(e,t,n){var r=new Map;Ud(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Xv(o,u,n[i]))}return r}function wm(e,t,n){var r,i=new Map,a=Z(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,$v(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var _m,xm,Im=function(e){ne(n,e);var t=ue(n);function n(e,r){var i;return $(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return J(n)}(fm),Sm=function(e){ne(n,e);var t=ue(n);function n(e,r){var i;return $(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return J(n)}(fm),Tm=J((function e(t){$(this,e),this.count=t}));function Em(e){switch(e){default:return Fd();case jd.CANCELLED:case jd.UNKNOWN:case jd.DEADLINE_EXCEEDED:case jd.RESOURCE_EXHAUSTED:case jd.INTERNAL:case jd.UNAVAILABLE:case jd.UNAUTHENTICATED:return!1;case jd.INVALID_ARGUMENT:case jd.NOT_FOUND:case jd.ALREADY_EXISTS:case jd.PERMISSION_DENIED:case jd.FAILED_PRECONDITION:case jd.ABORTED:case jd.OUT_OF_RANGE:case jd.UNIMPLEMENTED:case jd.DATA_LOSS:return!0}}function Cm(e){if(void 0===e)return Od("GRPC error has no .code"),jd.UNKNOWN;switch(e){case _m.OK:return jd.OK;case _m.CANCELLED:return jd.CANCELLED;case _m.UNKNOWN:return jd.UNKNOWN;case _m.DEADLINE_EXCEEDED:return jd.DEADLINE_EXCEEDED;case _m.RESOURCE_EXHAUSTED:return jd.RESOURCE_EXHAUSTED;case _m.INTERNAL:return jd.INTERNAL;case _m.UNAVAILABLE:return jd.UNAVAILABLE;case _m.UNAUTHENTICATED:return jd.UNAUTHENTICATED;case _m.INVALID_ARGUMENT:return jd.INVALID_ARGUMENT;case _m.NOT_FOUND:return jd.NOT_FOUND;case _m.ALREADY_EXISTS:return jd.ALREADY_EXISTS;case _m.PERMISSION_DENIED:return jd.PERMISSION_DENIED;case _m.FAILED_PRECONDITION:return jd.FAILED_PRECONDITION;case _m.ABORTED:return jd.ABORTED;case _m.OUT_OF_RANGE:return jd.OUT_OF_RANGE;case _m.UNIMPLEMENTED:return jd.UNIMPLEMENTED;case _m.DATA_LOSS:return jd.DATA_LOSS;default:return Fd()}}(xm=_m||(_m={}))[xm.OK=0]="OK",xm[xm.CANCELLED=1]="CANCELLED",xm[xm.UNKNOWN=2]="UNKNOWN",xm[xm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xm[xm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xm[xm.NOT_FOUND=5]="NOT_FOUND",xm[xm.ALREADY_EXISTS=6]="ALREADY_EXISTS",xm[xm.PERMISSION_DENIED=7]="PERMISSION_DENIED",xm[xm.UNAUTHENTICATED=16]="UNAUTHENTICATED",xm[xm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xm[xm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xm[xm.ABORTED=10]="ABORTED",xm[xm.OUT_OF_RANGE=11]="OUT_OF_RANGE",xm[xm.UNIMPLEMENTED=12]="UNIMPLEMENTED",xm[xm.INTERNAL=13]="INTERNAL",xm[xm.UNAVAILABLE=14]="UNAVAILABLE",xm[xm.DATA_LOSS=15]="DATA_LOSS";var Nm=function(){function e(t,n){$(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return J(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Z(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){op(this.inner,(function(t,n){var r,i=Z(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return up(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Am=function(){function e(t,n){$(this,e),this.comparator=t,this.root=n||Dm.EMPTY}return J(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Dm.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Dm.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Rm(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Rm(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Rm(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Rm(this.root,e,this.comparator,!0)}}]),e}(),Rm=function(){function e(t,n,r,i){$(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return J(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Dm=function(){function e(t,n,r,i,a){$(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return J(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Fd();if(this.right.isRed())throw Fd();var e=this.left.check();if(e!==this.right.check())throw Fd();return e+(this.isRed()?0:1)}}]),e}();Dm.EMPTY=null,Dm.RED=!0,Dm.BLACK=!1,Dm.EMPTY=new(function(){function e(){$(this,e),this.size=0}return J(e,[{key:"key",get:function(){throw Fd()}},{key:"value",get:function(){throw Fd()}},{key:"color",get:function(){throw Fd()}},{key:"left",get:function(){throw Fd()}},{key:"right",get:function(){throw Fd()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Dm(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Pm=function(){function e(t){$(this,e),this.comparator=t,this.data=new Am(this.comparator)}return J(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Om(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Om(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Om=function(){function e(t){$(this,e),this.iter=t}return J(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Lm(e){return e.hasNext()?e.getNext():void 0}var Mm=new Am(Tp.comparator);function Fm(){return Mm}var Um=new Am(Tp.comparator);function Vm(){return Um}function jm(){return new Nm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Bm=new Am(Tp.comparator),zm=new Pm(Tp.comparator);function qm(){for(var e=zm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Km=new Pm(ep);function Wm(){return Km}var Gm=function(){function e(t,n,r,i,a){$(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return J(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Hm.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(ip.min(),r,Wm(),Fm(),qm())}}]),e}(),Hm=function(){function e(t,n,r,i,a){$(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return J(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(dp.EMPTY_BYTE_STRING,n,qm(),qm(),qm())}}]),e}(),Qm=J((function e(t,n,r,i){$(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),Ym=J((function e(t,n){$(this,e),this.targetId=t,this.$=n})),$m=J((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dp.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;$(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Xm=function(){function e(){$(this,e),this.B=0,this.L=ey(),this.U=dp.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return J(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=qm(),t=qm(),n=qm();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Fd()}})),new Hm(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=ey()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),Jm=function(){function e(t){$(this,e),this.nt=t,this.st=new Map,this.it=Fm(),this.rt=Zm(),this.ot=new Pm(ep)}return J(e,[{key:"ut",value:function(e){var t,n=Z(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=Z(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:Fd()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(lv(i))if(0===n){var a=new Tp(i.path);this.ct(t,a,$p.newNoDocument(a,ip.min()))}else Ud(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&lv(a.target)){var o=new Tp(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,$p.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=qm();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new Gm(e,n,this.ot,this.it,r);return this.it=Fm(),this.rt=Zm(),this.ot=new Pm(ep),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new Xm,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new Pm(ep),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||Pd("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new Xm),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Zm(){return new Am(Tp.comparator)}function ey(){return new Am(Tp.comparator)}var ty={asc:"ASCENDING",desc:"DESCENDING"},ny={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ry=J((function e(t,n){$(this,e),this.databaseId=t,this.N=n}));function iy(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ay(e,t){return e.N?t.toBase64():t.toUint8Array()}function oy(e,t){return iy(e,t.toTimestamp())}function uy(e){return Ud(!!e),ip.fromTimestamp(function(e){var t=vp(e);return new rp(t.seconds,t.nanos)}(e))}function sy(e,t){return function(e){return new cp(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function cy(e){var t=cp.fromString(e);return Ud(Dy(t)),t}function ly(e,t){return sy(e.databaseId,t.path)}function fy(e,t){var n=cy(t);if(n.get(1)!==e.databaseId.projectId)throw new Bd(jd.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Bd(jd.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Tp(vy(n))}function hy(e,t){return sy(e.databaseId,t)}function dy(e){var t=cy(e);return 4===t.length?cp.emptyPath():vy(t)}function py(e){return new cp(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function vy(e){return Ud(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function my(e,t,n){return{name:ly(e,t),fields:n.value.mapValue.fields}}function yy(e,t,n){var r=fy(e,t.name),i=uy(t.updateTime),a=new Qp({mapValue:{fields:t.fields}}),o=$p.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function gy(e,t){return"found"in t?function(e,t){Ud(!!t.found),t.found.name,t.found.updateTime;var n=fy(e,t.found.name),r=uy(t.found.updateTime),i=new Qp({mapValue:{fields:t.found.fields}});return $p.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Ud(!!t.missing),Ud(!!t.readTime);var n=fy(e,t.missing),r=uy(t.readTime);return $p.newNoDocument(n,r)}(e,t):Fd()}function ky(e,t){var n;if(t instanceof ym)n={update:my(e,t.key,t.value)};else if(t instanceof Im)n={delete:ly(e,t.key)};else if(t instanceof gm)n={update:my(e,t.key,t.data),updateMask:Ry(t.fieldMask)};else{if(!(t instanceof Sm))return Fd();n={verify:ly(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Zv)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof em)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof nm)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof im)return{fieldPath:t.field.canonicalString(),increment:n.k};throw Fd()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:oy(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Fd()}(e,t.precondition)),n}function by(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?cm.updateTime(uy(e.updateTime)):void 0!==e.exists?cm.exists(e.exists):cm.none()}(t.currentDocument):cm.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Ud("REQUEST_TIME"===t.setToServerValue),n=new Zv;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new em(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new nm(i)}else"increment"in t?n=new im(e,t.increment):Fd();var a=fp.fromServerFormat(t.fieldPath);return new um(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=fy(e,t.update.name),a=new Qp({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new hp(t.map((function(e){return fp.fromServerFormat(e)})))}(t.updateMask);return new gm(i,a,o,n,r)}return new ym(i,a,n,r)}if(t.delete){var u=fy(e,t.delete);return new Im(u,n)}if(t.verify){var s=fy(e,t.verify);return new Sm(s,n)}return Fd()}function wy(e,t){return{documents:[hy(e,t.path)]}}function _y(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=hy(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=hy(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(jp(e.value))return{unaryFilter:{field:Ey(e.field),op:"IS_NAN"}};if(Vp(e.value))return{unaryFilter:{field:Ey(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(jp(e.value))return{unaryFilter:{field:Ey(e.field),op:"IS_NOT_NAN"}};if(Vp(e.value))return{unaryFilter:{field:Ey(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ey(e.field),op:Ty(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Ey(e.field),direction:Sy(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||xp(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function xy(e){var t=dy(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ud(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Iy(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Iv(Cy(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return xp(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new xv(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new xv(n,t)}(n.endAt)),Nv(t,i,u,o,s,"F",c,l)}function Iy(e){return e?void 0!==e.unaryFilter?[Ay(e)]:void 0!==e.fieldFilter?[Ny(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Iy(e)})).reduce((function(e,t){return e.concat(t)})):Fd():[]}function Sy(e){return ty[e]}function Ty(e){return ny[e]}function Ey(e){return{fieldPath:e.canonicalString()}}function Cy(e){return fp.fromServerFormat(e.fieldPath)}function Ny(e){return pv.create(Cy(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fd()}}(e.fieldFilter.op),e.fieldFilter.value)}function Ay(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Cy(e.unaryFilter.field);return pv.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Cy(e.unaryFilter.field);return pv.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Cy(e.unaryFilter.field);return pv.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Cy(e.unaryFilter.field);return pv.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Fd()}}function Ry(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Dy(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Py(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Ly(t)),t=Oy(e.get(n),t);return Ly(t)}function Oy(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Ly(e){return e+"\x01\x01"}function My(e){var t=e.length;if(Ud(t>=2),2===t)return Ud("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),cp.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Fd(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Fd()}a=o+2}return new cp(r)}var Fy=["userId","batchId"];function Uy(e,t){return[e,Py(t)]}function Vy(e,t,n){return[e,Py(t),n]}var jy={},By=["prefixPath","collectionGroup","readTime","documentId"],zy=["prefixPath","collectionGroup","documentId"],qy=["collectionGroup","readTime","prefixPath","documentId"],Ky=["canonicalId","targetId"],Wy=["targetId","path"],Gy=["path","targetId"],Hy=["collectionId","parent"],Qy=["indexId","uid"],Yy=["uid","sequenceNumber"],$y=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Xy=["indexId","uid","orderedDocumentKey"],Jy=["userId","collectionPath","documentId"],Zy=["userId","collectionPath","largestBatchId"],eg=["userId","collectionGroup","largestBatchId"],tg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),ng=[].concat(Ke(tg),["documentOverlays"]),rg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ig=[].concat(rg,["indexConfiguration","indexState","indexEntries"]),ag="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",og=function(){function e(){$(this,e),this.onCommittedListeners=[]}return J(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),ug=function(){function e(t){var n=this;$(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return J(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Fd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Z(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),sg=function(){function e(t,n){var r=this;$(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new zd,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new fg(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=mg(e.target.error);r.At.reject(new fg(t,n))}}return J(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(Pd("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"Pt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new dg(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new fg(n,t)}}}]),e}(),cg=function(){function e(t,n,r){$(this,e),this.name=t,this.version=n,this.bt=r,12.2===e.Vt(ye())&&Od("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return J(e,[{key:"Nt",value:function(){var e=G(Q().mark((function e(t){var n=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Pd("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new fg(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Bd(jd.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Bd(jd.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new fg(t,n))},i.onupgradeneeded=function(e){Pd("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.bt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){Pd("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=G(Q().mark((function e(t,n,r,i){var a,o,u,s,c=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(Q().mark((function e(){var n,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=sg.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.Pt(),e})).catch((function(e){return n.abort(e),ug.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,Pd("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Pd("SimpleDb","Removing database:",e),pg(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!xe())return!1;if(e.St())return!0;var t=ye(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/Sokdak",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBOO00dRjx9jgdXt4zcKmo8rQbOHSLqFq8",REACT_APP_AUTH_DOMAIN:"twitter-9cbcb.firebaseapp.com",REACT_APP_PROJECT_ID:"twitter-9cbcb",REACT_APP_STORAGE_BUCKET:"twitter-9cbcb.appspot.com",REACT_APP_MESSAGIN_ID:"271120304067",REACT_APP_APP_ID:"1:271120304067:web:1e20e6da38d6a3b512df76"})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),lg=function(){function e(t){$(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return J(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return pg(this.Ft.delete())}}]),e}(),fg=function(e){ne(n,e);var t=ue(n);function n(e,r){var i;return $(this,n),(i=t.call(this,jd.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return J(n)}(Bd);function hg(e){return"IndexedDbTransactionError"===e.name}var dg=function(){function e(t){$(this,e),this.store=t}return J(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Pd("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Pd("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),pg(n)}},{key:"add",value:function(e){return Pd("SimpleDb","ADD",this.store.name,e,e),pg(this.store.add(e))}},{key:"get",value:function(e){var t=this;return pg(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Pd("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Pd("SimpleDb","DELETE",this.store.name,e),pg(this.store.delete(e))}},{key:"count",value:function(){return Pd("SimpleDb","COUNT",this.store.name),pg(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new ug((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new ug((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){Pd("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new ug((function(n,r){t.onerror=function(e){var t=mg(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new ug((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new lg(i),o=t(i.primaryKey,i.value,a);if(o instanceof ug){var u=o.catch((function(e){return a.done(),ug.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return ug.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function pg(e){return new ug((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=mg(e.target.error);n(t)}}))}var vg=!1;function mg(e){var t=cg.Vt(ye());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Bd("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return vg||(vg=!0,setTimeout((function(){throw r}),0)),r}}return e}var yg=function(e){ne(n,e);var t=ue(n);function n(e,r){var i;return $(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return J(n)}(og);function gg(e,t){var n=Vd(e);return cg.xt(n.Ht,t)}var kg=function(){function e(t,n,r,i){$(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return J(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&hm(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=Z(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&dm(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=Z(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&dm(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(ip.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),qm())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&tp(this.mutations,e.mutations,(function(e,t){return vm(e,t)}))&&tp(this.baseMutations,e.baseMutations,(function(e,t){return vm(e,t)}))}}]),e}(),bg=function(){function e(t,n,r,i){$(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return J(e,null,[{key:"from",value:function(t,n,r){Ud(t.mutations.length===r.length);for(var i=Bm,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),wg=function(){function e(t,n){$(this,e),this.largestBatchId=t,this.mutation=n}return J(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),_g=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ip.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ip.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:dp.EMPTY_BYTE_STRING;$(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return J(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),xg=J((function e(t){$(this,e),this.Jt=t}));function Ig(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Sg(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:ly(e,t.key),fields:t.data.value.mapValue.fields,updateTime:iy(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Tg(t.version)};else{if(!t.isUnknownDocument())return Fd();r.unknownDocument={path:n.path.toArray(),version:Tg(t.version)}}return r}function Sg(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Tg(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Eg(e){var t=new rp(e.seconds,e.nanoseconds);return ip.fromTimestamp(t)}function Cg(e,t){for(var n=(t.baseMutations||[]).map((function(t){return by(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return by(e.Jt,t)})),u=rp.fromMillis(t.localWriteTimeMs);return new kg(t.batchId,u,n,o)}function Ng(e){var t,n,r=Eg(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Eg(e.lastLimboFreeSnapshotVersion):ip.min();return void 0!==e.query.documents?(Ud(1===(n=e.query).documents.length),t=Fv(Av(dy(n.documents[0])))):t=function(e){return Fv(xy(e))}(e.query),new _g(t,e.targetId,0,e.lastListenSequenceNumber,r,i,dp.fromBase64String(e.resumeToken))}function Ag(e,t){var n,r=Tg(t.snapshotVersion),i=Tg(t.lastLimboFreeSnapshotVersion);n=lv(t.target)?wy(e.Jt,t.target):_y(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:sv(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Rg(e){var t=xy({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Uv(t,t.limit,"L"):t}function Dg(e,t){return new wg(t.largestBatchId,by(e.Jt,t.overlayMutation))}function Pg(e,t){var n=t.path.lastSegment();return[e,Py(t.path.popLast()),n]}var Og=function(){function e(){$(this,e)}return J(e,[{key:"getBundleMetadata",value:function(e,t){return Lg(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Eg(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Lg(e).put({bundleId:(n=t).id,createTime:Tg(uy(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Mg(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Rg(t.bundledQuery),readTime:Eg(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Mg(e).put(function(e){return{name:e.name,readTime:Tg(uy(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Lg(e){return gg(e,"bundles")}function Mg(e){return gg(e,"namedQueries")}var Fg=function(){function e(t,n){$(this,e),this.M=t,this.userId=n}return J(e,[{key:"getOverlay",value:function(e,t){var n=this;return Ug(e).get(Pg(this.userId,t)).next((function(e){return e?Dg(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new wg(t,a);i.push(r.Xt(e,o))})),ug.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Py(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Ug(e).Qt("collectionPathOverlayIndex",i))})),ug.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=jm(),a=Py(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ug(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=Z(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Dg(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=jm(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ug(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Dg(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return Ug(e).put(function(e,t,n){var r=c(Pg(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ky(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Ug(e){return gg(e,"documentOverlays")}var Vg=function(){function e(){$(this,e)}return J(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(mp(e.integerValue));else if("doubleValue"in e){var n=mp(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Ip(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(yp(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?qp(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Fd()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=Z(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),Tp.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function jg(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Bg(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=jg(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Vg.fe=new Vg;var zg=function(){function e(){$(this,e),this.buffer=new Uint8Array(1024),this.position=0}return J(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=Z(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=Z(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=Bg(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=Bg(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Pe",value:function(){this.be(255),this.be(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.be(0),this.be(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"be",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),qg=function(){function e(t){$(this,e),this.De=t}return J(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.Pe()}}]),e}(),Kg=function(){function e(t){$(this,e),this.De=t}return J(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),Wg=function(){function e(){$(this,e),this.De=new zg,this.Ce=new qg(this.De),this.xe=new Kg(this.De)}return J(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),Gg=function(){function e(t,n,r,i){$(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return J(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Hg(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Qg(e.arrayValue,t.arrayValue))?n:0!==(n=Qg(e.directionalValue,t.directionalValue))?n:Tp.comparator(e.documentKey,t.documentKey)}function Qg(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Yg=function(){function e(t){$(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=Z(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return J(e,[{key:"$e",value:function(e){var t=Jp(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=Zp(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=Z(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),$g=function(){function e(){$(this,e),this.qe=new Xg}return J(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),ug.resolve()}},{key:"getCollectionParents",value:function(e,t){return ug.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return ug.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return ug.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return ug.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return ug.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return ug.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return ug.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return ug.resolve()}},{key:"updateIndexEntries",value:function(e,t){return ug.resolve()}}]),e}(),Xg=function(){function e(){$(this,e),this.index={}}return J(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Pm(cp.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Pm(cp.comparator)).toArray()}}]),e}(),Jg=new Uint8Array(0),Zg=function(){function e(t,n){$(this,e),this.user=t,this.databaseId=n,this.Ke=new Xg,this.Ge=new Nm((function(e){return sv(e)}),(function(e,t){return cv(e,t)})),this.uid=t.uid||""}return J(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:Py(i)};return ek(e).put(a)}return ug.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[np(t),""],!1,!0);return ek(e).qt(r).next((function(e){var r,i=Z(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(My(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=nk(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=nk(e),r=rk(e),i=tk(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=tk(e),i=!0,a=new Map;return ug.forEach(this.Qe(t),(function(t){return n.getFieldIndex(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=qm(),o=[];return ug.forEach(a,(function(i,a){var u;Pd("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(sv(t)));var s=function(e,t){var n=Jp(t);if(void 0===n)return null;var r,i=Z(fv(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=Z(Zp(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Z(fv(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=Z(Zp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?hv(e,o.fieldPath,e.startAt):dv(e,o.fieldPath,e.startAt);if(!u.value)return null;r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new xv(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=Z(Zp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?dv(e,o.fieldPath,e.endAt):hv(e,o.fieldPath,e.endAt);if(!u.value)return null;r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new xv(r,i)}(a,i),h=n.je(i,a,l),d=n.je(i,a,f),p=n.We(i,a,c),v=n.ze(i.indexId,s,h,!!l&&l.inclusive,d,!!f&&f.inclusive,p);return ug.forEach(v,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=Tp.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return ug.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.He(t[s/c]):Jg,h=n?u.Je(e,f,n[s%c],r):u.Ye(e),d=i?u.Xe(e,f,i[s%c],a):u.Ye(e+1);l.push.apply(l,Ke(u.createRange(h,d,o.map((function(t){return u.Je(e,f,t,!0)})))))},h=0;h<s;++h)f(h);return l}},{key:"Je",value:function(e,t,n,r){var i=new Gg(e,Tp.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new Gg(e,Tp.empty(),t,n);return r?i.ke():i}},{key:"Ye",value:function(e){return new Gg(e,Tp.empty(),Jg,Jg)}},{key:"getFieldIndex",value:function(e,t){var n=new Yg(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=e.filter((function(e){return n.$e(e)}));return t.sort((function(e,t){return t.fields.length-e.fields.length})),t.length>0?t[0]:null}))}},{key:"Ze",value:function(e,t){var n,r=new Wg,i=Z(Zp(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);Vg.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"He",value:function(e){var t=new Wg;return Vg.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new Wg;return Vg.fe.Zt(Mp(this.databaseId,t),n.Ne(function(e){var t=Zp(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Wg);var i,a=0,o=Z(Zp(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Z(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.en(t,s.fieldPath)&&Up(c))r=this.nn(r,s,c);else{var h=f.Ne(s.kind);Vg.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=Ke(e),a=[],o=Z(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Z(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Wg;f.seed(l.Se()),Vg.fe.Zt(s,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof pv&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=nk(e),i=rk(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return ug.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new tv(t.sequenceNumber,new iv(Eg(t.readTime),new Tp(My(t.documentKey)),t.largestBatchId)):tv.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new ev(fp.fromServerFormat(n),r)}));return new Xp(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:ep(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=nk(e),a=rk(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return ug.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Tg(r.readTime),documentKey:Py(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return ug.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?ug.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),ug.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?ug.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return tk(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return tk(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=tk(e),i=new Pm(Hg);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new Gg(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new Pm(Hg),r=this.Ze(t,e);if(null==r)return n;var i=Jp(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Up(a)){var o,u=Z(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Gg(t.indexId,e.key,this.He(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Gg(t.indexId,e.key,Jg,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;Pd("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Lm(a),s=Lm(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Lm(o)):l?(i(u),u=Lm(a)):(u=Lm(a),s=Lm(o))}}(r,i,Hg,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),ug.waitFor(o)}},{key:"rn",value:function(e){var t=1;return rk(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Hg(e,t)})).filter((function(e,t,n){return!t||0!==Hg(e,n[t-1])}));var r=[];r.push(e);var i,a=Z(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Hg(o,e),s=Hg(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Jg,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Jg,[]]));return c}}]),e}();function ek(e){return gg(e,"collectionParents")}function tk(e){return gg(e,"indexEntries")}function nk(e){return gg(e,"indexConfiguration")}function rk(e){return gg(e,"indexState")}var ik={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ak=function(){function e(t,n,r){$(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return J(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function ok(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Ud(1===u)})));var c,l=[],f=Z(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Vy(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return ug.waitFor(a).next((function(){return l}))}function uk(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Fd();t=e.noDocument}return JSON.stringify(t).length}ak.DEFAULT_COLLECTION_PERCENTILE=10,ak.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ak.DEFAULT=new ak(41943040,ak.DEFAULT_COLLECTION_PERCENTILE,ak.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ak.DISABLED=new ak(-1,0,0);var sk=function(){function e(t,n,r,i){$(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return J(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lk(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=fk(e),o=lk(e);return o.add({}).next((function(u){Ud("number"==typeof u);var s,c=new kg(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return ky(e.Jt,t)})),i=n.mutations.map((function(t){return ky(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new Pm((function(e,t){return ep(e.canonicalString(),t.canonicalString())})),d=Z(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Vy(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,jy))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[u]=c.keys()})),ug.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return lk(e).get(t).next((function(e){return e?(Ud(e.userId===n.userId),Cg(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?ug.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return lk(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Ud(t.batchId>=r),a=Cg(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return lk(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lk(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return Cg(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Uy(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return fk(e).Wt({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=My(l);if(s===n.userId&&t.path.isEqual(h))return lk(e).get(f).next((function(e){if(!e)throw Fd();Ud(e.userId===n.userId),a.push(Cg(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Pm(ep),i=[];return t.forEach((function(t){var a=Uy(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=fk(e).Wt({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],f=My(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),ug.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Uy(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Pm(ep);return fk(e).Wt({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],f=o[2],h=My(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.dn(e,u)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(lk(e).get(t).next((function(e){if(null===e)throw Fd();Ud(e.userId===n.userId),r.push(Cg(n.M,e))})))})),ug.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return ok(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),ug.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return ug.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return fk(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=My(e[1]);i.push(a)}else r.done()})).next((function(){Ud(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return ck(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return hk(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return Ud(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function ck(e,t,n){var r=Uy(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return fk(e).Wt({range:a,jt:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function lk(e){return gg(e,"mutations")}function fk(e){return gg(e,"documentMutations")}function hk(e){return gg(e,"mutationQueues")}var dk=function(){function e(t){$(this,e),this.mn=t}return J(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),pk=function(){function e(t,n){$(this,e),this.referenceDelegate=t,this.M=n}return J(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new dk(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return ip.fromTimestamp(new rp(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return vk(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return Ud(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return vk(e).Wt((function(o,u){var s=Ng(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return ug.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return vk(e).Wt((function(e,n){var r=Ng(n);t(r)}))}},{key:"pn",value:function(e){return mk(e).get("targetGlobalKey").next((function(e){return Ud(null!==e),e}))}},{key:"In",value:function(e,t){return mk(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return vk(e).put(Ag(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=sv(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return vk(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Ng(n);cv(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=yk(e);return t.forEach((function(t){var o=Py(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),ug.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=yk(e);return ug.forEach(t,(function(t){var a=Py(t.path);return ug.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=yk(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=yk(e),i=qm();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=My(e[1]),a=new Tp(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Py(t.path),r=IDBKeyRange.bound([n],[np(n)],!1,!0),i=0;return yk(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return vk(e).get(t).next((function(e){return e?Ng(e):null}))}}]),e}();function vk(e){return gg(e,"targets")}function mk(e){return gg(e,"targetGlobal")}function yk(e){return gg(e,"targetDocuments")}function gk(e){return kk.apply(this,arguments)}function kk(){return kk=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===jd.FAILED_PRECONDITION&&t.message===ag){e.next=2;break}throw t;case 2:Pd("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),kk.apply(this,arguments)}function bk(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=ep(r,o);return 0===s?ep(i,u):s}var wk=function(){function e(t){$(this,e),this.An=t,this.buffer=new Pm(bk),this.Rn=0}return J(e,[{key:"Pn",value:function(){return++this.Rn}},{key:"bn",value:function(e){var t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();bk(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),_k=function(){function e(t,n){$(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return J(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;Pd("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,G(Q().mark((function n(){return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!hg(n.t0)){n.next=12;break}Pd("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,gk(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),xk=function(){function e(t,n){$(this,e),this.Dn=t,this.params=n}return J(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return ug.resolve(Xd.A);var r=new wk(t);return this.Dn.forEachTarget(e,(function(e){return r.bn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.bn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Pd("LruGarbageCollector","Garbage collection skipped; disabled"),ug.resolve(ik)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Pd("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),ik):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Pd("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Dd()<=Ye.DEBUG&&Pd("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),ug.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Ik=function(){function e(t,n){$(this,e),this.db=t,this.garbageCollector=function(e,t){return new xk(e,t)}(this,n)}return J(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Sk(e,n)}},{key:"removeReference",value:function(e,t,n){return Sk(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Sk(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return hk(e).zt((function(r){return ck(e,r,t).next((function(e){return e&&(n=!0),ug.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,u){if(u<=t){var s=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,ip.min()),yk(e).delete([0,Py(o.path)])}))}));i.push(s)}})).next((function(){return ug.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Sk(e,t)}},{key:"Mn",value:function(e,t){var n,r=yk(e),i=Xd.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Xd.A&&t(new Tp(My(n)),i),i=s,n=u):i=Xd.A})).next((function(){i!==Xd.A&&t(new Tp(My(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Sk(e,t){return yk(e).put(function(e,t){return{targetId:0,path:Py(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Tk=function(){function e(){$(this,e),this.changes=new Nm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return J(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,$p.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?ug.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Ek=function(){function e(t){$(this,e),this.M=t}return J(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Ak(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Ak(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Sg(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=$p.newInvalidDocument(t);return Ak(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Rk(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:$p.newInvalidDocument(t)};return Ak(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Rk(t))},(function(e,i){r={document:n.$n(t,i),size:uk(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Fm();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=Fm(),i=new Am(Tp.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,uk(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return ug.resolve();var r=new Pm(Pk);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Rk(r.first()),Rk(r.last())),a=r.getIterator(),o=a.getNext();return Ak(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Tp.fromSegments([].concat(Ke(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Pk(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(Rk(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Sg(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ak(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Fm(),i=Z(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(Tp.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Fm(),o=Dk(t,n),u=Dk(t,iv.max());return Ak(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.$n(Tp.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Ck(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Nk(e).get("remoteDocumentGlobalKey").next((function(e){return Ud(!!e),e}))}},{key:"Fn",value:function(e,t){return Nk(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=yy(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Tp.fromSegments(t.noDocument.path),i=Eg(t.noDocument.readTime);n=$p.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Fd();var a=Tp.fromSegments(t.unknownDocument.path),o=Eg(t.unknownDocument.version);n=$p.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new rp(e[0],e[1]);return ip.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(ip.min()))return n}return $p.newInvalidDocument(e)}}]),e}(),Ck=function(e){ne(n,e);var t=ue(n);function n(e,r){var i;return $(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new Nm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return J(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Pm((function(e,t){return ep(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Ig(t.Kn.M,o);i=i.add(a.path.popLast());var c=uk(s);r+=c-u.size,n.push(t.Kn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Ig(t.Kn.M,o.convertToNoDocument(ip.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),ug.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Tk);function Nk(e){return gg(e,"remoteDocumentGlobal")}function Ak(e){return gg(e,"remoteDocumentsV14")}function Rk(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Dk(e,t){var n=t.documentKey.path.toArray();return[e,Sg(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Pk(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=ep(n[a],r[a]))return i;return(i=ep(n.length,r.length))||((i=ep(n[n.length-2],r[r.length-2]))||ep(n[n.length-1],r[r.length-1]))}var Ok=function(){function e(t){$(this,e),this.M=t}return J(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new sg("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Fy,{unique:!0}),e.createObjectStore("documentMutations")}(e),Lk(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=ug.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Lk(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ip.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Fy,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return ug.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Jy});t.createIndex("collectionPathOverlayIndex",Zy,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",eg,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:By});t.createIndex("documentKeyIndex",zy),t.createIndex("collectionGroupIndex",qy)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Qy}).createIndex("sequenceNumberIndex",Yy,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:$y}).createIndex("documentKeyIndex",Xy,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=uk(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return ug.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return ug.forEach(r,(function(r){Ud(r.userId===n.userId);var i=Cg(t.M,r);return ok(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new cp(n),o=function(e){return[0,Py(e)]}(a);r.push(t.get(o).next((function(n){return n?ug.resolve():function(n){return t.put({targetId:0,path:Py(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return ug.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Hy});var n=t.store("collectionParents"),r=new Xg,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Py(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new cp(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],My(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=Ng(r),a=Ag(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Tp(cp.fromString(i.document.name).popFirst(5)):i.noDocument?Tp.fromSegments(i.noDocument.path):i.unknownDocument?Tp.fromSegments(i.unknownDocument.path):Fd()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return ug.waitFor(r)}))}}]),e}();function Lk(e){e.createObjectStore("targetDocuments",{keyPath:Wy}).createIndex("documentTargetsIndex",Gy,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ky,{unique:!0}),e.createObjectStore("targetGlobal")}var Mk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Fk=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if($(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=u,this.Xn=c,this.Zn=l,this.ts=f,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new Bd(jd.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ik(this,i),this.hs=n+"main",this.M=new xg(s),this.ls=new cg(this.hs,this.ts,new Ok(this.M)),this.fs=new pk(this.referenceDelegate,this.M),this.ds=function(e){return new Ek(e)}(this.M),this._s=new Og,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&Od("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return J(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Bd(jd.FAILED_PRECONDITION,Mk);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new Xd(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=G(Q().mark((function n(r){return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=G(Q().mark((function t(n){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Vk(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.Ps(t).next((function(){return!0}))}))})).catch((function(t){if(hg(t))return Pd("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Pd("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return Uk(e).get("owner").next((function(e){return ug.resolve(t.bs(e))}))}},{key:"Vs",value:function(e){return Vk(e).delete(this.clientId)}},{key:"vs",value:function(){var e=G(Q().mark((function e(){var t,n,r,i,a=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=gg(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return ug.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=Z(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"bs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?ug.resolve(!0):Uk(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.bs(n)&&t.networkEnabled)return!0;if(!t.bs(n)){if(!n.allowTabSynchronization)throw new Bd(jd.FAILED_PRECONDITION,Mk);return!1}}return!(!t.networkEnabled||!t.inForeground)||Vk(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Pd("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=G(Q().mark((function e(){var t=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new yg(e,Xd.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Vk(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return sk.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new Zg(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Fg.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;Pd("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.ts)?ig:13===i?rg:12===i?ng:11===i?tg:void Fd();return this.ls.runTransaction(e,o,u,(function(i){return a=new yg(i,r.es?r.es.next():Xd.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw Od("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new Bd(jd.FAILED_PRECONDITION,ag);return n(a)})).next((function(e){return r.Ps(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return Uk(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.bs(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Bd(jd.FAILED_PRECONDITION,Mk)}))}},{key:"Ps",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Uk(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=Uk(e);return n.get("owner").next((function(e){return t.bs(e)?(Pd("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):ug.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Od("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!ke()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Pd("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Od("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(Cc){Od("Failed to set zombie client id.",Cc)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(Cc){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return cg.vt()}}]),e}();function Uk(e){return gg(e,"owner")}function Vk(e){return gg(e,"clientMetadata")}function jk(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Bk=function(){function e(t,n,r){$(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return J(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=Z(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=Z(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return Tp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):Lv(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new Tp(t)).next((function(e){var t=Vm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Vm();return this.indexManager.getCollectionParents(e,i).next((function(o){return ug.forEach(o,(function(o){var u=function(e,t){return new Cv(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=Z(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=Z(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=$p.newInvalidDocument(s),r=r.insert(s,c)),dm(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){zv(t,n)||(r=r.remove(e))})),r}))}}]),e}(),zk=function(){function e(t,n,r,i){$(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return J(e,null,[{key:"Ys",value:function(t,n){var r,i=qm(),a=qm(),o=Z(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),qk=function(){function e(){$(this,e)}return J(e,[{key:"Xs",value:function(e){this.Zs=e}},{key:"Qs",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(ip.min())?this.ti(e,t):this.Zs.Ks(e,r).next((function(a){var o=i.ei(t,a);return(Rv(t)||Dv(t))&&i.ni(t.limitType,o,r,n)?i.ti(e,t):(Dd()<=Ye.DEBUG&&Pd("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Bv(t)),i.Zs.Qs(e,t,nv(n,-1)).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ei",value:function(e,t){var n=new Pm(Kv(e));return t.forEach((function(t,r){zv(e,r)&&(n=n.add(r))})),n}},{key:"ni",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ti",value:function(e,t){return Dd()<=Ye.DEBUG&&Pd("QueryEngine","Using full collection scan to execute query:",Bv(t)),this.Zs.Qs(e,t,iv.min())}}]),e}(),Kk=function(){function e(t,n,r,i){$(this,e),this.persistence=t,this.si=n,this.M=i,this.ii=new Am(ep),this.ri=new Nm((function(e){return sv(e)}),cv),this.oi=new Map,this.ui=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.ai(r)}return J(e,[{key:"ai",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new Bk(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ii)}))}}]),e}();function Wk(e,t,n,r){return new Kk(e,t,n,r)}function Gk(e,t){return Hk.apply(this,arguments)}function Hk(){return Hk=G(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vd(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.ai(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=qm(),s=Z(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Z(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Z(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=Z(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.ci.Ks(e,u).next((function(e){return{hi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Hk.apply(this,arguments)}function Qk(e,t){var n=Vd(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=ug.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Ud(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.ci.Ks(e,r)}))}))}function Yk(e){var t=Vd(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function $k(e,t){var n=Vd(e),r=t.snapshotVersion,i=n.ii;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ui.newChangeBuffer({trackRemovals:!0});i=n.ii;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(dp.EMPTY_BYTE_STRING,ip.min()).withLastLimboFreeSnapshotVersion(ip.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var u=Fm();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Xk(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(ip.min())){var s=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return ug.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.ci.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.ii=i,e}))}function Xk(e,t,n){var r=qm();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Fm();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(ip.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Pd("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function Jk(e,t){var n=Vd(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function Zk(e,t){var n=Vd(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,ug.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new _g(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ii.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ii=n.ii.insert(e.targetId,e),n.ri.set(t,e.targetId)),e}))}function eb(e,t,n){return tb.apply(this,arguments)}function tb(){return tb=G(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Vd(t),a=i.ii.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),hg(e.t1)){e.next=12;break}throw e.t1;case 12:Pd("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ii=i.ii.remove(n),i.ri.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),tb.apply(this,arguments)}function nb(e,t,n){var r=Vd(e),i=ip.min(),a=qm();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Vd(e),i=r.ri.get(n);return void 0!==i?ug.resolve(r.ii.get(i)):r.fs.getTargetData(t,n)}(r,e,Fv(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.si.Qs(e,t,n?i:ip.min(),n?a:qm())})).next((function(e){return ab(r,qv(t),e),{documents:e,li:a}}))}))}function rb(e,t){var n=Vd(e),r=Vd(n.fs),i=n.ii.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function ib(e,t){var n=Vd(e),r=n.oi.get(t)||ip.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.ui.getAllFromCollectionGroup(e,t,nv(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return ab(n,t,e),e}))}function ab(e,t,n){var r=ip.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.oi.set(t,r)}function ob(e,t,n,r){return ub.apply(this,arguments)}function ub(){return ub=G(Q().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Vd(t),o=qm(),u=Fm(),s=Z(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.fi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.di(l)).setReadTime(n._i(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.ui.newChangeBuffer({trackRemovals:!0}),e.next=7,Zk(a,function(e){return Fv(Av(cp.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Xk(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.fs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.ci.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),ub.apply(this,arguments)}function sb(e,t){return cb.apply(this,arguments)}function cb(){return cb=G(Q().mark((function e(t,n){var r,i,a,o=arguments;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:qm(),e.next=3,Zk(t,Fv(Rg(n.bundledQuery)));case 3:return i=e.sent,a=Vd(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=uy(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(dp.EMPTY_BYTE_STRING,t);return a.ii=a.ii.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),cb.apply(this,arguments)}var lb=function(){function e(t){$(this,e),this.M=t,this.wi=new Map,this.mi=new Map}return J(e,[{key:"getBundleMetadata",value:function(e,t){return ug.resolve(this.wi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.wi.set(t.id,{id:(n=t).id,version:n.version,createTime:uy(n.createTime)}),ug.resolve()}},{key:"getNamedQuery",value:function(e,t){return ug.resolve(this.mi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.mi.set(t.name,function(e){return{name:e.name,query:Rg(e.bundledQuery),readTime:uy(e.readTime)}}(t)),ug.resolve()}}]),e}(),fb=function(){function e(){$(this,e),this.overlays=new Am(Tp.comparator),this.gi=new Map}return J(e,[{key:"getOverlay",value:function(e,t){return ug.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),ug.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.gi.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.gi.delete(n)),ug.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=jm(),i=t.length+1,a=new Tp(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return ug.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Am((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=jm(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=jm(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return ug.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.gi.get(r.largestBatchId).delete(n.key);this.gi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new wg(t,n));var a=this.gi.get(t);void 0===a&&(a=qm(),this.gi.set(t,a)),this.gi.set(t,a.add(n.key))}}}]),e}(),hb=function(){function e(){$(this,e),this.yi=new Pm(db.pi),this.Ii=new Pm(db.Ti)}return J(e,[{key:"isEmpty",value:function(){return this.yi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new db(e,t);this.yi=this.yi.add(n),this.Ii=this.Ii.add(n)}},{key:"Ei",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ai(new db(e,t))}},{key:"Ri",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Pi",value:function(e){var t=this,n=new Tp(new cp([])),r=new db(n,e),i=new db(n,e+1),a=[];return this.Ii.forEachInRange([r,i],(function(e){t.Ai(e),a.push(e.key)})),a}},{key:"bi",value:function(){var e=this;this.yi.forEach((function(t){return e.Ai(t)}))}},{key:"Ai",value:function(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}},{key:"Vi",value:function(e){var t=new Tp(new cp([])),n=new db(t,e),r=new db(t,e+1),i=qm();return this.Ii.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new db(e,0),n=this.yi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),db=function(){function e(t,n){$(this,e),this.key=t,this.vi=n}return J(e,null,[{key:"pi",value:function(e,t){return Tp.comparator(e.key,t.key)||ep(e.vi,t.vi)}},{key:"Ti",value:function(e,t){return ep(e.vi,t.vi)||Tp.comparator(e.key,t.key)}}]),e}(),pb=function(){function e(t,n){$(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.Si=1,this.Di=new Pm(db.pi)}return J(e,[{key:"checkEmpty",value:function(e){return ug.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.Si;this.Si++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new kg(i,t,n,r);this.Bs.push(a);var o,u=Z(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Di=this.Di.add(new db(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return ug.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return ug.resolve(this.Ci(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.xi(n),i=r<0?0:r;return ug.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return ug.resolve(0===this.Bs.length?-1:this.Si-1)}},{key:"getAllMutationBatches",value:function(e){return ug.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new db(t,0),i=new db(t,Number.POSITIVE_INFINITY),a=[];return this.Di.forEachInRange([r,i],(function(e){var t=n.Ci(e.vi);a.push(t)})),ug.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Pm(ep);return t.forEach((function(e){var t=new db(e,0),i=new db(e,Number.POSITIVE_INFINITY);n.Di.forEachInRange([t,i],(function(e){r=r.add(e.vi)}))})),ug.resolve(this.Ni(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Tp.isDocumentKey(i)||(i=i.child(""));var a=new db(new Tp(i),0),o=new Pm(ep);return this.Di.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.vi)),!0)}),a),ug.resolve(this.Ni(o))}},{key:"Ni",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ci(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Ud(0===this.ki(t.batchId,"removed")),this.Bs.shift();var r=this.Di;return ug.forEach(t.mutations,(function(i){var a=new db(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Di=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new db(t,0),r=this.Di.firstAfterOrEqual(n);return ug.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,ug.resolve()}},{key:"ki",value:function(e,t){return this.xi(e)}},{key:"xi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"Ci",value:function(e){var t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),vb=function(){function e(t){$(this,e),this.Mi=t,this.docs=new Am(Tp.comparator),this.size=0}return J(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Mi(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return ug.resolve(n?n.document.mutableCopy():$p.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Fm();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():$p.newInvalidDocument(e))})),ug.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Fm(),i=new Tp(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||av(rv(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return ug.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Fd()}},{key:"Oi",value:function(e,t){return ug.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new mb(this)}},{key:"getSize",value:function(e){return ug.resolve(this.size)}}]),e}(),mb=function(e){ne(n,e);var t=ue(n);function n(e){var r;return $(this,n),(r=t.call(this)).Kn=e,r}return J(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),ug.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(Tk),yb=function(){function e(t){$(this,e),this.persistence=t,this.Fi=new Nm((function(e){return sv(e)}),cv),this.lastRemoteSnapshotVersion=ip.min(),this.highestTargetId=0,this.$i=0,this.Bi=new hb,this.targetCount=0,this.Li=dk.gn()}return J(e,[{key:"forEachTarget",value:function(e,t){return this.Fi.forEach((function(e,n){return t(n)})),ug.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return ug.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return ug.resolve(this.$i)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Li.next(),ug.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$i&&(this.$i=t),ug.resolve()}},{key:"Tn",value:function(e){this.Fi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Li=new dk(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,ug.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),ug.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,ug.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Fi.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Fi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),ug.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return ug.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Fi.get(t)||null;return ug.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Bi.Ei(t,n),ug.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Bi.Ri(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),ug.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Bi.Pi(t),ug.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Bi.Vi(t);return ug.resolve(n)}},{key:"containsKey",value:function(e,t){return ug.resolve(this.Bi.containsKey(t))}}]),e}(),gb=function(){function e(t,n){var r=this;$(this,e),this.Ui={},this.overlays={},this.es=new Xd(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new yb(this),this.indexManager=new $g,this.ds=new vb((function(e){return r.referenceDelegate.qi(e)})),this.M=new xg(n),this._s=new lb(this.M)}return J(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new fb,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ui[e.toKey()];return n||(n=new pb(t,this.referenceDelegate),this.Ui[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;Pd("MemoryPersistence","Starting transaction:",e);var i=new kb(this.es.next());return this.referenceDelegate.Ki(),n(i).next((function(e){return r.referenceDelegate.Gi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Qi",value:function(e,t){return ug.or(Object.values(this.Ui).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),kb=function(e){ne(n,e);var t=ue(n);function n(e){var r;return $(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return J(n)}(og),bb=function(){function e(t){$(this,e),this.persistence=t,this.ji=new hb,this.Wi=null}return J(e,[{key:"Hi",get:function(){if(this.Wi)return this.Wi;throw Fd()}},{key:"addReference",value:function(e,t,n){return this.ji.addReference(n,t),this.Hi.delete(n.toString()),ug.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ji.removeReference(n,t),this.Hi.add(n.toString()),ug.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Hi.add(t.toString()),ug.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ji.Pi(t.targetId).forEach((function(e){return n.Hi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Hi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ki",value:function(){this.Wi=new Set}},{key:"Gi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ug.forEach(this.Hi,(function(r){var i=Tp.fromPath(r);return t.Ji(e,i).next((function(e){e||n.removeEntry(i,ip.min())}))})).next((function(){return t.Wi=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ji(e,t).next((function(e){e?n.Hi.delete(t.toString()):n.Hi.add(t.toString())}))}},{key:"qi",value:function(e){return 0}},{key:"Ji",value:function(e,t){var n=this;return ug.or([function(){return ug.resolve(n.ji.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Qi(e,t)}])}}],[{key:"zi",value:function(t){return new e(t)}}]),e}();function wb(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function _b(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function xb(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Ib=function(){function e(t,n,r,i){$(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return J(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Yi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Bd(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Od("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Sb=function(){function e(t,n,r){$(this,e),this.targetId=t,this.state=n,this.error=r}return J(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Yi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Bd(i.error.code,i.error.message))),a?new e(t,i.state,r):(Od("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Tb=function(){function e(t,n){$(this,e),this.clientId=t,this.activeTargetIds=n}return J(e,null,[{key:"Yi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Wm(),o=0;i&&o<r.activeTargetIds.length;++o)i=Sp(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Od("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Eb=function(){function e(t,n){$(this,e),this.clientId=t,this.onlineState=n}return J(e,null,[{key:"Yi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Od("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Cb=function(){function e(){$(this,e),this.activeTargetIds=Wm()}return J(e,[{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Nb=function(){function e(t,n,r,i,a){$(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Am(ep),this.started=!1,this.rr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ur=wb(this.persistenceKey,this.er),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ir=this.ir.insert(this.er,new Cb),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.hr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.lr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.dr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._r=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}return J(e,[{key:"start",value:function(){var e=G(Q().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=Z(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.er){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(wb(this.persistenceKey,i)))&&(o=Tb.Yi(i,a))&&(this.ir=this.ir.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.wr(),(u=this.storage.getItem(this.dr))&&(s=this.mr(u))&&this.gr(s),c=Z(this.rr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.sr(f)}catch(d){c.e(d)}finally{c.f()}this.rr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.yr(this.ir)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ir.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.pr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.pr(e,t,n),this.Ir(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(xb(this.persistenceKey,e));if(n){var r=Sb.Yi(e,n);r&&(t=r.state)}}return this.Tr.Zi(e),this.wr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Tr.tr(e),this.wr()}},{key:"isLocalQueryTarget",value:function(e){return this.Tr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(xb(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Er(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ir(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Ar(e)}},{key:"notifyBundleLoaded",value:function(e){this.Rr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Pd("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Pd("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Pd("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"sr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Pd("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ur)return void Od("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(G(Q().mark((function e(){var r,i,a,o,u,s,c;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Pr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Vr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.hr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Sr(a));case 16:e.next=41;break;case 18:if(!t.lr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Dr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Cr(o));case 23:e.next=41;break;case 25:if(n.key!==t.dr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.mr(n.newValue))){e.next=30;break}return e.abrupt("return",t.gr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ar){e.next=37;break}s=function(e){var t=Xd.A;if(null!=e)try{var n=JSON.parse(e);Ud("number"==typeof n),t=n}catch(e){Od("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Xd.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t._r){e.next=41;break}return c=t.Nr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.kr(e)})));case 41:e.next=44;break;case 43:t.rr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Tr",get:function(){return this.ir.get(this.er)}},{key:"wr",value:function(){this.setItem(this.ur,this.Tr.Xi())}},{key:"pr",value:function(e,t,n){var r=new Ib(this.currentUser,e,t,n),i=_b(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Xi())}},{key:"Ir",value:function(e){var t=_b(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Ar",value:function(e){var t={clientId:this.er,onlineState:e};this.storage.setItem(this.dr,JSON.stringify(t))}},{key:"Er",value:function(e,t,n){var r=xb(this.persistenceKey,e),i=new Sb(e,t,n);this.setItem(r,i.Xi())}},{key:"Rr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}},{key:"Pr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Vr",value:function(e,t){var n=this.Pr(e);return Tb.Yi(n,t)}},{key:"vr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ib.Yi(new Nd(i),r,t)}},{key:"Dr",value:function(e,t){var n=this.lr.exec(e),r=Number(n[1]);return Sb.Yi(r,t)}},{key:"mr",value:function(e){return Eb.Yi(e)}},{key:"Nr",value:function(e){return JSON.parse(e)}},{key:"Sr",value:function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Mr(t.batchId,t.state,t.error));case 2:Pd("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Cr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.ir.insert(e,t):this.ir.remove(e),i=this.yr(this.ir),a=this.yr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Fr(o,u).then((function(){n.ir=r}))}},{key:"gr",value:function(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"yr",value:function(e){var t=Wm();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Ab=function(){function e(){$(this,e),this.$r=new Cb,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return J(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.$r.Zi(e),this.Br[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Br[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.$r.tr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.$r.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Br[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.$r.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.$r.activeTargetIds.has(e)}},{key:"start",value:function(){return this.$r=new Cb,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Rb=function(){function e(){$(this,e)}return J(e,[{key:"Lr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Db=function(){function e(){var t=this;$(this,e),this.Ur=function(){return t.qr()},this.Kr=function(){return t.Gr()},this.Qr=[],this.jr()}return J(e,[{key:"Lr",value:function(e){this.Qr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}},{key:"qr",value:function(){Pd("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Z(this.Qr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Gr",value:function(){Pd("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Z(this.Qr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Pb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Ob=function(){function e(t){$(this,e),this.Wr=t.Wr,this.zr=t.zr}return J(e,[{key:"Hr",value:function(e){this.Jr=e}},{key:"Yr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.Zr=e}},{key:"close",value:function(){this.zr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"eo",value:function(){this.Jr()}},{key:"no",value:function(e){this.Xr(e)}},{key:"so",value:function(e){this.Zr(e)}}]),e}(),Lb=function(e){ne(n,e);var t=ue(n);function n(e){var r;return $(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return J(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Ed;o.listenOnce(_d.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case wd.NO_ERROR:var t=o.getResponseJson();Pd("Connection","XHR received:",JSON.stringify(t)),i(t);break;case wd.TIMEOUT:Pd("Connection",'RPC "'+e+'" timed out'),a(new Bd(jd.DEADLINE_EXCEEDED,"Request time out"));break;case wd.HTTP_ERROR:var n=o.getStatus();if(Pd("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(jd).indexOf(t)>=0?t:jd.UNKNOWN}(r.status);a(new Bd(u,r.message))}else a(new Bd(jd.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Bd(jd.UNAVAILABLE,"Connection failed."));break;default:Fd()}}finally{Pd("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"lo",value:function(e,t,n){var r=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=kd(),a=bd(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Sd({})),this.ao(o.initMessageHeaders,t,n),ge()||we()||ye().indexOf("Electron/")>=0||_e()||ye().indexOf("MSAppHost/")>=0||be()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Pd("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new Ob({Wr:function(e){l?Pd("Connection","Not sending because WebChannel is closed:",e):(c||(Pd("Connection","Opening WebChannel transport."),s.open(),c=!0),Pd("Connection","WebChannel sending:",e),s.send(e))},zr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Td.EventType.OPEN,(function(){l||Pd("Connection","WebChannel transport opened.")})),h(s,Td.EventType.CLOSE,(function(){l||(l=!0,Pd("Connection","WebChannel transport closed"),f.no())})),h(s,Td.EventType.ERROR,(function(e){l||(l=!0,Ld("Connection","WebChannel transport errored:",e),f.no(new Bd(jd.UNAVAILABLE,"The operation could not be completed")))})),h(s,Td.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Ud(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Pd("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=_m[e];if(void 0!==t)return Cm(t)}(a),u=i.message;void 0===o&&(o=jd.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.no(new Bd(o,u)),s.close()}else Pd("Connection","WebChannel received:",n),f.so(n)}})),h(a,xd.STAT_EVENT,(function(e){e.stat===Id.PROXY?Pd("Connection","Detected buffering proxy"):e.stat===Id.NOPROXY&&Pd("Connection","Detected no buffering proxy")})),setTimeout((function(){f.eo()}),0),f}}]),n}(function(){function e(t){$(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.io=n+"://"+t.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return J(e,[{key:"oo",value:function(e,t,n,r,i){var a=this.uo(e,t);Pd("RestConnection","Sending: ",a,n);var o={};return this.ao(o,r,i),this.co(e,a,o,n).then((function(e){return Pd("RestConnection","Received: ",e),e}),(function(t){throw Ld("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ho",value:function(e,t,n,r,i){return this.oo(e,t,n,r,i)}},{key:"ao",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ad,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"uo",value:function(e,t){var n=Pb[e];return"".concat(this.io,"/v1/").concat(t,":").concat(n)}}]),e}());function Mb(){return"undefined"!=typeof window?window:null}function Fb(){return"undefined"!=typeof document?document:null}function Ub(e){return new ry(e,!0)}var Vb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;$(this,e),this.Yn=t,this.timerId=n,this.fo=r,this._o=i,this.wo=a,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}return J(e,[{key:"reset",value:function(){this.mo=0}},{key:"Io",value:function(){this.mo=this.wo}},{key:"To",value:function(e){var t=this;this.cancel();var n=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,n-r);i>0&&Pd("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.mo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.po=Date.now(),e()})),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}},{key:"Ao",value:function(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}},{key:"cancel",value:function(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}},{key:"Eo",value:function(){return(Math.random()-.5)*this.mo}}]),e}(),jb=function(){function e(t,n,r,i,a,o,u,s){$(this,e),this.Yn=t,this.Ro=r,this.Po=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Vb(t,n)}return J(e,[{key:"Co",value:function(){return 1===this.state||5===this.state||this.xo()}},{key:"xo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.No()}},{key:"stop",value:function(){var e=G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Co(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ko",value:function(){this.state=0,this.Do.reset()}},{key:"Mo",value:function(){var e=this;this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,(function(){return e.Oo()})))}},{key:"Fo",value:function(e){this.$o(),this.stream.send(e)}},{key:"Oo",value:function(){var e=G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.xo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$o",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"close",value:function(){var e=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$o(),this.Bo(),this.Do.cancel(),this.Vo++,4!==t?this.Do.reset():n&&n.code===jd.RESOURCE_EXHAUSTED?(Od(n.toString()),Od("Using maximum backoff delay to prevent overloading the backend."),this.Do.Io()):n&&n.code===jd.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Lo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Yr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Vo===n&&e.qo(i,a)}),(function(n){t((function(){var t=new Bd(jd.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ko(t)}))}))}},{key:"qo",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr((function(){r((function(){return n.state=2,n.So=n.Yn.enqueueAfterDelay(n.Po,1e4,(function(){return n.xo()&&(n.state=3),Promise.resolve()})),n.listener.Hr()}))})),this.stream.Yr((function(e){r((function(){return n.Ko(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"No",value:function(){var e=this;this.state=5,this.Do.To(G(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Ko",value:function(e){return Pd("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Vo===e?n():(Pd("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Bb=function(e){ne(n,e);var t=ue(n);function n(e,r,i,a,o,u){var s;return $(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return J(n,[{key:"Go",value:function(e,t){return this.bo.lo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Do.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Fd()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(Ud(void 0===t||"string"==typeof t),dp.fromBase64String(t||"")):(Ud(void 0===t||t instanceof Uint8Array),dp.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?jd.UNKNOWN:Cm(e.code);return new Bd(t,e.message||"")}(o);n=new $m(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=fy(e,s.document.name),l=uy(s.document.updateTime),f=new Qp({mapValue:{fields:s.document.fields}}),h=$p.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Qm(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=fy(e,v.document),y=v.readTime?uy(v.readTime):ip.min(),g=$p.newNoDocument(m,y),k=v.removedTargetIds||[];n=new Qm([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=fy(e,b.document),_=b.removedTargetIds||[];n=new Qm([],_,w,null)}else{if(!("filter"in t))return Fd();t.filter;var x=t.filter;x.targetId;var I=x.count||0,S=new Tm(I),T=x.targetId;n=new Ym(T,S)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return ip.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?ip.min():t.readTime?uy(t.readTime):ip.min()}(e);return this.listener.Qo(t,n)}},{key:"jo",value:function(e){var t={};t.database=py(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=lv(r)?{documents:wy(e,r)}:{query:_y(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=ay(e,t.resumeToken):t.snapshotVersion.compareTo(ip.min())>0&&(n.readTime=iy(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Fd()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=py(this.M),t.removeTarget=e,this.Fo(t)}}]),n}(jb),zb=function(e){ne(n,e);var t=ue(n);function n(e,r,i,a,o,u){var s;return $(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.zo=!1,s}return J(n,[{key:"Ho",get:function(){return this.zo}},{key:"start",value:function(){this.zo=!1,this.lastStreamToken=void 0,en(re(n.prototype),"start",this).call(this)}},{key:"Lo",value:function(){this.zo&&this.Jo([])}},{key:"Go",value:function(e,t){return this.bo.lo("Write",e,t)}},{key:"onMessage",value:function(e){if(Ud(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();var t=function(e,t){return e&&e.length>0?(Ud(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?uy(e.updateTime):uy(t);return n.isEqual(ip.min())&&(n=uy(t)),new sm(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=uy(e.commitTime);return this.listener.Yo(n,t)}return Ud(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}},{key:"Zo",value:function(){var e={};e.database=py(this.M),this.Fo(e)}},{key:"Jo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return ky(t.M,e)}))};this.Fo(n)}}]),n}(jb),qb=function(e){ne(n,e);var t=ue(n);function n(e,r,i,a){var o;return $(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.M=a,o.tu=!1,o}return J(n,[{key:"eu",value:function(){if(this.tu)throw new Bd(jd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"oo",value:function(e,t,n){var r=this;return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.bo.oo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===jd.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Bd(jd.UNKNOWN,e.toString())}))}},{key:"ho",value:function(e,t,n){var r=this;return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.bo.ho(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===jd.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Bd(jd.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.tu=!0}}]),n}(function(){return J((function e(){$(this,e)}))}()),Kb=function(){function e(t,n){$(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}return J(e,[{key:"ru",value:function(){var e=this;0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.su=null,e.uu("Backend didn't respond within 10 seconds."),e.ou("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ou("Offline")))}},{key:"set",value:function(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}},{key:"ou",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"uu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.iu?(Od(t),this.iu=!1):Pd("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.su&&(this.su.cancel(),this.su=null)}}]),e}(),Wb=J((function e(t,n,r,i,a){var o=this;$(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=a,this._u.Lr((function(e){r.enqueueAndForget(G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=nw(o),!e.t0){e.next=5;break}return Pd("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=G(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Vd(t)).fu.add(4),e.next=4,Qb(n);case 4:return n.wu.set("Unknown"),n.fu.delete(4),e.next=8,Gb(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.wu=new Kb(r,i)}));function Gb(e){return Hb.apply(this,arguments)}function Hb(){return Hb=G(Q().mark((function e(t){var n,r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!nw(t)){e.next=18;break}n=Z(t.du),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Hb.apply(this,arguments)}function Qb(e){return Yb.apply(this,arguments)}function Yb(){return Yb=G(Q().mark((function e(t){var n,r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Z(t.du),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Yb.apply(this,arguments)}function $b(e,t){var n=Vd(e);n.lu.has(t.targetId)||(n.lu.set(t.targetId,t),tw(n)?ew(n):Rw(n).xo()&&Jb(n,t))}function Xb(e,t){var n=Vd(e),r=Rw(n);n.lu.delete(t),r.xo()&&Zb(n,t),0===n.lu.size&&(r.xo()?r.Mo():nw(n)&&n.wu.set("Unknown"))}function Jb(e,t){e.mu.Z(t.targetId),Rw(e).jo(t)}function Zb(e,t){e.mu.Z(t),Rw(e).Wo(t)}function ew(e){e.mu=new Jm({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.lu.get(t)||null}}),Rw(e).start(),e.wu.ru()}function tw(e){return nw(e)&&!Rw(e).Co()&&e.lu.size>0}function nw(e){return 0===Vd(e).fu.size}function rw(e){e.mu=void 0}function iw(e){return aw.apply(this,arguments)}function aw(){return aw=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.lu.forEach((function(e,n){Jb(t,e)}));case 1:case"end":return e.stop()}}),e)}))),aw.apply(this,arguments)}function ow(e,t){return uw.apply(this,arguments)}function uw(){return uw=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:rw(t),tw(t)?(t.wu.au(n),ew(t)):t.wu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),uw.apply(this,arguments)}function sw(e,t,n){return cw.apply(this,arguments)}function cw(){return cw=G(Q().mark((function e(t,n,r){var i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.wu.set("Online"),!(n instanceof $m&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=G(Q().mark((function e(t,n){var r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Z(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.lu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.lu.delete(o),t.mu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Pd("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,lw(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Qm?t.mu.ut(n):n instanceof Ym?t.mu._t(n):t.mu.ht(n),r.isEqual(ip.min())){e.next=29;break}return e.prev=14,e.next=17,Yk(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.mu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.lu.get(r);i&&e.lu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.lu.get(t);if(n){e.lu.set(t,n.withResumeToken(dp.EMPTY_BYTE_STRING,n.snapshotVersion)),Zb(e,t);var r=new _g(n.target,t,1,n.sequenceNumber);Jb(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Pd("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,lw(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),cw.apply(this,arguments)}function lw(e,t,n){return fw.apply(this,arguments)}function fw(){return fw=G(Q().mark((function e(t,n,r){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hg(n)){e.next=2;break}throw n;case 2:return t.fu.add(1),e.next=5,Qb(t);case 5:t.wu.set("Offline"),r||(r=function(){return Yk(t.localStore)}),t.asyncQueue.enqueueRetryable(G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pd("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.fu.delete(1),e.next=6,Gb(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),fw.apply(this,arguments)}function hw(e,t){return t().catch((function(n){return lw(e,n,t)}))}function dw(e){return pw.apply(this,arguments)}function pw(){return pw=G(Q().mark((function e(t){var n,r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Vd(t),r=Dw(n),i=n.hu.length>0?n.hu[n.hu.length-1].batchId:-1;case 2:if(!vw(n)){e.next=19;break}return e.prev=3,e.next=6,Jk(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.hu.length&&r.Mo(),e.abrupt("break",19);case 10:i=a.batchId,mw(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,lw(n,e.t0);case 17:e.next=2;break;case 19:yw(n)&&gw(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),pw.apply(this,arguments)}function vw(e){return nw(e)&&e.hu.length<10}function mw(e,t){e.hu.push(t);var n=Dw(e);n.xo()&&n.Ho&&n.Jo(t.mutations)}function yw(e){return nw(e)&&!Dw(e).Co()&&e.hu.length>0}function gw(e){Dw(e).start()}function kw(e){return bw.apply(this,arguments)}function bw(){return bw=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Dw(t).Zo();case 1:case"end":return e.stop()}}),e)}))),bw.apply(this,arguments)}function ww(e){return _w.apply(this,arguments)}function _w(){return _w=G(Q().mark((function e(t){var n,r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Dw(t),r=Z(t.hu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Jo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),_w.apply(this,arguments)}function xw(e,t,n){return Iw.apply(this,arguments)}function Iw(){return Iw=G(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.hu.shift(),a=bg.from(i,n,r),e.next=3,hw(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,dw(t);case 5:case"end":return e.stop()}}),e)}))),Iw.apply(this,arguments)}function Sw(e,t){return Tw.apply(this,arguments)}function Tw(){return Tw=G(Q().mark((function e(t,n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Dw(t).Ho,!e.t0){e.next=4;break}return e.next=4,function(){var e=G(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Em(i=n.code)||i===jd.ABORTED){e.next=7;break}return r=t.hu.shift(),Dw(t).ko(),e.next=5,hw(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,dw(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:yw(t)&&gw(t);case 5:case"end":return e.stop()}}),e)}))),Tw.apply(this,arguments)}function Ew(e,t){return Cw.apply(this,arguments)}function Cw(){return Cw=G(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Vd(t)).asyncQueue.verifyOperationInProgress(),Pd("RemoteStore","RemoteStore received new credentials"),i=nw(r),r.fu.add(3),e.next=6,Qb(r);case 6:return i&&r.wu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.fu.delete(3),e.next=12,Gb(r);case 12:case"end":return e.stop()}}),e)}))),Cw.apply(this,arguments)}function Nw(e,t){return Aw.apply(this,arguments)}function Aw(){return Aw=G(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vd(t),!n){e.next=7;break}return r.fu.delete(2),e.next=5,Gb(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.fu.add(2),e.next=12,Qb(r);case 12:r.wu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Aw.apply(this,arguments)}function Rw(e){return e.gu||(e.gu=function(e,t,n){var r=Vd(e);return r.eu(),new Bb(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:iw.bind(null,e),Yr:ow.bind(null,e),Qo:sw.bind(null,e)}),e.du.push(function(){var t=G(Q().mark((function t(n){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.gu.ko(),tw(e)?ew(e):e.wu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.gu.stop();case 6:rw(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}function Dw(e){return e.yu||(e.yu=function(e,t,n){var r=Vd(e);return r.eu(),new zb(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:kw.bind(null,e),Yr:Sw.bind(null,e),Xo:ww.bind(null,e),Yo:xw.bind(null,e)}),e.du.push(function(){var t=G(Q().mark((function t(n){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.yu.ko(),t.next=4,dw(e);case 4:t.next=9;break;case 6:return t.next=8,e.yu.stop();case 8:e.hu.length>0&&(Pd("RemoteStore","Stopping write stream with ".concat(e.hu.length," pending writes")),e.hu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}var Pw=function(){function e(t,n,r,i,a){$(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new zd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return J(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Bd(jd.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Ow(e,t){if(Od("AsyncQueue","".concat(t,": ").concat(e)),hg(e))return new Bd(jd.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Lw=function(){function e(t){$(this,e),this.comparator=t?function(e,n){return t(e,n)||Tp.comparator(e.key,n.key)}:function(e,t){return Tp.comparator(e.key,t.key)},this.keyedMap=Vm(),this.sortedSet=new Am(this.comparator)}return J(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Mw=function(){function e(){$(this,e),this.pu=new Am(Tp.comparator)}return J(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.pu.get(t);n?0!==e.type&&3===n.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==n.type?this.pu=this.pu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.pu=this.pu.remove(t):1===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):Fd():this.pu=this.pu.insert(t,e)}},{key:"Iu",value:function(){var e=[];return this.pu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Fw=function(){function e(t,n,r,i,a,o,u,s){$(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return J(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Lw.emptySet(n),a,r,i,!0,!1)}}]),e}(),Uw=J((function e(){$(this,e),this.Tu=void 0,this.listeners=[]})),Vw=J((function e(){$(this,e),this.queries=new Nm((function(e){return jv(e)}),Vv),this.onlineState="Unknown",this.Eu=new Set}));function jw(e,t){return Bw.apply(this,arguments)}function Bw(){return Bw=G(Q().mark((function e(t,n){var r,i,a,o,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vd(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Uw),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Tu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Ow(e.t0,"Initialization of query '".concat(Bv(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Au(r.onlineState),o.Tu&&n.Ru(o.Tu)&&Gw(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Bw.apply(this,arguments)}function zw(e,t){return qw.apply(this,arguments)}function qw(){return qw=G(Q().mark((function e(t,n){var r,i,a,o,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vd(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),qw.apply(this,arguments)}function Kw(e,t){var n,r=Vd(e),i=!1,a=Z(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Z(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Ru(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Tu=o}}}catch(f){a.e(f)}finally{a.f()}i&&Gw(r)}function Ww(e,t,n){var r=Vd(e),i=r.queries.get(t);if(i){var a,o=Z(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Gw(e){e.Eu.forEach((function(e){e.next()}))}var Hw=function(){function e(t,n,r){$(this,e),this.query=t,this.Pu=n,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return J(e,[{key:"Ru",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Z(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Fw(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),a=!0):this.Su(e,this.onlineState)&&(this.Du(e),a=!0),this.Vu=e,a}},{key:"onError",value:function(e){this.Pu.error(e)}},{key:"Au",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}},{key:"Su",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Cu||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Du",value:function(e){e=Fw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}]),e}(),Qw=function(){function e(t,n){$(this,e),this.payload=t,this.byteLength=n}return J(e,[{key:"xu",value:function(){return"metadata"in this.payload}}]),e}(),Yw=function(){function e(t){$(this,e),this.M=t}return J(e,[{key:"fi",value:function(e){return fy(this.M,e)}},{key:"di",value:function(e){return e.metadata.exists?yy(this.M,e.document,!1):$p.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}},{key:"_i",value:function(e){return uy(e)}}]),e}(),$w=function(){function e(t,n,r){$(this,e),this.Nu=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Xw(t)}return J(e,[{key:"ku",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=cp.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Mu",value:function(e){var t,n=new Map,r=new Yw(this.M),i=Z(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.fi(a.metadata.name),s=Z(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||qm()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=G(Q().mark((function e(){var t,n,r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ob(this.localStore,new Yw(this.M),this.documents,this.Nu.id);case 2:t=e.sent,n=this.Mu(this.documents),r=Z(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,sb(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Fu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Xw(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Jw=J((function e(t){$(this,e),this.key=t})),Zw=J((function e(t){$(this,e),this.key=t})),e_=function(){function e(t,n){$(this,e),this.query=t,this.$u=n,this.Bu=null,this.current=!1,this.Lu=qm(),this.mutatedKeys=qm(),this.Uu=Kv(t),this.qu=new Lw(this.Uu)}return J(e,[{key:"Ku",get:function(){return this.$u}},{key:"Gu",value:function(e,t){var n=this,r=t?t.Qu:new Mw,i=t?t.qu:this.qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=Rv(this.query)&&i.size===this.query.limit?i.last():null,c=Dv(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=zv(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.ju(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Uu(f,s)>0||c&&n.Uu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),Rv(this.query)||Dv(this.query))for(;o.size>this.query.limit;){var l=Rv(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{qu:o,Qu:r,ni:u,mutatedKeys:a}}},{key:"ju",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;var a=e.Qu.Iu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fd()}};return n(e)-n(t)}(e.type,t.type)||r.Uu(e.doc,t.doc)})),this.Wu(n);var o=t?this.zu():[],u=0===this.Lu.size&&this.current?1:0,s=u!==this.Bu;return this.Bu=u,0!==a.length||s?{snapshot:new Fw(this.query,e.qu,i,a,e.mutatedKeys,0===u,s,!1),Hu:o}:{Hu:o}}},{key:"Au",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new Mw,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}},{key:"Ju",value:function(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}},{key:"Wu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.$u=t.$u.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.$u=t.$u.delete(e)})),this.current=e.current)}},{key:"zu",value:function(){var e=this;if(!this.current)return[];var t=this.Lu;this.Lu=qm(),this.qu.forEach((function(t){e.Ju(t.key)&&(e.Lu=e.Lu.add(t.key))}));var n=[];return t.forEach((function(t){e.Lu.has(t)||n.push(new Zw(t))})),this.Lu.forEach((function(e){t.has(e)||n.push(new Jw(e))})),n}},{key:"Yu",value:function(e){this.$u=e.li,this.Lu=qm();var t=this.Gu(e.documents);return this.applyChanges(t,!0)}},{key:"Xu",value:function(){return Fw.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}]),e}(),t_=J((function e(t,n,r){$(this,e),this.query=t,this.targetId=n,this.view=r})),n_=J((function e(t){$(this,e),this.key=t,this.Zu=!1})),r_=function(){function e(t,n,r,i,a,o){$(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.ta={},this.ea=new Nm((function(e){return jv(e)}),Vv),this.na=new Map,this.sa=new Set,this.ia=new Am(Tp.comparator),this.ra=new Map,this.oa=new hb,this.ua={},this.aa=new Map,this.ca=dk.yn(),this.onlineState="Unknown",this.ha=void 0}return J(e,[{key:"isPrimaryClient",get:function(){return!0===this.ha}}]),e}();function i_(e,t){return a_.apply(this,arguments)}function a_(){return a_=G(Q().mark((function e(t,n){var r,i,a,o,u,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=X_(t),!(o=r.ea.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Xu(),e.next=15;break;case 6:return e.next=8,Zk(r.localStore,Fv(n));case 8:return u=e.sent,r.isPrimaryClient&&$b(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,o_(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),a_.apply(this,arguments)}function o_(e,t,n,r){return u_.apply(this,arguments)}function u_(){return u_=G(Q().mark((function e(t,n,r,i){var a,o,u,s,c,l;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.la=function(e,n,r){return function(){var e=G(Q().mark((function e(t,n,r,i){var a,o,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Gu(r),e.t0=a.ni,!e.t0){e.next=6;break}return e.next=5,nb(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Gu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(E_(t,n.targetId,u.Hu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,nb(t.localStore,n,!0);case 3:return a=e.sent,o=new e_(n,a.li),u=o.Gu(a.documents),s=Hm.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),E_(t,r,c.Hu),l=new t_(n,r,o),e.abrupt("return",(t.ea.set(n,l),t.na.has(r)?t.na.get(r).push(n):t.na.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),u_.apply(this,arguments)}function s_(e,t){return c_.apply(this,arguments)}function c_(){return c_=G(Q().mark((function e(t,n){var r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vd(t),i=r.ea.get(n),!((a=r.na.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.na.set(i.targetId,a.filter((function(e){return!Vv(e,n)}))),void r.ea.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,eb(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Xb(r.remoteStore,i.targetId),S_(r,i.targetId)})).catch(gk);case 9:e.next=14;break;case 11:return S_(r,i.targetId),e.next=14,eb(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),c_.apply(this,arguments)}function l_(e,t,n){return f_.apply(this,arguments)}function f_(){return f_=G(Q().mark((function e(t,n,r){var i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=J_(t),e.prev=1,e.next=4,function(e,t){var n,r=Vd(e),i=rp.now(),a=t.reduce((function(e,t){return e.add(t.key)}),qm());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ci.Ks(e,a).next((function(a){n=a;var o,u=[],s=Z(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=pm(c,n.get(c.key));null!=l&&u.push(new gm(c.key,l,Yp(l.value.mapValue),cm.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.Bs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ua[e.currentUser.toKey()];r||(r=new Am(ep)),r=r.insert(t,n),e.ua[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,A_(i,a.changes);case 9:return e.next=11,dw(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Ow(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),f_.apply(this,arguments)}function h_(e,t){return d_.apply(this,arguments)}function d_(){return d_=G(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vd(t),e.prev=1,e.next=4,$k(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ra.get(t);n&&(Ud(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Zu=!0:e.modifiedDocuments.size>0?Ud(n.Zu):e.removedDocuments.size>0&&(Ud(n.Zu),n.Zu=!1))})),e.next=8,A_(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,gk(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),d_.apply(this,arguments)}function p_(e,t,n){var r=Vd(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ea.forEach((function(e,n){var r=n.view.Au(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Vd(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Z(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Au(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Gw(n)}(r.eventManager,t),i.length&&r.ta.Qo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function v_(e,t,n){return m_.apply(this,arguments)}function m_(){return m_=G(Q().mark((function e(t,n,r){var i,a,o,u,s,c;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Vd(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ra.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Am(Tp.comparator)).insert(o,$p.newNoDocument(o,ip.min())),s=qm().add(o),c=new Gm(ip.min(),new Map,new Pm(ep),u,s),e.next=9,h_(i,c);case 9:i.ia=i.ia.remove(o),i.ra.delete(n),N_(i),e.next=16;break;case 14:return e.next=16,eb(i.localStore,n,!1).then((function(){return S_(i,n,r)})).catch(gk);case 16:case"end":return e.stop()}}),e)}))),m_.apply(this,arguments)}function y_(e,t){return g_.apply(this,arguments)}function g_(){return g_=G(Q().mark((function e(t,n){var r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vd(t),i=n.batch.batchId,e.prev=1,e.next=4,Qk(r.localStore,n);case 4:return a=e.sent,I_(r,i,null),x_(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,A_(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,gk(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),g_.apply(this,arguments)}function k_(e,t,n){return b_.apply(this,arguments)}function b_(){return b_=G(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Vd(t),e.prev=1,e.next=4,function(e,t){var n=Vd(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return Ud(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.ci.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,I_(i,n,r),x_(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,A_(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,gk(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),b_.apply(this,arguments)}function w_(e,t){return __.apply(this,arguments)}function __(){return __=G(Q().mark((function e(t,n){var r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nw((r=Vd(t)).remoteStore)||Pd("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Vd(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.aa.get(i)||[]).push(n),r.aa.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Ow(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),__.apply(this,arguments)}function x_(e,t){(e.aa.get(t)||[]).forEach((function(e){e.resolve()})),e.aa.delete(t)}function I_(e,t,n){var r=Vd(e),i=r.ua[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ua[r.currentUser.toKey()]=i}}function S_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Z(e.na.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ea.delete(a),n&&e.ta.fa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.na.delete(t),e.isPrimaryClient&&e.oa.Pi(t).forEach((function(t){e.oa.containsKey(t)||T_(e,t)}))}function T_(e,t){e.sa.delete(t.path.canonicalString());var n=e.ia.get(t);null!==n&&(Xb(e.remoteStore,n),e.ia=e.ia.remove(t),e.ra.delete(n),N_(e))}function E_(e,t,n){var r,i=Z(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Jw?(e.oa.addReference(a.key,t),C_(e,a)):a instanceof Zw?(Pd("SyncEngine","Document no longer in limbo: "+a.key),e.oa.removeReference(a.key,t),e.oa.containsKey(a.key)||T_(e,a.key)):Fd()}}catch(o){i.e(o)}finally{i.f()}}function C_(e,t){var n=t.key,r=n.path.canonicalString();e.ia.get(n)||e.sa.has(r)||(Pd("SyncEngine","New document in limbo: "+n),e.sa.add(r),N_(e))}function N_(e){for(;e.sa.size>0&&e.ia.size<e.maxConcurrentLimboResolutions;){var t=e.sa.values().next().value;e.sa.delete(t);var n=new Tp(cp.fromString(t)),r=e.ca.next();e.ra.set(r,new n_(n)),e.ia=e.ia.insert(n,r),$b(e.remoteStore,new _g(Fv(Av(n.path)),r,2,Xd.A))}}function A_(e,t,n){return R_.apply(this,arguments)}function R_(){return R_=G(Q().mark((function e(t,n,r){var i,a,o,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Vd(t),a=[],o=[],u=[],e.t0=i.ea.isEmpty(),e.t0){e.next=9;break}return i.ea.forEach((function(e,t){u.push(i.la(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=zk.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.ta.Qo(a),e.next=9,function(){var e=G(Q().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vd(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return ug.forEach(n,(function(t){return ug.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return ug.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),hg(e.t0)){e.next=10;break}throw e.t0;case 10:Pd("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Z(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ii.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.ii=r.ii.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),R_.apply(this,arguments)}function D_(e,t){return P_.apply(this,arguments)}function P_(){return P_=G(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Vd(t)).currentUser.isEqual(n)){e.next=11;break}return Pd("SyncEngine","User change. New user:",n.toKey()),e.next=5,Gk(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.aa.forEach((function(e){e.forEach((function(e){e.reject(new Bd(jd.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.aa.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,A_(r,i.hi);case 11:case"end":return e.stop()}}),e)}))),P_.apply(this,arguments)}function O_(e,t){var n=Vd(e),r=n.ra.get(t);if(r&&r.Zu)return qm().add(r.key);var i=qm(),a=n.na.get(t);if(!a)return i;var o,u=Z(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ea.get(s);i=i.unionWith(c.view.Ku)}}catch(l){u.e(l)}finally{u.f()}return i}function L_(e,t){return M_.apply(this,arguments)}function M_(){return M_=G(Q().mark((function e(t,n){var r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vd(t),e.next=3,nb(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Yu(i),e.abrupt("return",(r.isPrimaryClient&&E_(r,n.targetId,a.Hu),a));case 6:case"end":return e.stop()}}),e)}))),M_.apply(this,arguments)}function F_(e,t){return U_.apply(this,arguments)}function U_(){return U_=G(Q().mark((function e(t,n){var r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vd(t),e.abrupt("return",ib(r.localStore,n).then((function(e){return A_(r,e)})));case 2:case"end":return e.stop()}}),e)}))),U_.apply(this,arguments)}function V_(e,t,n,r){return j_.apply(this,arguments)}function j_(){return j_=G(Q().mark((function e(t,n,r,i){var a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Vd(t),e.next=3,function(e,t){var n=Vd(e),r=Vd(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.ci.Ks(e,t):ug.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,dw(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(I_(a,n,i||null),x_(a,n),function(e,t){Vd(Vd(e).Bs)._n(t)}(a.localStore,n)):Fd();case 11:return e.next=13,A_(a,o);case 13:e.next=16;break;case 15:Pd("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),j_.apply(this,arguments)}function B_(e,t){return z_.apply(this,arguments)}function z_(){return z_=G(Q().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(X_(r=Vd(t)),J_(r),!0!==n||!0===r.ha){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,q_(r,i.toArray());case 5:return a=e.sent,r.ha=!0,e.next=9,Nw(r.remoteStore,!0);case 9:o=Z(a);try{for(o.s();!(u=o.n()).done;)s=u.value,$b(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ha){e.next=25;break}return c=[],l=Promise.resolve(),r.na.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return S_(r,t),eb(r.localStore,t,!0)})),Xb(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,q_(r,c);case 21:return function(e){var t=Vd(e);t.ra.forEach((function(e,n){Xb(t.remoteStore,n)})),t.oa.bi(),t.ra=new Map,t.ia=new Am(Tp.comparator)}(r),r.ha=!1,e.next=25,Nw(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),z_.apply(this,arguments)}function q_(e,t,n){return K_.apply(this,arguments)}function K_(){return K_=G(Q().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Vd(t),a=[],o=[],u=Z(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.na.get(c))||0===f.length){e.next=34;break}return e.next=11,Zk(i.localStore,Fv(f[0]));case 11:l=e.sent,h=Z(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ea.get(p),e.next=20,L_(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,rb(i.localStore,c);case 36:return y=e.sent,e.next=39,Zk(i.localStore,y);case 39:return l=e.sent,e.next=42,o_(i,W_(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.ta.Qo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),K_.apply(this,arguments)}function W_(e){return Nv(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function G_(e){var t=Vd(e);return Vd(Vd(t.localStore).persistence).Fs()}function H_(e,t,n,r){return Q_.apply(this,arguments)}function Q_(){return Q_=G(Q().mark((function e(t,n,r,i){var a,o,u,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Vd(t)).ha){e.next=3;break}return e.abrupt("return",void Pd("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.na.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,ib(a.localStore,qv(o[0]));case 10:return u=e.sent,s=Gm.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,A_(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,eb(a.localStore,n,!0);case 17:return S_(a,n,i),e.abrupt("break",20);case 19:Fd();case 20:case"end":return e.stop()}}),e)}))),Q_.apply(this,arguments)}function Y_(e,t,n){return $_.apply(this,arguments)}function $_(){return $_=G(Q().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=X_(t)).ha){e.next=45;break}a=Z(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.na.has(u)){e.next=10;break}return Pd("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,rb(i.localStore,u);case 12:return s=e.sent,e.next=15,Zk(i.localStore,s);case 15:return c=e.sent,e.next=18,o_(i,W_(s),c.targetId,!1);case 18:$b(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Z(r),e.prev=30,h=Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.na.has(t),!e.t0){e.next=5;break}return e.next=5,eb(i.localStore,t,!1).then((function(){Xb(i.remoteStore,t),S_(i,t)})).catch(gk);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),$_.apply(this,arguments)}function X_(e){var t=Vd(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=h_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=O_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=v_.bind(null,t),t.ta.Qo=Kw.bind(null,t.eventManager),t.ta.fa=Ww.bind(null,t.eventManager),t}function J_(e){var t=Vd(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=y_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=k_.bind(null,t),t}function Z_(e,t,n){var r=Vd(e);(function(){var e=G(Q().mark((function e(t,n,r){var i,a,o,u,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Vd(e),r=uy(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Xw(i)),a=new $w(i,t.localStore,n.M),e.next=15,n.da();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.ku(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.da();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,A_(t,s.Fu,void 0);case 31:return e.next=33,function(e,t){var n=Vd(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Ld("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var ex=function(){function e(){$(this,e),this.synchronizeTabs=!1}return J(e,[{key:"initialize",value:function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=Ub(t.databaseInfo.databaseId),this.sharedClientState=this._a(t),this.persistence=this.wa(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.ma(t),this.localStore=this.ga(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ma",value:function(e){return null}},{key:"ga",value:function(e){return Wk(this.persistence,new qk,e.initialUser,this.M)}},{key:"wa",value:function(e){return new gb(bb.zi,this.M)}},{key:"_a",value:function(e){return new Ab}},{key:"terminate",value:function(){var e=G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),tx=function(e){ne(n,e);var t=ue(n);function n(e,r,i){var a;return $(this,n),(a=t.call(this)).ya=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return J(n,[{key:"initialize",value:function(){var e=G(Q().mark((function e(t){var r=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,en(re(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ya.initialize(this,t);case 4:return e.next=6,J_(this.ya.syncEngine);case 6:return e.next=8,dw(this.ya.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){return Wk(this.persistence,new qk,e.initialUser,this.M)}},{key:"ma",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new _k(t,e.asyncQueue)}},{key:"wa",value:function(e){var t=jk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ak.withCacheSize(this.cacheSizeBytes):ak.DEFAULT;return new Fk(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Mb(),Fb(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"_a",value:function(e){return new Ab}}]),n}(ex),nx=function(e){ne(n,e);var t=ue(n);function n(e,r){var i;return $(this,n),(i=t.call(this,e,r,!1)).ya=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return J(n,[{key:"initialize",value:function(){var e=G(Q().mark((function e(t){var r,i=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,en(re(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ya.syncEngine,e.t0=this.sharedClientState instanceof Nb,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Mr:V_.bind(null,r),Or:H_.bind(null,r),Fr:Y_.bind(null,r),Fs:G_.bind(null,r),kr:F_.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B_(i.ya.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_a",value:function(e){var t=Mb();if(!Nb.vt(t))throw new Bd(jd.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=jk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Nb(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(tx),rx=function(){function e(){$(this,e)}return J(e,[{key:"initialize",value:function(){var e=G(Q().mark((function e(t,n){var r=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return p_(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=D_.bind(null,this.syncEngine),e.next=12,Nw(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Vw}},{key:"createDatastore",value:function(e){var t,n=Ub(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Lb(t));return function(e,t,n,r){return new qb(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return p_(o.syncEngine,e,0)},a=Db.vt()?new Db:new Rb,new Wb(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new r_(e,t,n,r,i,a);return o&&(u.ha=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=G(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Vd(t),Pd("RemoteStore","RemoteStore shutting down."),n.fu.add(5),e.next=5,Qb(n);case 5:n._u.shutdown(),n.wu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function ix(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return G(Q().mark((function r(){var i;return Q().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var ax=function(){function e(t){$(this,e),this.observer=t,this.muted=!1}return J(e,[{key:"next",value:function(e){this.observer.next&&this.pa(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Ia",value:function(){this.muted=!0}},{key:"pa",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),ox=function(){function e(t,n){var r=this;$(this,e),this.Ta=t,this.M=n,this.metadata=new zd,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then((function(e){e&&e.xu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return J(e,[{key:"close",value:function(){return this.Ta.cancel()}},{key:"getMetadata",value:function(){var e=G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"da",value:function(){var e=G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Aa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Aa",value:function(){var e=G(Q().mark((function e(){var t,n,r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ea.decode(t),r=Number(n),isNaN(r)&&this.Pa("length string (".concat(n,") is not valid number")),e.next=9,this.ba(r);case 9:return i=e.sent,e.abrupt("return",new Qw(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Va",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ra",value:function(){var e=G(Q().mark((function e(){var t,n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Va()<0)){e.next=7;break}return e.next=3,this.va();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Va())<0&&this.Pa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(){var e=G(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.va();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ea.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pa",value:function(e){throw this.Ta.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"va",value:function(){var e=G(Q().mark((function e(){var t,n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ta.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ux=function(){function e(t){$(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return J(e,[{key:"lookup",value:function(){var e=G(Q().mark((function e(t){var n,r=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Bd(jd.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=G(Q().mark((function e(t,n){var r,i,a,o,u,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vd(t),i=py(r.M)+"/documents",a={documents:n.map((function(e){return ly(r.M,e)}))},e.next=5,r.ho("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=gy(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Ud(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Im(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=G(Q().mark((function e(){var t,n=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Tp.fromPath(t);n.mutations.push(new Sm(r,n.precondition(r)))})),e.next=7,function(){var e=G(Q().mark((function e(t,n){var r,i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vd(t),i=py(r.M)+"/documents",a={writes:n.map((function(e){return ky(r.M,e)}))},e.next=3,r.oo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Fd();t=ip.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Bd(jd.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?cm.updateTime(t):cm.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ip.min()))throw new Bd(jd.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cm.updateTime(t)}return cm.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),sx=function(){function e(t,n,r,i){$(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new Vb(this.asyncQueue,"transaction_retry")}return J(e,[{key:"run",value:function(){this.Sa-=1,this.Da()}},{key:"Da",value:function(){var e=this;this.Do.To(G(Q().mark((function t(){var n,r;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new ux(e.datastore),(r=e.Ca(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.xa(t)}))}))})).catch((function(t){e.xa(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Ca",value:function(e){try{var t=this.updateFunction(e);return!xp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"xa",value:function(e){var t=this;this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Da(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Na",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Em(t)}return!1}}]),e}(),cx=function(){function e(t,n,r,i){var a=this;$(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Nd.UNAUTHENTICATED,this.clientId=Zd.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pd("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Pd("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return J(e,[{key:"getConfiguration",value:function(){var e=G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Bd(jd.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new zd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(G(Q().mark((function n(){var r;return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Ow(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function lx(e,t){return fx.apply(this,arguments)}function fx(){return fx=G(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Pd("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Gk(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),fx.apply(this,arguments)}function hx(e,t){return dx.apply(this,arguments)}function dx(){return dx=G(Q().mark((function e(t,n){var r,i;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,px(t);case 3:return r=e.sent,Pd("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Ew(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Ew(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),dx.apply(this,arguments)}function px(e){return vx.apply(this,arguments)}function vx(){return vx=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Pd("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,lx(t,new ex);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),vx.apply(this,arguments)}function mx(e){return yx.apply(this,arguments)}function yx(){return yx=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Pd("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,hx(t,new rx);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),yx.apply(this,arguments)}function gx(e){return px(e).then((function(e){return e.persistence}))}function kx(e){return px(e).then((function(e){return e.localStore}))}function bx(e){return mx(e).then((function(e){return e.remoteStore}))}function wx(e){return mx(e).then((function(e){return e.syncEngine}))}function _x(e){return xx.apply(this,arguments)}function xx(){return xx=G(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mx(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=i_.bind(null,n.syncEngine),r.onUnlisten=s_.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),xx.apply(this,arguments)}function Ix(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new zd;return e.asyncQueue.enqueueAndForget(G(Q().mark((function i(){return Q().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new ax({next:function(a){t.enqueueAndForget((function(){return zw(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Bd(jd.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Bd(jd.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Hw(Av(n.path),a,{includeMetadataChanges:!0,Cu:!0});return jw(e,o)},i.next=3,_x(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Sx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new zd;return e.asyncQueue.enqueueAndForget(G(Q().mark((function i(){return Q().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new ax({next:function(n){t.enqueueAndForget((function(){return zw(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Bd(jd.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Hw(n,a,{includeMetadataChanges:!0,Cu:!0});return jw(e,o)},i.next=3,_x(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Tx=new Map;function Ex(e,t,n){if(!n)throw new Bd(jd.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Cx(e,t,n,r){if(!0===t&&!0===r)throw new Bd(jd.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Nx(e){if(!Tp.isDocumentKey(e))throw new Bd(jd.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ax(e){if(Tp.isDocumentKey(e))throw new Bd(jd.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Rx(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Fd()}function Dx(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Bd(jd.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Rx(e);throw new Bd(jd.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Px(e,t){if(t<=0)throw new Bd(jd.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Ox=function(){function e(t){var n;if($(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Bd(jd.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Bd(jd.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Cx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return J(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Lx=function(){function e(t,n,r){$(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ox({}),this._settingsFrozen=!1,t instanceof _p?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Bd(jd.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _p(e.options.projectId)}(t))}return J(e,[{key:"app",get:function(){if(!this._app)throw new Bd(jd.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Bd(jd.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ox(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Kd;switch(e.type){case"gapi":var t=e.client;return Ud(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Qd(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Bd(jd.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Tx.get(e);t&&(Pd("ComponentProvider","Removing Datastore"),Tx.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Mx(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Dx(e,Lx))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Ld("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Nd.MOCK_USER;else{o=me(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Bd(jd.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Nd(s)}e._authCredentials=new Wd(new qd(o,u))}}var Fx=function(){function e(t,n,r){$(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return J(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Vx(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Ux=function(){function e(t,n,r){$(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return J(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Vx=function(e){ne(n,e);var t=ue(n);function n(e,r,i){var a;return $(this,n),(a=t.call(this,e,r,Av(i)))._path=i,a.type="collection",a}return J(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Fx(this.firestore,null,new Tp(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Ux);function jx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Fe(e),Ex("collection","path",t),e instanceof Lx){var a=cp.fromString.apply(cp,[t].concat(r));return Ax(a),new Vx(e,null,a)}if(!(e instanceof Fx||e instanceof Vx))throw new Bd(jd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(cp.fromString.apply(cp,[t].concat(r)));return Ax(o),new Vx(e.firestore,null,o)}function Bx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Fe(e),1===arguments.length&&(t=Zd.R()),Ex("doc","path",t),e instanceof Lx){var a=cp.fromString.apply(cp,[t].concat(r));return Nx(a),new Fx(e,null,new Tp(a))}if(!(e instanceof Fx||e instanceof Vx))throw new Bd(jd.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(cp.fromString.apply(cp,[t].concat(r)));return Nx(o),new Fx(e.firestore,e instanceof Vx?e.converter:null,new Tp(o))}function zx(e,t){return e=Fe(e),t=Fe(t),(e instanceof Fx||e instanceof Vx)&&(t instanceof Fx||t instanceof Vx)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function qx(e,t){return e=Fe(e),t=Fe(t),e instanceof Ux&&t instanceof Ux&&e.firestore===t.firestore&&Vv(e._query,t._query)&&e.converter===t.converter}var Kx=function(){function e(){var t=this;$(this,e),this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Vb(this,"async_queue_retry"),this.qa=function(){var e=Fb();e&&Pd("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Do.Ao()};var n=Fb();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qa)}return J(e,[{key:"isShuttingDown",get:function(){return this.Oa}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Ka(),this.Ga(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;var t=Fb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.Ka(),this.Oa)return new Promise((function(){}));var n=new zd;return this.Ga((function(){return t.Oa&&t.La?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Ma.push(e),t.Qa()}))}},{key:"Qa",value:function(){var e=G(Q().mark((function e(){var t=this;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Ma.length){e.next=14;break}return e.prev=1,e.next=4,this.Ma[0]();case 4:this.Ma.shift(),this.Do.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),hg(e.t0)){e.next=12;break}throw e.t0;case 12:Pd("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Ma.length>0&&this.Do.To((function(){return t.Qa()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Ga",value:function(e){var t=this,n=this.ka.then((function(){return t.Ba=!0,e().catch((function(e){t.$a=e,t.Ba=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Od("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ba=!1,e}))}));return this.ka=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);var i=Pw.createAndSchedule(this,e,t,n,(function(e){return r.ja(e)}));return this.Fa.push(i),i}},{key:"Ka",value:function(){this.$a&&Fd()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Wa",value:function(){var e=G(Q().mark((function e(){var t;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ka,e.next=3,t;case 3:if(t!==this.ka){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"za",value:function(e){var t,n=Z(this.Fa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Ha",value:function(e){var t=this;return this.Wa().then((function(){t.Fa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Z(t.Fa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Wa()}))}},{key:"Ja",value:function(e){this.Ua.push(e)}},{key:"ja",value:function(e){var t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}]),e}();function Wx(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Z(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Gx=function(){function e(){$(this,e),this._progressObserver={},this._taskCompletionResolver=new zd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return J(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Hx=function(e){ne(n,e);var t=ue(n);function n(e,r,i){var a;return $(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new Kx,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return J(n,[{key:"_terminate",value:function(){return this._firestoreClient||Yx(this),this._firestoreClient.terminate()}}]),n}(Lx);function Qx(e){return e._firestoreClient||Yx(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Yx(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new wp(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new cx(e._authCredentials,e._appCheckCredentials,e._queue,r)}function $x(e,t,n){var r=new zd;return e.asyncQueue.enqueue(G(Q().mark((function i(){return Q().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,lx(e,n);case 3:return i.next=5,hx(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===jd.FAILED_PRECONDITION||e.code===jd.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Xx(e){return function(e){return e.asyncQueue.enqueue(G(Q().mark((function t(){var n,r;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gx(e);case 2:return n=t.sent,t.next=5,bx(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Vd(e);return t.fu.delete(0),Gb(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Qx(e=Dx(e,Hx)))}function Jx(e){return function(e){return e.asyncQueue.enqueue(G(Q().mark((function t(){var n,r;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gx(e);case 2:return n=t.sent,t.next=5,bx(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=G(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Vd(t)).fu.add(0),e.next=4,Qb(n);case 4:n.wu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Qx(e=Dx(e,Hx)))}function Zx(e,t){var n=Qx(e=Dx(e,Hx)),r=new Gx;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new ox(e,t)}(function(e,t){if(e instanceof Uint8Array)return ix(e,t);if(e instanceof ArrayBuffer)return ix(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Ub(t));e.asyncQueue.enqueueAndForget(G(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Z_,t.next=3,wx(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function eI(e,t){return function(e,t){return e.asyncQueue.enqueue(G(Q().mark((function n(){return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Vd(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,kx(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Qx(e=Dx(e,Hx)),t).then((function(t){return t?new Ux(e,null,t.query):null}))}function tI(e){if(e._initialized||e._terminated)throw new Bd(jd.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var nI=function(){function e(){$(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Bd(jd.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fp(n)}return J(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var rI=function(){function e(t){$(this,e),this._byteString=t}return J(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(dp.fromBase64String(t))}catch(t){throw new Bd(jd.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(dp.fromUint8Array(t))}}]),e}(),iI=J((function e(t){$(this,e),this._methodName=t})),aI=function(){function e(t,n){if($(this,e),!isFinite(t)||t<-90||t>90)throw new Bd(jd.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Bd(jd.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return J(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return ep(this._lat,e._lat)||ep(this._long,e._long)}}]),e}(),oI=/^__.*__$/,uI=function(){function e(t,n,r){$(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return J(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new gm(e,this.data,this.fieldMask,t,this.fieldTransforms):new ym(e,this.data,t,this.fieldTransforms)}}]),e}(),sI=function(){function e(t,n,r){$(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return J(e,[{key:"toMutation",value:function(e,t){return new gm(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function cI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fd()}}var lI=function(){function e(t,n,r,i,a,o){$(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ya(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return J(e,[{key:"path",get:function(){return this.settings.path}},{key:"Xa",get:function(){return this.settings.Xa}},{key:"Za",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"tc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.nc(e),r}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.Ya(),r}},{key:"ic",value:function(e){return this.Za({path:void 0,ec:!0})}},{key:"rc",value:function(e){return AI(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ya",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.nc(this.path.get(e))}},{key:"nc",value:function(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(cI(this.Xa)&&oI.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}]),e}(),fI=function(){function e(t,n,r){$(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||Ub(t)}return J(e,[{key:"ac",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new lI({Xa:e,methodName:t,uc:n,path:fp.emptyPath(),ec:!1,oc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function hI(e){var t=e._freezeSettings(),n=Ub(e._databaseId);return new fI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function dI(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ac(a.merge||a.mergeFields?2:0,t,n,i);TI("Data must be an object, but it was:",o,r);var u,s,c=II(r,o);if(a.merge)u=new hp(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Z(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=EI(t,d,n);if(!o.contains(p))throw new Bd(jd.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));RI(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new hp(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new uI(new Qp(c),u,s)}var pI=function(e){ne(n,e);var t=ue(n);function n(){return $(this,n),t.apply(this,arguments)}return J(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Xa)throw 1===e.Xa?e.rc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.rc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(iI);function vI(e,t,n){return new lI({Xa:3,uc:t.settings.uc,methodName:e._methodName,ec:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var mI=function(e){ne(n,e);var t=ue(n);function n(){return $(this,n),t.apply(this,arguments)}return J(n,[{key:"_toFieldTransform",value:function(e){return new um(e.path,new Zv)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(iI),yI=function(e){ne(n,e);var t=ue(n);function n(e,r){var i;return $(this,n),(i=t.call(this,e)).cc=r,i}return J(n,[{key:"_toFieldTransform",value:function(e){var t=vI(this,e,!0),n=this.cc.map((function(e){return xI(e,t)})),r=new em(n);return new um(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(iI),gI=function(e){ne(n,e);var t=ue(n);function n(e,r){var i;return $(this,n),(i=t.call(this,e)).cc=r,i}return J(n,[{key:"_toFieldTransform",value:function(e){var t=vI(this,e,!0),n=this.cc.map((function(e){return xI(e,t)})),r=new nm(n);return new um(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(iI),kI=function(e){ne(n,e);var t=ue(n);function n(e,r){var i;return $(this,n),(i=t.call(this,e)).hc=r,i}return J(n,[{key:"_toFieldTransform",value:function(e){var t=new im(e.M,Qv(e.M,this.hc));return new um(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(iI);function bI(e,t,n,r){var i=e.ac(1,t,n);TI("Data must be an object, but it was:",i,r);var a=[],o=Qp.empty();op(r,(function(e,r){var u=NI(t,e,n);r=Fe(r);var s=i.sc(u);if(r instanceof pI)a.push(u);else{var c=xI(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new hp(a);return new sI(o,u,i.fieldTransforms)}function wI(e,t,n,r,i,a){var o=e.ac(1,t,n),u=[EI(t,r,n)],s=[i];if(a.length%2!=0)throw new Bd(jd.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(EI(t,a[c])),s.push(a[c+1]);for(var l=[],f=Qp.empty(),h=u.length-1;h>=0;--h)if(!RI(l,u[h])){var d=u[h],p=s[h];p=Fe(p);var v=o.sc(d);if(p instanceof pI)l.push(d);else{var m=xI(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new hp(l);return new sI(f,y,o.fieldTransforms)}function _I(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return xI(n,e.ac(r?4:3,t))}function xI(e,t){if(SI(e=Fe(e)))return TI("Unsupported field value:",t,e),II(e,t);if(e instanceof iI)return function(e,t){if(!cI(t.Xa))throw t.rc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.rc("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ec&&4!==t.Xa)throw t.rc("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Z(e);try{for(a.s();!(n=a.n()).done;){var o=xI(n.value,t.ic(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Fe(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Qv(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=rp.fromDate(e);return{timestampValue:iy(t.M,n)}}if(e instanceof rp){var r=new rp(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:iy(t.M,r)}}if(e instanceof aI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof rI)return{bytesValue:ay(t.M,e._byteString)};if(e instanceof Fx){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.rc("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:sy(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.rc("Unsupported field value: ".concat(Rx(e)))}(e,t)}function II(e,t){var n={};return up(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):op(e,(function(e,r){var i=xI(r,t.tc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function SI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof rp||e instanceof aI||e instanceof rI||e instanceof Fx||e instanceof iI)}function TI(e,t,n){if(!SI(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Rx(n);throw"an object"===r?t.rc(e+" a custom object"):t.rc(e+" "+r)}}function EI(e,t,n){if((t=Fe(t))instanceof nI)return t._internalPath;if("string"==typeof t)return NI(e,t);throw AI("Field path arguments must be of type string or ",e,!1,void 0,n)}var CI=new RegExp("[~\\*/\\[\\]]");function NI(e,t,n){if(t.search(CI)>=0)throw AI("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return se(nI,Ke(t.split(".")))._internalPath}catch(r){throw AI("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function AI(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Bd(jd.INVALID_ARGUMENT,u+e+s)}function RI(e,t){return e.some((function(e){return e.isEqual(t)}))}var DI=function(){function e(t,n,r,i,a){$(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return J(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Fx(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new PI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(OI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),PI=function(e){ne(n,e);var t=ue(n);function n(){return $(this,n),t.apply(this,arguments)}return J(n,[{key:"data",value:function(){return en(re(n.prototype),"data",this).call(this)}}]),n}(DI);function OI(e,t){return"string"==typeof t?NI(e,t):t instanceof nI?t._internalPath:t._delegate._internalPath}var LI=function(){function e(t,n){$(this,e),this.hasPendingWrites=t,this.fromCache=n}return J(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),MI=function(e){ne(n,e);var t=ue(n);function n(e,r,i,a,o,u){var s;return $(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return J(n,[{key:"exists",value:function(){return en(re(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new FI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(OI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(DI),FI=function(e){ne(n,e);var t=ue(n);function n(){return $(this,n),t.apply(this,arguments)}return J(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return en(re(n.prototype),"data",this).call(this,e)}}]),n}(MI),UI=function(){function e(t,n,r,i){$(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new LI(i.hasPendingWrites,i.fromCache),this.query=r}return J(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new FI(n._firestore,n._userDataWriter,r.key,r,new LI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Bd(jd.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new FI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new LI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new FI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new LI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:VI(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function VI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fd()}}function jI(e,t){return e instanceof MI&&t instanceof MI?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof UI&&t instanceof UI&&e._firestore===t._firestore&&qx(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function BI(e){if(Dv(e)&&0===e.explicitOrderBy.length)throw new Bd(jd.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var zI=J((function e(){$(this,e)}));function qI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var KI=function(e){ne(n,e);var t=ue(n);function n(e,r,i){var a;return $(this,n),(a=t.call(this)).lc=e,a.fc=r,a.dc=i,a.type="where",a}return J(n,[{key:"_apply",value:function(e){var t=hI(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Bd(jd.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){tS(o,a);var s,c=[],l=Z(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(eS(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=eS(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||tS(o,a),u=_I(n,"where",o,"in"===a||"not-in"===a);var h=pv.create(i,a,u);return function(e,t){if(t.S()){var n=Ov(e);if(null!==n&&!n.isEqual(t.field))throw new Bd(jd.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Pv(e);null!==r&&nS(e,t.field,r)}var i=function(e,t){var n,r=Z(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Bd(jd.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Bd(jd.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new Ux(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Cv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(zI);var WI=function(e){ne(n,e);var t=ue(n);function n(e,r){var i;return $(this,n),(i=t.call(this)).lc=e,i._c=r,i.type="orderBy",i}return J(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Bd(jd.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Bd(jd.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Iv(t,n);return function(e,t){if(null===Pv(e)){var n=Ov(e);null!==n&&nS(e,n,t.field)}}(e,r),r}(e._query,this.lc,this._c);return new Ux(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Cv(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(zI);var GI=function(e){ne(n,e);var t=ue(n);function n(e,r,i){var a;return $(this,n),(a=t.call(this)).type=e,a.wc=r,a.mc=i,a}return J(n,[{key:"_apply",value:function(e){return new Ux(e.firestore,e.converter,Uv(e._query,this.wc,this.mc))}}]),n}(zI);var HI=function(e){ne(n,e);var t=ue(n);function n(e,r,i){var a;return $(this,n),(a=t.call(this)).type=e,a.gc=r,a.yc=i,a}return J(n,[{key:"_apply",value:function(e){var t=ZI(e,this.type,this.gc,this.yc);return new Ux(e.firestore,e.converter,function(e,t){return new Cv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(zI);function QI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new HI("startAt",t,!0)}function YI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new HI("startAfter",t,!1)}var $I=function(e){ne(n,e);var t=ue(n);function n(e,r,i){var a;return $(this,n),(a=t.call(this)).type=e,a.gc=r,a.yc=i,a}return J(n,[{key:"_apply",value:function(e){var t=ZI(e,this.type,this.gc,this.yc);return new Ux(e.firestore,e.converter,function(e,t){return new Cv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(zI);function XI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new $I("endBefore",t,!1)}function JI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new $I("endAt",t,!0)}function ZI(e,t,n,r){if(n[0]=Fe(n[0]),n[0]instanceof DI)return function(e,t,n,r,i){if(!r)throw new Bd(jd.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Z(Mv(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Mp(t,r.key));else{var c=r.data.field(s.field);if(gp(c))throw new Bd(jd.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Bd(jd.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new xv(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=hI(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Bd(jd.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Bd(jd.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Lv(e)&&-1!==c.indexOf("/"))throw new Bd(jd.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(cp.fromString(c));if(!Tp.isDocumentKey(l))throw new Bd(jd.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Tp(l);u.push(Mp(t,f))}else{var h=_I(n,r,c);u.push(h)}}return new xv(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function eS(e,t,n){if("string"==typeof(n=Fe(n))){if(""===n)throw new Bd(jd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lv(t)&&-1!==n.indexOf("/"))throw new Bd(jd.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(cp.fromString(n));if(!Tp.isDocumentKey(r))throw new Bd(jd.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Mp(e,new Tp(r))}if(n instanceof Fx)return Mp(e,n._key);throw new Bd(jd.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Rx(n),"."))}function tS(e,t){if(!Array.isArray(e)||0===e.length)throw new Bd(jd.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Bd(jd.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function nS(e,t,n){if(!n.isEqual(t))throw new Bd(jd.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var rS=function(){function e(){$(this,e)}return J(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Np(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mp(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Fd()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return op(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new aI(mp(e.latitude),mp(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=kp(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(bp(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=vp(e);return new rp(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=cp.fromString(e);Ud(Dy(n));var r=new _p(n.get(1),n.get(3)),i=new Tp(n.popFirst(5));return r.isEqual(t)||Od("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function iS(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var aS=function(e){ne(n,e);var t=ue(n);function n(e){var r;return $(this,n),(r=t.call(this)).firestore=e,r}return J(n,[{key:"convertBytes",value:function(e){return new rI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fx(this.firestore,null,t)}}]),n}(rS),oS=function(){function e(t,n){$(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=hI(t)}return J(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=uS(e,this._firestore),i=iS(r.converter,t,n),a=dI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,cm.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=uS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Fe(t))||t instanceof nI?wI(this._dataReader,"WriteBatch.update",i._key,t,n,o):bI(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,cm.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=uS(e,this._firestore);return this._mutations=this._mutations.concat(new Im(t._key,cm.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Bd(jd.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function uS(e,t){if((e=Fe(e)).firestore!==t)throw new Bd(jd.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var sS=function(e){ne(n,e);var t=ue(n);function n(e){var r;return $(this,n),(r=t.call(this)).firestore=e,r}return J(n,[{key:"convertBytes",value:function(e){return new rI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fx(this.firestore,null,t)}}]),n}(rS);function cS(e){e=Dx(e,Fx);var t=Dx(e.firestore,Hx),n=Qx(t),r=new sS(t);return function(e,t){var n=new zd;return e.asyncQueue.enqueueAndForget(G(Q().mark((function r(){return Q().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=G(Q().mark((function e(t,n,r){var i,a;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Vd(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.ci.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Bd(jd.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Ow(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,kx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new MI(t,r,e._key,n,new LI(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function lS(e){e=Dx(e,Ux);var t=Dx(e.firestore,Hx),n=Qx(t),r=new sS(t);return function(e,t){var n=new zd;return e.asyncQueue.enqueueAndForget(G(Q().mark((function r(){return Q().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=G(Q().mark((function e(t,n,r){var i,a,o,u,s;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nb(t,n,!0);case 3:i=e.sent,a=new e_(n,i.li),o=a.Gu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Ow(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,kx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new UI(t,r,e,n)}))}function fS(e,t,n){e=Dx(e,Fx);var r=Dx(e.firestore,Hx),i=iS(e.converter,t,n);return mS(r,[dI(hI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,cm.none())])}function hS(e,t,n){e=Dx(e,Fx);for(var r=Dx(e.firestore,Hx),i=hI(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return mS(r,[("string"==typeof(t=Fe(t))||t instanceof nI?wI(i,"updateDoc",e._key,t,n,o):bI(i,"updateDoc",e._key,t)).toMutation(e._key,cm.exists(!0))])}function dS(e){return mS(Dx(e.firestore,Hx),[new Im(e._key,cm.none())])}function pS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Fe(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Wx(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(Wx(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Fx)l=Dx(e.firestore,Hx),f=Av(e._key.path),c={next:function(t){n[s]&&n[s](yS(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Dx(e,Ux);l=Dx(p.firestore,Hx),f=p._query;var v=new sS(l);c={next:function(e){n[s]&&n[s](new UI(l,v,p,e))},error:n[s+1],complete:n[s+2]},BI(e._query)}return function(e,t,n,r){var i=new ax(r),a=new Hw(t,i,n);return e.asyncQueue.enqueueAndForget(G(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=jw,t.next=3,_x(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Ia(),e.asyncQueue.enqueueAndForget(G(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=zw,t.next=3,_x(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Qx(l),f,h,c)}function vS(e,t){return function(e,t){var n=new ax(t);return e.asyncQueue.enqueueAndForget(G(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Vd(e).Eu.add(t),t.next()},t.next=3,_x(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Ia(),e.asyncQueue.enqueueAndForget(G(Q().mark((function t(){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Vd(e).Eu.delete(t)},t.next=3,_x(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Qx(e=Dx(e,Hx)),Wx(t)?t:{next:t})}function mS(e,t){return function(e,t){var n=new zd;return e.asyncQueue.enqueueAndForget(G(Q().mark((function r(){return Q().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=l_,r.next=3,wx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Qx(e),t)}function yS(e,t,n){var r=n.docs.get(t._key),i=new sS(e);return new MI(e,i,t._key,r,new LI(n.hasPendingWrites,n.fromCache),t.converter)}var gS=function(e){ne(n,e);var t=ue(n);function n(e,r){var i;return $(this,n),(i=t.call(this,e,r))._firestore=e,i}return J(n,[{key:"get",value:function(e){var t=this,r=uS(e,this._firestore),i=new sS(this._firestore);return en(re(n.prototype),"get",this).call(this,e).then((function(e){return new MI(t._firestore,i,r._key,e._document,new LI(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){$(this,e),this._firestore=t,this._transaction=n,this._dataReader=hI(t)}return J(e,[{key:"get",value:function(e){var t=this,n=uS(e,this._firestore),r=new aS(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Fd();var i=e[0];if(i.isFoundDocument())return new DI(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new DI(t._firestore,r,n._key,null,n.converter);throw Fd()}))}},{key:"set",value:function(e,t,n){var r=uS(e,this._firestore),i=iS(r.converter,t,n),a=dI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=uS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Fe(t))||t instanceof nI?wI(this._dataReader,"Transaction.update",i._key,t,n,o):bI(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=uS(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function kS(e,t){return function(e,t){var n=new zd;return e.asyncQueue.enqueueAndForget(G(Q().mark((function r(){var i;return Q().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return mx(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new sx(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(Qx(e=Dx(e,Hx)),(function(n){return t(new gS(e,n))}))}function bS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new yI("arrayUnion",t)}function wS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gI("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ad=e}(_t),vt(new We("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Hx(i,new Gd(e.getProvider("auth-internal")),new $d(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Ct(Cd,"3.4.8",e),Ct(Cd,"3.4.8","esm2017")}();function _S(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Bd("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function xS(){if("undefined"===typeof Uint8Array)throw new Bd("unimplemented","Uint8Arrays are not available in this environment.")}function IS(){if("undefined"==typeof atob)throw new Bd("unimplemented","Blobs are unavailable in Firestore in this environment.")}var SS=function(){function e(t){$(this,e),this._delegate=t}return J(e,[{key:"toBase64",value:function(){return IS(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return xS(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return IS(),new e(rI.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return xS(),new e(rI.fromUint8Array(t))}}]),e}();function TS(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Z(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var ES=function(){function e(){$(this,e)}return J(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){tI(e=Dx(e,Hx));var n=Qx(e),r=e._freezeSettings(),i=new rx;return $x(n,i,new tx(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){tI(e=Dx(e,Hx));var t=Qx(e),n=e._freezeSettings(),r=new rx;return $x(t,r,new nx(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Bd(jd.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new zd;return e._queue.enqueueAndForgetEvenWhileRestricted(G(Q().mark((function n(){return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=G(Q().mark((function e(t){var n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(cg.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,cg.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(jk(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),CS=function(){function e(t,n,r){var i=this;$(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof _p||(this._appCompat=t)}return J(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Ld("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Mx(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Xx(this._delegate)}},{key:"disableNetwork",value:function(){return Jx(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Cx("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new zd;return e.asyncQueue.enqueueAndForget(G(Q().mark((function n(){return Q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=w_,n.next=3,wx(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Qx(e=Dx(e,Hx)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return vS(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Bd("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new zS(this,jx(this._delegate,e))}catch(t){throw OS(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new PS(this,Bx(this._delegate,e))}catch(t){throw OS(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new VS(this,function(e,t){if(e=Dx(e,Lx),Ex("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Bd(jd.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Ux(e,null,function(e){return new Cv(cp.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw OS(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return kS(this._delegate,(function(n){return e(new AS(t,n))}))}},{key:"batch",value:function(){var e=this;return Qx(this._delegate),new RS(new oS(this._delegate,(function(t){return mS(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Zx(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return eI(this._delegate,e).then((function(e){return e?new VS(t,e):null}))}}]),e}(),NS=function(e){ne(n,e);var t=ue(n);function n(e){var r;return $(this,n),(r=t.call(this)).firestore=e,r}return J(n,[{key:"convertBytes",value:function(e){return new SS(new rI(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return PS.forKey(t,this.firestore,null)}}]),n}(rS);var AS=function(){function e(t,n){$(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new NS(t)}return J(e,[{key:"get",value:function(e){var t=this,n=qS(e);return this._delegate.get(n).then((function(e){return new FS(t._firestore,new MI(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=qS(e);return n?(_S("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=qS(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=qS(e);return this._delegate.delete(t),this}}]),e}(),RS=function(){function e(t){$(this,e),this._delegate=t}return J(e,[{key:"set",value:function(e,t,n){var r=qS(e);return n?(_S("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=qS(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=qS(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),DS=function(){function e(t,n,r){$(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return J(e,[{key:"fromFirestore",value:function(e,t){var n=new FI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new US(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new NS(t),n),i.set(n,a)),a}}]),e}();DS.INSTANCES=new WeakMap;var PS=function(){function e(t,n){$(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new NS(t)}return J(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new zS(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new zS(this.firestore,jx(this._delegate,e))}catch(t){throw OS(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Fe(e))instanceof Fx&&zx(this._delegate,e)}},{key:"set",value:function(e,t){t=_S("DocumentReference.set",t);try{return t?fS(this._delegate,e,t):fS(this._delegate,e)}catch(n){throw OS(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?hS(this._delegate,e):hS.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw OS(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return dS(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=LS(n),a=MS(n,(function(t){return new FS(e.firestore,new MI(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return pS(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?cS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Dx(e,Fx);var t=Dx(e.firestore,Hx);return Ix(Qx(t),e._key,{source:"server"}).then((function(n){return yS(t,e,n)}))}(this._delegate):function(e){e=Dx(e,Fx);var t=Dx(e.firestore,Hx);return Ix(Qx(t),e._key).then((function(n){return yS(t,e,n)}))}(this._delegate),t.then((function(e){return new FS(n.firestore,new MI(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(DS.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Bd("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Fx(n._delegate,r,new Tp(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Fx(n._delegate,r,t))}}]),e}();function OS(e,t,n){return e.message=e.message.replace(t,n),e}function LS(e){var t,n=Z(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!TS(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function MS(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=TS(e[0])?e[0]:TS(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var FS=function(){function e(t,n){$(this,e),this._firestore=t,this._delegate=n}return J(e,[{key:"ref",get:function(){return new PS(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return jI(this._delegate,e._delegate)}}]),e}(),US=function(e){ne(n,e);var t=ue(n);function n(){return $(this,n),t.apply(this,arguments)}return J(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Fd()}(void 0!==t),t}}]),n}(FS),VS=function(){function e(t,n){$(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new NS(t)}return J(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,qI(this._delegate,function(e,t,n){var r=t,i=OI("where",e);return new KI(i,r,n)}(t,n,r)))}catch(i){throw OS(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,qI(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=OI("orderBy",e);return new WI(n,t)}(t,n)))}catch(r){throw OS(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,qI(this._delegate,function(e){return Px("limit",e),new GI("limit",e,"F")}(t)))}catch(n){throw OS(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,qI(this._delegate,function(e){return Px("limitToLast",e),new GI("limitToLast",e,"L")}(t)))}catch(n){throw OS(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,qI(this._delegate,QI.apply(void 0,arguments)))}catch(t){throw OS(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,qI(this._delegate,YI.apply(void 0,arguments)))}catch(t){throw OS(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,qI(this._delegate,XI.apply(void 0,arguments)))}catch(t){throw OS(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,qI(this._delegate,JI.apply(void 0,arguments)))}catch(t){throw OS(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return qx(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?lS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Dx(e,Ux);var t=Dx(e.firestore,Hx),n=Qx(t),r=new sS(t);return Sx(n,e._query,{source:"server"}).then((function(n){return new UI(t,r,e,n)}))}(this._delegate):function(e){e=Dx(e,Ux);var t=Dx(e.firestore,Hx),n=Qx(t),r=new sS(t);return BI(e._query),Sx(n,e._query).then((function(n){return new UI(t,r,e,n)}))}(this._delegate),t.then((function(e){return new BS(n.firestore,new UI(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=LS(n),a=MS(n,(function(t){return new BS(e.firestore,new UI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return pS(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(DS.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),jS=function(){function e(t,n){$(this,e),this._firestore=t,this._delegate=n}return J(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new US(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),BS=function(){function e(t,n){$(this,e),this._firestore=t,this._delegate=n}return J(e,[{key:"query",get:function(){return new VS(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new US(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new jS(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new US(n._firestore,r))}))}},{key:"isEqual",value:function(e){return jI(this._delegate,e._delegate)}}]),e}(),zS=function(e){ne(n,e);var t=ue(n);function n(e,r){var i;return $(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return J(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new PS(this.firestore,e):null}},{key:"doc",value:function(e){try{return new PS(this.firestore,void 0===e?Bx(this._delegate):Bx(this._delegate,e))}catch(t){throw OS(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Dx(e.firestore,Hx),r=Bx(e),i=iS(e.converter,t);return mS(n,[dI(hI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,cm.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new PS(t.firestore,e)}))}},{key:"isEqual",value:function(e){return zx(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(DS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(VS);function qS(e){return Dx(e,Fx)}var KS=function(){function e(){$(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=se(nI,n)}return J(e,[{key:"isEqual",value:function(e){return(e=Fe(e))instanceof nI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(fp.keyField().canonicalString())}}]),e}(),WS=function(){function e(t){$(this,e),this._delegate=t}return J(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new mI("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new pI("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=bS.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=wS.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new kI("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),GS={Firestore:CS,GeoPoint:aI,Timestamp:rp,Blob:SS,Transaction:AS,WriteBatch:RS,DocumentReference:PS,DocumentSnapshot:FS,Query:VS,QueryDocumentSnapshot:US,QuerySnapshot:BS,CollectionReference:zS,FieldPath:KS,FieldValue:WS,setLogLevel:function(e){!function(e){Rd.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new We("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},GS)))}(e,(function(e,t){return new CS(e,t,new ES)})),e.registerVersion("@firebase/firestore-compat","0.1.17")}(Jt);var HS="firebasestorage.googleapis.com",QS=function(e){ne(n,e);var t=ue(n);function n(e,r){var i;return $(this,n),(i=t.call(this,YS(e),"Firebase Storage: ".concat(r," (").concat(YS(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(ee(i),n.prototype),i}return J(n,[{key:"_codeEquals",value:function(e){return YS(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Ie);function YS(e){return"storage/"+e}function $S(){return new QS("unknown","An unknown error occurred, please check the error payload for server response.")}function XS(){return new QS("canceled","User canceled the upload/download.")}function JS(){return new QS("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ZS(e){return new QS("invalid-argument",e)}function eT(){return new QS("app-deleted","The Firebase app was deleted.")}function tT(e){return new QS("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nT(e,t){return new QS("invalid-format","String does not match format '"+e+"': "+t)}function rT(e){throw new QS("internal-error","Internal error: "+e)}var iT,aT=function(){function e(t,n){$(this,e),this.bucket=t,this.path_=n}return J(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new QS("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===HS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new QS("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),oT=function(){function e(t){$(this,e),this.promise_=Promise.reject(t)}return J(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function uT(e){return"string"===typeof e||e instanceof String}function sT(e){return cT()&&e instanceof Blob}function cT(){return"undefined"!==typeof Blob}function lT(e,t,n,r){if(r<t)throw ZS("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw ZS("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function fT(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function hT(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(iT||(iT={}));var dT=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this;$(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return J(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=$S();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?eT():XS());else i(new QS("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new pT(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new pT(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===iT.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new pT(o,r))}else{var u=r.getErrorCode()===iT.ABORT;t(!1,new pT(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),pT=J((function e(t,n,r){$(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function vT(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function mT(){for(var e=vT(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(cT())return new Blob(n);throw new QS("unsupported-environment","This browser doesn't seem to support creating Blobs")}var yT={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},gT=J((function e(t,n){$(this,e),this.data=t,this.contentType=n||null}));function kT(e,t){switch(e){case yT.RAW:return new gT(bT(t));case yT.BASE64:case yT.BASE64URL:return new gT(wT(e,t));case yT.DATA_URL:return new gT(function(e){var t=new _T(e);return t.base64?wT(yT.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw nT(yT.DATA_URL,"Malformed data URL.")}return bT(t)}(t.rest)}(t),new _T(t).contentType)}throw $S()}function bT(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function wT(e,t){switch(e){case yT.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw nT(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case yT.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw nT(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw nT(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var _T=J((function e(t){$(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw nT(yT.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var xT=function(){function e(t,n){$(this,e);var r=0,i="";sT(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return J(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(sT(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(cT()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(mT.apply(null,i))}var a=n.map((function(e){return uT(e)?kT(yT.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function IT(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function ST(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function TT(e,t){return t}var ET=J((function e(t,n,r,i){$(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||TT})),CT=null;function NT(){if(CT)return CT;var e=[];e.push(new ET("bucket")),e.push(new ET("generation")),e.push(new ET("metageneration")),e.push(new ET("name","fullPath",!0));var t=new ET("name");t.xform=function(e,t){return function(e){return!uT(e)||e.length<2?e:ST(e)}(t)},e.push(t);var n=new ET("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new ET("timeCreated")),e.push(new ET("updated")),e.push(new ET("md5Hash",null,!0)),e.push(new ET("cacheControl",null,!0)),e.push(new ET("contentDisposition",null,!0)),e.push(new ET("contentEncoding",null,!0)),e.push(new ET("contentLanguage",null,!0)),e.push(new ET("contentType",null,!0)),e.push(new ET("metadata","customMetadata",!0)),CT=e}function AT(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new aT(n,r);return t._makeStorageReference(i)}})}(r,e),r}function RT(e,t,n){var r=IT(t);return null===r?null:AT(e,r,n)}function DT(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function PT(e,t,n){var r=IT(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=Z(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new aT(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var s,c=Z(n.items);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new aT(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var OT=J((function e(t,n,r,i){$(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function LT(e){if(!e)throw $S()}function MT(e,t){return function(n,r){var i=RT(e,r,t);return LT(null!==i),i}}function FT(e,t){return function(n,r){var i=RT(e,r,t);return LT(null!==i),function(e,t,n,r){var i=IT(t);if(null===i)return null;if(!uT(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return fT("/b/"+o(i)+"/o/"+o(a),n,r)+hT({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function UT(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new QS("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new QS("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new QS("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new QS("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function VT(e){var t=UT(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new QS("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function jT(e,t,n){var r=fT(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new OT(r,"GET",MT(e,n),i);return a.errorHandler=VT(t),a}function BT(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=fT(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new OT(o,"GET",function(e,t){return function(n,r){var i=PT(e,t,r);return LT(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=UT(t),s}function zT(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function qT(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=zT(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+DT(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=xT.getBlob(c,r,l);if(null===f)throw JS();var h={name:s.fullPath},d=fT(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new OT(d,"POST",MT(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=UT(t),v}var KT=J((function e(t,n,r,i){$(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function WT(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){LT(!1)}return LT(!!n&&-1!==(t||["active"]).indexOf(n)),n}var GT=262144;function HT(e,t,n,r,i,a,o,u){var s=new KT(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new QS("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw JS();var v=t.maxUploadRetryTime,m=new OT(n,"POST",(function(e,n){var i,o=WT(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?MT(t,a)(e,n):null,new KT(u,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=u||null,m.errorHandler=UT(e),m}var QT={STATE_CHANGED:"state_changed"},YT={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function $T(e){switch(e){case"running":case"pausing":case"canceling":return YT.RUNNING;case"paused":return YT.PAUSED;case"success":return YT.SUCCESS;case"canceled":return YT.CANCELED;default:return YT.ERROR}}var XT=J((function e(t,n,r){$(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function JT(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var ZT=function(){function e(){var t=this;$(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=iT.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=iT.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=iT.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return J(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw rT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw rT("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw rT("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw rT("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw rT("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),eE=function(e){ne(n,e);var t=ue(n);function n(){return $(this,n),t.apply(this,arguments)}return J(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(ZT);function tE(){return new eE}var nE=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;$(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=NT(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return J(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=c(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=zT(t,r,i),u={name:o.fullPath},s=fT(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=DT(o,n),f=e.maxUploadRetryTime,h=new OT(s,"POST",(function(e){var t;WT(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){LT(!1)}return LT(uT(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=UT(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,tE,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new OT(n,"POST",(function(e){var t=WT(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){LT(!1)}n||LT(!1);var i=Number(n);return LT(!isNaN(i)),new KT(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=UT(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,tE,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=GT*this._chunkMultiplier,n=new KT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=HT(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,tE,i,a);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){GT*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=jT(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,tE,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=qT(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,tE,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=XS(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=$T(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new XT(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch($T(this._state)){case YT.SUCCESS:JT(this._resolve.bind(null,this.snapshot))();break;case YT.CANCELED:case YT.ERROR:JT(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch($T(this._state)){case YT.RUNNING:case YT.PAUSED:e.next&&JT(e.next.bind(e,this.snapshot))();break;case YT.SUCCESS:e.complete&&JT(e.complete.bind(e))();break;default:e.error&&JT(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),rE=function(){function e(t,n){$(this,e),this._service=t,this._location=n instanceof aT?n:aT.makeFromUrl(n,t.host)}return J(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new aT(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return ST(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new aT(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw tT(e)}}]),e}();function iE(e,t,n){e._throwIfRoot("uploadBytes");var r=qT(e.storage,e._location,NT(),new xT(t,!0),n);return e.storage.makeRequestWithTokens(r,tE).then((function(t){return{metadata:t,ref:e}}))}function aE(e,t,n){return oE.apply(this,arguments)}function oE(){return(oE=G(Q().mark((function e(t,n,r){var i,a,o,u;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,uE(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,Ke(u.prefixes)),(a=n.items).push.apply(a,Ke(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,aE(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uE(e,t){null!=t&&"number"===typeof t.maxResults&&lT("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=BT(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,tE)}function sE(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=fT(t.fullServerUrl(),e.host,e._protocol),a=DT(n,r),o=e.maxOperationRetryTime,u=new OT(i,"PATCH",MT(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=VT(t),u}(e.storage,e._location,t,NT());return e.storage.makeRequestWithTokens(n,tE)}function cE(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=fT(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new OT(r,"GET",FT(e,n),i);return a.errorHandler=VT(t),a}(e.storage,e._location,NT());return e.storage.makeRequestWithTokens(t,tE).then((function(e){if(null===e)throw new QS("no-download-url","The given file does not have any download URLs.");return e}))}function lE(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=fT(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new OT(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=VT(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,tE)}function fE(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new aT(e._location.bucket,n);return new rE(e.storage,r)}function hE(e,t){if(e instanceof mE){var n=e;if(null==n._bucket)throw new QS("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new rE(n,n._bucket);return null!=t?hE(r,t):r}return void 0!==t?fE(e,t):e}function dE(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof mE)return new rE(e,t);throw ZS("To use ref(service, url), the first argument must be a Storage instance.")}return hE(e,t)}function pE(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:aT.makeFromBucketSpec(n,e)}function vE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:me(i,e.app.options.projectId))}var mE=function(){function e(t,n,r,i,a){$(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=HS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?aT.makeFromBucketSpec(i,this._host):pE(this._host,this.app.options)}return J(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=aT.makeFromBucketSpec(this._url,e):this._bucket=pE(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){lT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){lT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=G(Q().mark((function e(){var t,n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=G(Q().mark((function e(){var t,n;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new rE(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new oT(eT());var a=function(e,t,n,r,i,a){var o=hT(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new dT(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=G(Q().mark((function e(t,n){var r,i,a,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=c(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),yE="@firebase/storage",gE="0.9.5",kE="storage";function bE(e,t,n,r){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yT.RAW,r=arguments.length>3?arguments[3]:void 0;e._throwIfRoot("uploadString");var i=kT(n,t),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),iE(e,i.data,a)}(e=Fe(e),t,n,r)}function wE(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new nE(e,new xT(t),n)}(e=Fe(e),t,n)}function _E(e){return function(e){e._throwIfRoot("getMetadata");var t=jT(e.storage,e._location,NT());return e.storage.makeRequestWithTokens(t,tE)}(e=Fe(e))}function xE(e){return function(e){var t={prefixes:[],items:[]};return aE(e,t).then((function(){return t}))}(e=Fe(e))}function IE(e){return cE(e=Fe(e))}function SE(e){return lE(e=Fe(e))}function TE(e,t){return dE(e=Fe(e),t)}function EE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};vE(e,t,n,r)}function CE(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new mE(r,i,a,n,_t)}vt(new We(kE,CE,"PUBLIC").setMultipleInstances(!0)),Ct(yE,gE,""),Ct(yE,gE,"esm2017");var NE=function(){function e(t,n,r){$(this,e),this._delegate=t,this.task=n,this.ref=r}return J(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),AE=function(){function e(t,n){$(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return J(e,[{key:"snapshot",get:function(){return new NE(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new NE(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new NE(e,i,i._ref))}:{next:t.next?function(e){return t.next(new NE(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),RE=function(){function e(t,n){$(this,e),this._delegate=t,this._service=n}return J(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new DE(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new DE(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),DE=function(){function e(t,n){$(this,e),this._delegate=t,this.storage=n}return J(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return fE(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new AE(wE(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yT.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=kT(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new AE(new nE(this._delegate,new xT(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return xE(this._delegate).then((function(t){return new RE(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return uE(e=Fe(e),t)}(this._delegate,e||void 0).then((function(e){return new RE(e,t.storage)}))}},{key:"getMetadata",value:function(){return _E(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return sE(e=Fe(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return IE(this._delegate)}},{key:"delete",value:function(){return this._throwIfRoot("delete"),SE(this._delegate)}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw tT(e)}}]),e}(),PE=function(){function e(t,n){$(this,e),this.app=t,this._delegate=n}return J(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(OE(e))throw ZS("ref() expected a child path but got a URL, use refFromURL instead.");return new DE(TE(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!OE(e))throw ZS("refFromURL() expected a full URL but got a child path, use ref() instead.");try{aT.makeFromUrl(e,this._delegate.host)}catch(t){throw ZS("refFromUrl() expected a valid full URL but got an invalid one.")}return new DE(TE(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};EE(this._delegate,e,t,n)}}]),e}();function OE(e){return/^[A-Za-z]+:\/\//.test(e)}function LE(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new PE(r,i)}!function(e){var t={TaskState:YT,TaskEvent:QT,StringFormat:yT,Storage:PE,Reference:DE};e.INTERNAL.registerComponent(new We("storage-compat",LE,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.13")}(Jt);Jt.initializeApp({apiKey:"AIzaSyBOO00dRjx9jgdXt4zcKmo8rQbOHSLqFq8",authDomain:"twitter-9cbcb.firebaseapp.com",projectId:"twitter-9cbcb",storageBucket:"twitter-9cbcb.appspot.com",messagingSenderId:"271120304067",appId:"1:271120304067:web:1e20e6da38d6a3b512df76"});var ME=Jt,FE=Jt.auth(),UE=Jt.firestore(),VE=Jt.storage(),jE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},BE=r.createContext&&r.createContext(jE),zE=function(){return zE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},zE.apply(this,arguments)},qE=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function KE(e){return e&&e.map((function(e,t){return r.createElement(e.tag,zE({key:t},e.attr),KE(e.child))}))}function WE(e){return function(t){return r.createElement(GE,zE({attr:zE({},e.attr)},t),KE(e.child))}}function GE(e){var t=function(t){var n,i=e.attr,a=e.size,o=e.title,u=qE(e,["attr","size","title"]),s=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",zE({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,u,{className:n,style:zE(zE({color:e.color||t.color},t.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&r.createElement("title",null,o),e.children)};return void 0!==BE?r.createElement(BE.Consumer,null,(function(e){return t(e)})):t(jE)}function HE(e){return WE({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{fillRule:"nonzero",d:"M15.3 5.55a2.9 2.9 0 0 0-2.9 2.847l-.028 1.575a.6.6 0 0 1-.68.583l-1.561-.212c-2.054-.28-4.022-1.226-5.91-2.799-.598 3.31.57 5.603 3.383 7.372l1.747 1.098a.6.6 0 0 1 .034.993L7.793 18.17c.947.059 1.846.017 2.592-.131 4.718-.942 7.855-4.492 7.855-10.348 0-.478-1.012-2.141-2.94-2.141zm-4.9 2.81a4.9 4.9 0 0 1 8.385-3.355c.711-.005 1.316.175 2.669-.645-.335 1.64-.5 2.352-1.214 3.331 0 7.642-4.697 11.358-9.463 12.309-3.268.652-8.02-.419-9.382-1.841.694-.054 3.514-.357 5.144-1.55C5.16 15.7-.329 12.47 3.278 3.786c1.693 1.977 3.41 3.323 5.15 4.037 1.158.475 1.442.465 1.973.538z"}}]}]})(e)}var QE=n(184),YE=function(){var e=c((0,r.useState)(""),2),t=e[0],n=e[1],i=c((0,r.useState)(""),2),a=i[0],o=i[1],u=c((0,r.useState)(!0),2),s=u[0],l=u[1],f=c((0,r.useState)(""),2),h=f[0],d=f[1],p=function(e){var t=e.target,r=t.name,i=t.value;"email"===r?n(i):"password"===r&&o(i)},v=function(){var e=G(Q().mark((function e(n){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),e.prev=1,!s){e.next=8;break}return e.next=5,FE.createUserWithEmailAndPassword(t,a);case 5:e.sent,e.next=11;break;case 8:return e.next=10,FE.signInWithEmailAndPassword(t,a);case 10:e.sent;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),d(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=G(Q().mark((function e(t){var n,r;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===t.target.name&&(n=new ME.auth.GoogleAuthProvider),e.next=4,FE.signInWithPopup(n);case 4:r=e.sent,console.log(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,QE.jsxs)("div",{className:"Login_main_div",children:[(0,QE.jsx)(HE,{className:"Login_twt_logo"}),(0,QE.jsx)("p",{className:"Login_twt_title",children:"Twitter SokDak"}),(0,QE.jsxs)("form",{onSubmit:v,className:"Login_form",children:[(0,QE.jsx)("input",{name:"email",type:"email",placeholder:"email@example.com",required:!0,value:t,onChange:p,className:"Login_input"}),(0,QE.jsx)("input",{name:"password",type:"password",placeholder:"6\uae00\uc790 \uc774\uc0c1",required:!0,value:a,onChange:p,className:"Login_input"}),(0,QE.jsx)("input",{type:"submit",value:s?"\ud68c\uc6d0\uac00\uc785":"\ub85c\uadf8\uc778",className:"Login_submit"}),h]}),(0,QE.jsx)("p",{onClick:function(){return l((function(e){return!e}))},className:"Login_join",children:s?"\ub85c\uadf8\uc778":"\ud68c\uc6d0\uac00\uc785"}),(0,QE.jsx)("span",{}),(0,QE.jsx)("button",{name:"google",onClick:m,children:"\uad6c\uae00\ub85c \ub85c\uadf8\uc778"})]})};function $E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XE(e){return WE({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 8c-2.168 0-4 1.832-4 4s1.832 4 4 4 4-1.832 4-4-1.832-4-4-4zm0 6c-1.065 0-2-.935-2-2s.935-2 2-2 2 .935 2 2-.935 2-2 2z"}},{tag:"path",attr:{d:"M20 5h-2.586l-2.707-2.707A.996.996 0 0 0 14 2h-4a.996.996 0 0 0-.707.293L6.586 5H4c-1.103 0-2 .897-2 2v11c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V7c0-1.103-.897-2-2-2zM4 18V7h3c.266 0 .52-.105.707-.293L10.414 4h3.172l2.707 2.707A.996.996 0 0 0 17 7h3l.002 11H4z"}}]})(e)}function JE(e){return WE({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m7 17.013 4.413-.015 9.632-9.54c.378-.378.586-.88.586-1.414s-.208-1.036-.586-1.414l-1.586-1.586c-.756-.756-2.075-.752-2.825-.003L7 12.583v4.43zM18.045 4.458l1.589 1.583-1.597 1.582-1.586-1.585 1.594-1.58zM9 13.417l6.03-5.973 1.586 1.586-6.029 5.971L9 15.006v-1.589z"}},{tag:"path",attr:{d:"M5 21h14c1.103 0 2-.897 2-2v-8.668l-2 2V19H8.158c-.026 0-.053.01-.079.01-.033 0-.066-.009-.1-.01H5V5h6.847l2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2z"}}]})(e)}function ZE(e){return WE({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 21a1 1 0 0 0 .24 0l4-1a1 1 0 0 0 .47-.26L21 7.41a2 2 0 0 0 0-2.82L19.42 3a2 2 0 0 0-2.83 0L4.3 15.29a1.06 1.06 0 0 0-.27.47l-1 4A1 1 0 0 0 3.76 21 1 1 0 0 0 4 21zM18 4.41 19.59 6 18 7.59 16.42 6zM5.91 16.51 15 7.41 16.59 9l-9.1 9.1-2.11.52z"}}]})(e)}function eC(e){return WE({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 11h-6V5h-2v6H5v2h6v6h2v-6h6z"}}]})(e)}function tC(e){return WE({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m11.293 17.293 1.414 1.414L19.414 12l-6.707-6.707-1.414 1.414L15.586 11H6v2h9.586z"}}]})(e)}function nC(e){return WE({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5 20a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8h2V6h-4V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v2H3v2h2zM9 4h6v2H9zM8 8h9v12H7V8z"}},{tag:"path",attr:{d:"M9 10h2v8H9zm4 0h2v8h-2z"}}]})(e)}function rC(e){return WE({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9.172 16.242 12 13.414l2.828 2.828 1.414-1.414L13.414 12l2.828-2.828-1.414-1.414L12 10.586 9.172 7.758 7.758 9.172 10.586 12l-2.828 2.828z"}},{tag:"path",attr:{d:"M12 22c5.514 0 10-4.486 10-10S17.514 2 12 2 2 6.486 2 12s4.486 10 10 10zm0-18c4.411 0 8 3.589 8 8s-3.589 8-8 8-8-3.589-8-8 3.589-8 8-8z"}}]})(e)}var iC,aC=function(e){var t=e.isOwner,n=e.sokdakObj,i=c((0,r.useState)(!1),2),a=i[0],o=i[1],u=c((0,r.useState)(n.text),2),s=u[0],l=u[1],f=c((0,r.useState)("\ud83e\udd0d"),2),h=f[0],d=f[1],p=Bx(UE,"sdbox","".concat(n.id)),v=TE(VE,n.attachmentUrl),m=function(){o((function(e){return!e}))},y=function(){var e=G(Q().mark((function e(t){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o(!1),console.log(n.id,s),e.next=5,hS(p,{text:s});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=G(Q().mark((function e(){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc815\ub9d0 \uc9c0\uc6b0\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=6;break}return e.next=4,dS(p);case 4:return e.next=6,SE(v);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,QE.jsx)("div",{children:a?(0,QE.jsx)("div",{children:(0,QE.jsxs)("form",{onSubmit:y,children:[(0,QE.jsx)("div",{className:"Edit-div",children:(0,QE.jsx)("textarea",{onChange:function(e){var t=e.target.value;l(t)},value:s,className:"Edit-area",minLength:"1",maxLength:"120",required:!0})}),(0,QE.jsxs)("div",{className:"Edit-btn",children:[(0,QE.jsx)("button",{className:"Btn-icon",children:(0,QE.jsx)(eC,{})}),(0,QE.jsx)("button",{className:"Btn-icon",onClick:m,children:(0,QE.jsx)(tC,{})})]})]})}):(0,QE.jsx)(QE.Fragment,{children:(0,QE.jsxs)("div",{className:"Twitter-main",children:[(0,QE.jsxs)("div",{className:"Twitter-content",children:[(0,QE.jsxs)("div",{className:"Twitter-view",children:[(0,QE.jsx)("p",{className:"Twitter-nickname",children:n.creatorName}),(0,QE.jsx)("p",{className:"Twitter-date",children:function(){var e=new Date(n.createdAt),t=e.getFullYear(),r=e.getMonth()+1,i=e.getDate(),a=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0");return"".concat(t,".").concat(r,".").concat(i," ").concat(a,":").concat(o)}()})]}),t&&(0,QE.jsxs)("div",{className:"Twitter-view",children:[(0,QE.jsx)("button",{onClick:m,className:"Btn-icon",style:{marginRight:"5px"},children:(0,QE.jsx)(JE,{})}),(0,QE.jsx)("button",{onClick:g,className:"Btn-icon",children:(0,QE.jsx)(nC,{})})]})]}),(0,QE.jsx)("div",{className:"Twitter-title",children:n.text}),(0,QE.jsx)("div",{children:n.fileUrl&&(0,QE.jsx)("img",{src:n.fileUrl,width:"250px",height:"auto"})}),(0,QE.jsx)("div",{className:"Twitter-like",children:(0,QE.jsx)("div",{children:(0,QE.jsx)("button",{className:"Btn-heart",onClick:function(){d("\ud83e\udd0d"===h?"\ud83d\udc9b":"\ud83e\udd0d")},children:h})})})]})})})},oC=new Uint8Array(16);function uC(){if(!iC&&!(iC="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return iC(oC)}var sC=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var cC=function(e){return"string"===typeof e&&sC.test(e)},lC=[],fC=0;fC<256;++fC)lC.push((fC+256).toString(16).substr(1));var hC=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(lC[e[t+0]]+lC[e[t+1]]+lC[e[t+2]]+lC[e[t+3]]+"-"+lC[e[t+4]]+lC[e[t+5]]+"-"+lC[e[t+6]]+lC[e[t+7]]+"-"+lC[e[t+8]]+lC[e[t+9]]+"-"+lC[e[t+10]]+lC[e[t+11]]+lC[e[t+12]]+lC[e[t+13]]+lC[e[t+14]]+lC[e[t+15]]).toLowerCase();if(!cC(n))throw TypeError("Stringified UUID is invalid");return n};var dC=function(e,t,n){var r=(e=e||{}).random||(e.rng||uC)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return hC(r)},pC=function(e){var t=e.userObj,n=c((0,r.useState)(""),2),i=n[0],a=n[1],o=c((0,r.useState)(""),2),u=o[0],s=o[1],l=function(){var e=G(Q().mark((function e(n){var r,o,c,l;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r="",""===u){e.next=10;break}return o=TE(VE,"".concat(t.uid,"/").concat(dC())),e.next=6,bE(o,u,"data_url");case 6:return c=e.sent,e.next=9,IE(c.ref);case 9:r=e.sent;case 10:return l={text:i,createdAt:Date.now(),creatorId:t.uid,creatorName:t.displayName,fileUrl:r},console.log(l),e.next=14,UE.collection("sdbox").add(l);case 14:a(""),s("");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=(0,r.useRef)();return(0,QE.jsx)(QE.Fragment,{children:(0,QE.jsxs)("form",{onSubmit:l,className:"Create-form",children:[(0,QE.jsx)("textarea",{placeholder:"\ubb34\uc2a8 \uc77c\uc774 \uc77c\uc5b4\ub098\uace0 \uc788\ub098\uc694?",minLength:"1",maxLength:"120",onChange:function(e){var t=e.target.value;a(t)},value:i,className:"Create-area",required:!0}),(0,QE.jsx)("div",{className:"File-box",children:u&&(0,QE.jsxs)(QE.Fragment,{children:[(0,QE.jsx)("input",{type:"image",img:!0,src:u,className:"File-img"}),(0,QE.jsx)("button",{onClick:function(){s(""),f.current.value=""},className:"Btn-cancel",children:(0,QE.jsx)(rC,{})})]})}),(0,QE.jsxs)("div",{className:"Create-img",children:[(0,QE.jsx)("label",{htmlFor:"file-input",className:"Create-icon",children:(0,QE.jsx)(XE,{})}),(0,QE.jsx)("input",{type:"file",id:"file-input",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;s(t)},n.readAsDataURL(t)},ref:f,style:{display:"none"}}),(0,QE.jsx)("button",{className:"Create-icon",children:(0,QE.jsx)(ZE,{})})]})]})})},vC=function(e){var t=e.userObj,n=c((0,r.useState)([]),2),i=n[0],a=n[1];return(0,r.useEffect)((function(){UE.collection("sdbox").onSnapshot((function(e){var t=e.docs.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$E(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.id},e.data())}));a(t),console.log(i)}))}),[]),(0,QE.jsxs)("div",{className:"Home",children:[(0,QE.jsx)(pC,{userObj:t}),(0,QE.jsx)("div",{className:"HomeList",children:i.map((function(e){return(0,QE.jsx)(aC,{sokdakObj:e,isOwner:e.creatorId===t.uid,userId:t.uid},e.id)}))})]})};function mC(e){return WE({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",stroke:"#000",strokeWidth:"2",d:"M16,5 C16,7.209 14.209,9 12,9 C9.791,9 8,7.209 8,5 C8,2.791 9.791,1 12,1 C14.209,1 16,2.791 16,5 L16,5 Z M15,23 L15,17 L18,17 L18,15 C18,11.66 15.24,9.03 12,9 C8.79,9.03 6,11.66 6,15 L6,17 L9,17 L9,23 M3.5,23 L20.5,23 L3.5,23 Z"}}]})(e)}var yC=function(e){var t=e.userObj,n=e.refreshUser,i=c((0,r.useState)(t.displayName),2),a=i[0],o=i[1],u=function(){var e=G(Q().mark((function e(r){return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),t.displayName===a){e.next=6;break}return e.next=4,Ea(FE.currentUser,{displayName:a});case 4:n(),console.log(t.uid,a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,QE.jsx)("div",{className:"Profile",children:(0,QE.jsxs)("div",{className:"Profile-content",children:[(0,QE.jsx)("p",{className:"User-icon",children:(0,QE.jsx)(mC,{})}),(0,QE.jsx)("p",{className:"User-name",children:t.displayName}),(0,QE.jsxs)("form",{onSubmit:u,children:[(0,QE.jsx)("input",{type:"text",value:a,onChange:function(e){var t=e.target.value;o(t)},placeholder:"\uc218\uc815\ud560 \ub2c9\ub124\uc784\uc744 \uc785\ub825\ud558\uc138\uc694",className:"User-name-edit"}),(0,QE.jsx)("input",{type:"submit",value:"\uc644\ub8cc",className:"User-btn"})]})]})})},gC=function(e){var t=e.userObj,n=U();return(0,QE.jsx)("div",{className:"Nav-div",children:(0,QE.jsxs)("div",{className:"Nav-content",children:[(0,QE.jsx)("div",{children:(0,QE.jsx)("button",{className:"Nav-logo",onClick:function(){n("/")},children:"\ud648"})}),t&&(0,QE.jsx)("div",{children:(0,QE.jsx)("button",{className:"Nav-profile",onClick:function(){n("/".concat(t.uid))},children:"\ub0b4\uc815\ubcf4"})}),(0,QE.jsx)("div",{children:(0,QE.jsx)("button",{className:"Nav-logout",onClick:function(){FE.signOut(),n("/")},children:"\ub85c\uadf8\uc544\uc6c3"})})]})})},kC=function(e){var t=e.isLoggendIn,n=e.userObj,r=e.refreshUser;return(0,QE.jsxs)(K,{basename:"/Sokdak",children:[t&&(0,QE.jsx)(gC,{userObj:n}),(0,QE.jsx)(QE.Fragment,{children:t?(0,QE.jsxs)(z,{children:[(0,QE.jsx)(j,{path:"/",element:(0,QE.jsx)(vC,{userObj:n})}),(0,QE.jsx)(j,{path:"/:uid",element:(0,QE.jsx)(yC,{userObj:n,refreshUser:r})})]}):(0,QE.jsx)(QE.Fragment,{children:(0,QE.jsx)(YE,{})})})]})},bC=function(){var e=c((0,r.useState)(!1),2),t=e[0],n=e[1],i=c((0,r.useState)(!1),2),a=i[0],o=i[1],u=c((0,r.useState)(null),2),s=u[0],l=u[1];(0,r.useEffect)((function(){FE.onAuthStateChanged((function(e){e?(o(!0),l({displayName:e.displayName?e.displayName:e.uid.slice(0,9),uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})):(o(!1),l(null)),n(!0)}))}),[]);return(0,QE.jsx)(QE.Fragment,{children:t?(0,QE.jsx)(kC,{isLoggendIn:a,userObj:s,refreshUser:function(){var e=FE.currentUser;l({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})}}):""})};i.render((0,QE.jsx)(bC,{}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.2da4c899.js.map